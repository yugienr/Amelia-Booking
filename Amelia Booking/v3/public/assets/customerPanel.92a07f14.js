var Ht=Object.defineProperty,Jt=Object.defineProperties;var Gt=Object.getOwnPropertyDescriptors;var kt=Object.getOwnPropertySymbols;var Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable;var xt=(s,a,t)=>a in s?Ht(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,be=(s,a)=>{for(var t in a||(a={}))Qt.call(a,t)&&xt(s,t,a[t]);if(kt)for(var t of kt(a))Xt.call(a,t)&&xt(s,t,a[t]);return s},Ct=(s,a)=>Jt(s,Gt(a));import{bt as nt,bu as Kt,j as p,p as b,k as g,l as x,o as n,c,v as Dt,m as ue,b as e,a as o,h as Z,w as I,f as de,t as h,a8 as _e,_ as ye,g as L,n as J,bv as ea,bw as ta,aD as aa,bx as sa,by as la,aU as Fe,aM as fe,b5 as Ne,bz as Je,bf as Ot,u as xe,e as U,a5 as Ie,r as pe,F as ae,aX as at,bA as st,al as Ge,bB as Ze,ai as Qe,av as lt,au as ot,y as ke,E as he,Z as Ft,s as Oe,aS as oa,aP as Le,b4 as Ee,ac as Be,bC as Tt,b2 as Ce,bD as na,b3 as qe,B as ce,C as Xe,D as $e,q as Re,aV as Mt,aW as zt,bE as ia,bF as ra,bG as Ke,bH as It,z as et,bI as pt,bh as ze,bJ as Bt,d as Et,aq as tt,bK as rt,ao as ca,aj as ua,bL as da,bM as pa,bN as $t,bO as Pt,b6 as Te,bP as ma,aE as _a,b1 as ga,bQ as va,bR as mt,bS as _t,bT as Lt,ar as fa,bU as ba,bn as ha,bV as ya,a9 as ka,ae as xa}from"./stepForm.27300039.js";import{e as Ca,n as Se,m as Ta}from"./eventListForm.63ca46f7.js";import{_ as je}from"./catalogForm.67eb67a5.js";function Pe(s,a){let t=a!==""?JSON.parse(s.translations)[a]:JSON.parse(s.translations);if(nt in t)return t[nt];let l=Object.keys(t),i=Object.keys(t).map(m=>m.length>2?m.slice(0,2):m),d="";for(let m=0;m<i.length;m++){if(Kt===l[m]&&t[l[m]]){d=t[l[m]];break}i[m]===nt&&t[l[m]]&&(d=t[l[m]])}return d}function it(s,a){return s.translations&&JSON.parse(s.translations)[a]&&Pe(s,a)?Pe(s,a):s[a]}function we(s){return s.translations&&JSON.parse(s.translations).name&&Pe(s,"name")?Pe(s,"name"):s.name}function $a(s){return s.translations&&Pe(s,"")?Pe(s,""):s.name}function Xi(s){return s.translations&&Pe(s,"")?Pe(s,""):s.content}function Pa(s){return s.translations&&Pe(s,"name")?Pe(s,"name"):s.label}function La(s){return s.translations&&Pe(s,"")?Pe(s,""):s.label}function Me(s){return s.translations&&JSON.parse(s.translations).description&&Pe(s,"description")?Pe(s,"description"):s.description}function Ki(s){s.services&&s.services.length&&s.services.forEach(a=>{a.name=we(a),a.description=Me(a),a.extras.forEach(t=>{t.name=we(t),t.description=Me(t)})}),s.locations&&s.locations.length&&s.locations.forEach(a=>{a.name=we(a),a.description=Me(a)}),s.packages&&s.packages.length&&s.packages.forEach(a=>{a.name=we(a),a.description=Me(a),a.bookable.forEach(t=>{t.service.name=we(t.service),t.service.description=Me(t.service),"extras"in t.service&&t.service.extras.forEach(l=>{l.name=we(l),l.description=Me(l)})})}),s.categories&&s.categories.length&&s.categories.forEach(a=>{a.name=we(a),a.serviceList.forEach(t=>{t.name=we(t),t.description=Me(t),t.extras.forEach(l=>{l.name=we(l),l.description=Me(l)})})}),s.events&&s.events.length&&s.events.forEach(a=>{a.name=we(a),a.description=Me(a),a.extras.forEach(t=>{t.name=we(t),t.description=Me(t)})}),s.customFields&&s.customFields.length&&s.customFields.forEach(a=>{a.label=Pa(a),a.options.forEach(t=>{t.label=La(t)})}),s.employees&&s.employees.length&&s.employees.forEach(a=>{a.firstName=it(a,"firstName"),a.lastName=it(a,"lastName"),a.description=it(a,"description")})}const wa={props:{ready:{type:Boolean,default:!0}},setup(s){let a=p("amColors",b({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),t=g(()=>({"--am-c-caph-text":a.value.colorMainText,"--am-c-caph-heading-text":a.value.colorMainHeadingText,"--am-c-caph-text-op15":x(a.value.colorMainText,.15)}));return(l,i)=>(n(),c("div",{class:"am-caph__main",style:ue(e(t))},[Dt(l.$slots,"default")],4))}};const Sa={key:0},Da={key:1},Oa={key:2},Fa={name:"MainProfileFooter"},Ma=Object.assign(Fa,{props:{parentWidth:{type:Number,default:1200},display:{type:String,default:"first"},loading:{type:Boolean,default:!1},customizedLabels:{type:Object,default:()=>({})},deleteFooterType:{type:String,default:"plain"},saveFooterButton:{type:String,default:"filled"},passFooterButton:{type:String,default:"filled"}},setup(s){const a=s,t=p("labels");function l(k){return Object.keys(a.customizedLabels).length&&a.customizedLabels[k]?a.customizedLabels[k]:t[k]}const i=p("settings");let d=p("deleteProfileDialog",b(!1)),m=p("saveProfileChanges",()=>{}),r=p("changeProfilePassword",()=>{}),u=p("amColors"),_=g(()=>({"--am-c-cappf-bgr":u.value.colorMainBgr,"--am-c-cappf-text":u.value.colorMainText,"--am-c-cappf-text-op15":x(u.value.colorMainText,.15)}));return(k,w)=>(n(),c("div",{class:"am-cappf",style:ue(e(_))},[o("div",{class:J(["am-cappf__options",{"am-only-one":s.display==="second"||!e(i).roles.allowCustomerDeleteProfile}])},[s.display==="first"&&e(i).roles.allowCustomerDeleteProfile?(n(),c("div",Sa,[Z(ye,{category:"danger",size:e(a).parentWidth<=360?"small":"default",type:e(a).deleteFooterType,class:"am-cappf__delete",disabled:s.loading,onClick:w[0]||(w[0]=O=>_e(d)?d.value=!0:d=!0)},{default:I(()=>[de(h(l("delete_profile")),1)]),_:1},8,["size","type","disabled"])])):L("",!0),s.display==="first"?(n(),c("div",Da,[Z(ye,{type:e(a).saveFooterButton,size:e(a).parentWidth<=360?"small":"default",disabled:s.loading,onClick:w[1]||(w[1]=O=>e(m)())},{default:I(()=>[de(h(l("save_changes")),1)]),_:1},8,["type","size","disabled"])])):L("",!0),s.display==="second"?(n(),c("div",Oa,[Z(ye,{type:e(a).passFooterButton,size:e(a).parentWidth<=360?"small":"default",disabled:s.loading,onClick:w[2]||(w[2]=O=>e(r)())},{default:I(()=>[de(h(l("change_password")),1)]),_:1},8,["type","size","disabled"])])):L("",!0)],2)],4))}});const za=o("span",{class:"am-icon-calendar"},null,-1),Ia={class:"am-date-picker__input-inner"},Ba={class:"am-date-picker__input-start"},Ea=o("span",{class:"am-date-picker__input-separator"}," - ",-1),ja={class:"am-date-picker__input-end"},Aa={props:{id:{type:String},modelValue:{type:[String,Array,Object,Number]},type:{type:String,default:"date"},defaultValue:{type:[String,Array,Object,Number]},valueFormat:{type:String},value:{type:[String,Array,Object,Number]},format:{type:String},editable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator(s){return["default","medium","small","mini","micro"].includes(s)}},clearable:{type:Boolean,default:!1},name:{type:String,default:""},placeholder:{type:String,default:"Select Date"},popperClass:{type:String,default:""},teleported:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:ea},prefixIcon:{type:[String,Object],default:ta},disabledDate:{type:Function,default:()=>{}},lang:{type:String,default:""},customInputDisplay:{type:Boolean,default:!1}},emits:["change","input","visible-change","remove-tag","clear","blur","focus","calendar-change","update:modelValue"],setup(s,{emit:a}){const t=s;let{modelValue:l}=aa(t),i=g({get:()=>l.value,set:_=>{a("update:modelValue",_)}});const d=b(null);function m(){d.value&&d.value.focus()}let r=p("amColors"),u=g(()=>({"--am-c-primary":r.value.colorPrimary,"--am-c-success":r.value.colorSuccess,"--am-c-error":r.value.colorError,"--am-c-warning":r.value.colorWarning,"--am-c-main-bgr":r.value.colorMainBgr,"--am-c-main-heading-text":r.value.colorMainHeadingText,"--am-c-main-text":r.value.colorMainText,"--am-c-sb-bgr":r.value.colorSbBgr,"--am-c-sb-text":r.value.colorSbText,"--am-c-inp-bgr":r.value.colorInpBgr,"--am-c-inp-border":r.value.colorInpBorder,"--am-c-inp-text":r.value.colorInpText,"--am-c-inp-placeholder":r.value.colorInpPlaceHolder,"--am-c-drop-bgr":r.value.colorDropBgr,"--am-c-drop-text":r.value.colorDropText,"--am-c-drop-text-op10":x(r.value.colorDropText,.1),"--am-c-drop-text-op50":x(r.value.colorDropText,.5),"--am-c-drop-text-op80":x(r.value.colorDropText,.8),"--am-c-drop-border":r.value.colorDropBorder,"--am-c-btn-prim":r.value.colorBtnPrim,"--am-c-btn-prim-text":r.value.colorBtnPrimText,"--am-c-btn-sec":r.value.colorBtnSec,"--am-c-btn-sec-text":r.value.colorBtnSecText,"--am-c-btn-danger":r.value.colorBtnDanger,"--am-c-btn-danger-text":r.value.colorBtnDangerText,"--am-c-skeleton-op20":x(r.value.colorMainText,.2),"--am-c-skeleton-op60":x(r.value.colorMainText,.6),"--am-c-skeleton-sb-op20":x(r.value.colorSbText,.2),"--am-c-skeleton-sb-op60":x(r.value.colorSbText,.6)}));return(_,k)=>{const w=sa,O=la;return n(),c("div",{class:J(["am-date-picker-wrapper",`am-date-picker--${s.size}`])},[t.customInputDisplay&&t.type==="daterange"&&e(i).length?(n(),c("div",{key:0,class:J(["am-date-picker__input",`am-date-picker--${s.size}`]),onClick:m},[za,o("div",Ia,[o("span",Ba,h(e(Fe)(e(fe)(e(i)[0]).format("YYYY-MM-DD"))),1),Ea,o("span",ja,h(e(Fe)(e(fe)(e(i)[1]).format("YYYY-MM-DD"))),1)])],2)):L("",!0),Z(O,{locale:e(Ca)(t.lang)},{default:I(()=>[Z(w,Ne(_.$props,{id:s.id,ref_key:"amDatePicker",ref:d,modelValue:e(i),"onUpdate:modelValue":k[0]||(k[0]=S=>_e(i)?i.value=S:i=S),type:s.type,value:s.value,"prefix-icon":s.prefixIcon,"popper-class":s.popperClass,placeholder:s.placeholder,"clear-icon":s.clearIcon,"default-value":s.defaultValue,clearable:s.clearable,"disabled-date":s.disabledDate,"value-format":s.valueFormat,format:s.format,editable:s.editable,class:["am-date-picker",[`am-date-picker--${s.size}`,{"am-date-picker--disabled":s.disabled},{"am-date-picker--custom":t.type==="daterange"&&t.customInputDisplay}]],"popper-style":e(u),onInput:k[1]||(k[1]=S=>_.$emit("input",S)),onChange:k[2]||(k[2]=S=>_.$emit("change",S)),onBlur:k[3]||(k[3]=S=>_.$emit("blur",S)),onFocus:k[4]||(k[4]=S=>_.$emit("focus",S)),onCalendarChange:k[5]||(k[5]=S=>_.$emit("calendar-change",S))}),null,16,["id","modelValue","type","value","prefix-icon","popper-class","placeholder","clear-icon","default-value","clearable","disabled-date","value-format","format","editable","popper-style","class"])]),_:1},8,["locale"])],2)}}};function Na(s,a,t){let l={};return s.forEach(i=>{a===""&&i.periods.forEach(_=>{_.periodStart=Je(_.periodStart),_.periodEnd=Je(_.periodEnd)});let m=fe(i.periods[0].periodStart,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD"),r=t.getters.getSettings.general.usedLanguages.map(_=>_.length>2?_.slice(0,2):_);(t.getters.getSettings.general.usedLanguages.indexOf(t.getters.getLocalLanguage)!==-1||r.indexOf(t.getters.getLocalLanguage.split("_")[0])!==-1)&&(i.name=we(i),i.customTickets.forEach(_=>{_.name=$a(_)})),m in l||(l[m]={date:m,events:[]}),i.full&&i.status==="approved"?i.status="full":i.upcoming&&i.status==="approved"&&(i.status="upcoming"),i.bookings.forEach(_=>{let k=JSON.parse(JSON.stringify(i));k.bookings=[_],l[m].events.push(k)})}),l}function jt(s){let a=0;return s.bookings.forEach(t=>{if(["approved","pending"].includes(t.status)){let l=0;if(t.ticketsData.length>0)for(let d=0;d<t.ticketsData.length;d++)l+=t.ticketsData[d].persons*t.ticketsData[d].price;else l+=s.price;let i=Ot(s,t.coupon,t.tax?t.tax[0]:null,l,!1);a+=i.price-i.discount+i.tax}}),a>=0?a:0}function Va(s){let a=[];return s.forEach(t=>{let l=fe(t.periodStart.split(" ")[0],"YYYY-MM-DD"),i=fe(t.periodEnd.split(" ")[0],"YYYY-MM-DD"),d=t.periodStart.split(" ")[1].slice(0,5),m=t.periodEnd.split(" ")[1].slice(0,5);m==="00:00"&&(m="24:00",i.subtract(1,"days"));let r=[];for(;l.isSameOrBefore(i);)r.push(l.format("YYYY-MM-DD")),l.add(1,"days");r.forEach(u=>{a.push({date:u,startTime:d,endTime:m,periodStart:u+" "+d,periodEnd:u+" "+m,zoomLink:s.length>1&&t.zoomMeeting?t.zoomMeeting.joinUrl:"",lessonSpaceLink:s.length>1&&t.lessonSpace?t.lessonSpace:"",googleMeetLink:s.length>1&&t.googleMeetUrl?t.googleMeetUrl:""})})}),a}function Ya(s){let a=[];return s.bookings.forEach(t=>{["approved","pending"].includes(t.status)&&t.ticketsData&&t.ticketsData.length&&t.ticketsData.forEach(l=>{a.push({persons:l.persons,price:l.price,name:s.customTickets.find(i=>i.id===l.eventTicketId).name})})}),a}function Wa(s,a){let t=s.getters["entities/getLocations"];if(a.locationId&&t.length){let l=t.find(i=>i.id===a.locationId);return typeof l!="undefined"?l:null}else if(a.customLocation)return{address:"",name:a.customLocation};return null}const Ua={class:"am-msd__item-wrapper"},Za={class:"am-msd__item-inner"},qa={class:"am-msd__item-heading"},Ra=o("div",{class:"am-msd__item-icon"},[o("span",{class:"am-icon-close"})],-1),Ha=["onClick"],Ja={class:"am-msd__item-inner"},Ga={class:"am-msd__item-icon"},Qa={class:"am-msd__item-heading"},Xa=o("div",{class:"am-msd__item-indicator"},[o("span",{class:"am-icon-arrow-big-right"})],-1),Ka={key:1,class:"am-msd__item-divider"},es={class:"am-msd__item-inner"},ts=o("div",{class:"am-msd__item-icon"},[o("span",{class:"am-icon-logout"})],-1),as={class:"am-msd__item-heading"},ss={props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},monitor:{type:String,required:!0},menuItems:{type:Array,required:!0},customCss:{type:Object,default:()=>{}},width:{type:Number,default:300},position:{type:String,default:"right",validator(s){return["right","left","top","bottom"].includes(s)}}},emits:["click","update:visibility","logout"],setup(s,{emit:a}){const t=s;let l=p("labels");const i=xe();function d(_,k){a("click",{step:_,index:k}),a("update:visibility",!1)}function m(){a("update:visibility",!1)}function r(_){return Object.keys(t.customizedLabels).length&&t.customizedLabels[_]?t.customizedLabels[_]:l[_]}let u=g(()=>({"--am-mw-msd":`${t.width}px`}));return(_,k)=>(n(),U(at,{visibility:s.visibility,position:s.position,"custom-class":"am-msd","close-outside":!0,"custom-css":be(be({},s.customCss),e(u)),"onUpdate:visibility":k[1]||(k[1]=w=>e(a)("update:visibility",!1))},{footer:I(()=>[o("div",{class:"am-msd__item",onClick:k[0]||(k[0]=()=>e(a)("logout"))},[o("div",es,[ts,o("p",as,h(r("log_out")),1)])])]),default:I(()=>[o("div",Ua,[o("div",{class:"am-msd__item",onClick:m},[o("div",Za,[Z(Ie,{name:"fade"},{default:I(()=>[o("p",qa,h(r("menu_title")),1)]),_:1}),Z(Ie,{name:"fade"},{default:I(()=>[Ra]),_:1})])]),(n(!0),c(ae,null,pe(s.menuItems,(w,O)=>(n(),c(ae,{key:w.key},[w.key!=="packages"||e(i).getters["entities/getPackages"].length?(n(),c("div",{key:0,class:J(["am-msd__item",{selected:s.monitor===w.key}]),onClick:S=>d(w,O)},[o("div",Ja,[o("div",Ga,[o("span",{class:J(`am-icon-${w.icon}`)},null,2)]),Z(Ie,{name:"fade"},{default:I(()=>[o("p",Qa,h(w.label),1)]),_:2},1024),Z(Ie,{name:"fade"},{default:I(()=>[Xa]),_:1})])],10,Ha)):L("",!0),O===0?(n(),c("div",Ka)):L("",!0)],64))),128))])]),_:1},8,["visibility","position","custom-css"]))}};const ct={props:{size:{type:String,default:"default"}},setup(s){const a=s,t=st().cookies,l=p("settings");let i=p("cabinetType"),{bookingsCounterChanger:d}=p("bookingsCounterChanger",{bookingsCounterChanger:()=>{}});const m=xe();let r=g({get:()=>m.getters["cabinet/getTimeZone"],set:O=>{m.commit("cabinet/setTimeZone",O||"")}});const u=p("timeZone"),_=p("timeZones");function k(){let O;l.general.showClientTimeZone?O=Ze():O=u.value,t.set("ameliaUserTimeZone",O,l.roles[i.value+"Cabinet"].tokenValidTime),d(),m.commit("cabinet/setTimeZone",O)}function w(O){t.set("ameliaUserTimeZone",O,l.roles[i.value+"Cabinet"].tokenValidTime),d()}return(O,S)=>(n(),U(Qe,{modelValue:e(r),"onUpdate:modelValue":S[0]||(S[0]=A=>_e(r)?r.value=A:r=A),filterable:!0,placeholder:e(Ze)(),clearable:!0,size:e(a).size,"custom-class":"am-ctz","prefix-icon":"globe-watch",onClear:k,onChange:w},{default:I(()=>[(n(!0),c(ae,null,pe(e(_),(A,D)=>(n(),U(Ge,{key:D,value:A,label:A},{default:I(()=>[de(h(A),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","size"]))}};function At(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader}function De(s){let a=s.getters["auth/getToken"];return a&&!At()?{headers:{Authorization:"Bearer "+a}}:{}}const ls={key:0,class:"el-skeleton-item-wrapper-title"},os={name:"AuthSkeleton"},gt=Object.assign(os,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(s){const a=s;return(t,l)=>{const i=lt,d=ot;return n(),U(d,{animated:"",class:J(["am-asi-el-skeleton",e(a).mainClass])},{template:I(()=>[e(a).centerFirst?(n(),c("div",ls,[Z(i,{variant:"rect"})])):L("",!0),(n(!0),c(ae,null,pe(new Array(e(a).count),m=>(n(),c("div",{key:m,class:"el-skeleton-item-wrapper"},[Z(i,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const ns={class:"am-asi__top"},is={class:"am-asi__header"},rs={class:"am-asi__text"},cs={class:"am-asi__footer"},us={class:"am-asi__footer-text"},ds={name:"AuthSignIn"},ps=Object.assign(ds,{setup(s){let a=xe();const t=st().cookies,l=p("settings");let i=p("amCustomize");const d=p("labels"),m=p("localLanguage");let r=g(()=>l.general.usedLanguages.includes(m.value)),u=g(()=>{let E=ke(be({},d)),q=i.value.signIn.translations;return q&&Object.keys(q).forEach(ne=>{q[ne][m.value]&&r.value?E[ne]=q[ne][m.value]:q[ne].default&&(E[ne]=q[ne].default)}),E}),_={components:{IconComponent:je},template:'<IconComponent icon="email"></IconComponent>'},k={components:{IconComponent:je},template:'<IconComponent icon="password"></IconComponent>'},w=b(null),O=b({email:g({get:()=>a.getters["auth/getEmail"],set:E=>{a.commit("auth/setEmail",E||"")}}),password:g({get:()=>a.getters["auth/getPassword"],set:E=>{a.commit("auth/setPassword",E||"")}})}),S=b({email:[{required:!0,message:u.value.enter_email_or_username_warning,trigger:"submit"}],password:[{required:!0,message:u.value.enter_password_warning,trigger:"submit"}]}),A=b({email:{template:Se.text,props:{itemName:"email",label:u.value.email_or_username,iconStart:he(_),placeholder:"",class:"am-asi__item"}},password:{template:Se.text,props:{itemName:"password",itemType:"password",showPassword:!0,label:u.value.password,iconStart:he(k),placeholder:"",class:"am-asi__item"}}}),D=p("pageKey"),y=p("cabinetType"),V=g(()=>a.getters.getLoading),f=g(()=>a.getters["auth/getProfileDeleted"]),W=b(!1),G=b("");function R(E,q){let ne=Tt("token");E?Q(E,!1,!1,!1):ne?Q(ne,!0,!1,q):Q("",!1,!0,!1)}function Q(E,q,ne,se){let Y={cabinetType:y.value,changePass:se};ne&&(Y.checkIfWpUser=!0);let j=a.getters["auth/getPassword"],te=a.getters["auth/getEmail"];!E&&j&&te&&(Y.password=j,Y.email=te),q&&(Y.token=E),Ce.post("/users/authenticate",Y,E!==null&&!At()?{headers:{Authorization:"Bearer "+E}}:{}).then(ee=>{if("authentication_required"in ee.data.data){l.roles[y.value+"Cabinet"].loginEnabled||(D.value="sendAccessLink");return}"token"in ee.data.data&&(t.set("ameliaToken",ee.data.data.token,l.roles[y.value+"Cabinet"].tokenValidTime,null,null,!0),t.set("ameliaUserEmail",ee.data.data.user.email,l.roles[y.value+"Cabinet"].tokenValidTime,null,null,!0),a.commit("auth/setToken",ee.data.data.token)),Tt("token")&&window.history.replaceState(null,null,na(window.location.href,"token")),a.commit("auth/setProfile",ee.data.data.user),"set_password"in ee.data.data&&ee.data.data.set_password||"change_password"in ee.data.data&&ee.data.data.change_password?D.value="setPassword":a.commit("auth/setAuthenticated",!0)}).catch(ee=>{if(!("data"in ee.response.data)&&"message"in ee.response.data){W.value=!0,G.value=ee.response.data.message;return}"invalid_credentials"in ee.response.data.data&&(W.value=!0,G.value=u.value.invalid_credentials)}).finally(()=>{a.commit("setLoading",!1)})}function K(){w.value.validate(E=>{if(E)a.commit("setLoading",!0),Q(null,!1,!1,!1);else return!1})}Ft(()=>{a.commit("setLoading",!0)}),Oe(()=>{a.getters["auth/getLoggedOut"]?(l.roles[y.value+"Cabinet"].loginEnabled||(D.value="sendAccessLink"),a.commit("setLoading",!1)):R(t.get("ameliaToken"),"changePass"in oa(window.location.href))});let z=p("containerWidth"),F=g(()=>Le(z.value)),T=p("amFonts"),P=p("amColors"),$=g(()=>({"--am-c-primary":P.value.colorPrimary,"--am-c-success":P.value.colorSuccess,"--am-c-error":P.value.colorError,"--am-c-warning":P.value.colorWarning,"--am-c-main-bgr":P.value.colorMainBgr,"--am-c-main-heading-text":P.value.colorMainHeadingText,"--am-c-main-text":P.value.colorMainText,"--am-c-main-text-op70":x(P.value.colorMainText,.7),"--am-c-main-text-op60":x(P.value.colorMainText,.6),"--am-c-main-text-op40":x(P.value.colorMainText,.4),"--am-c-main-text-op25":x(P.value.colorMainText,.25),"--am-c-inp-bgr":P.value.colorInpBgr,"--am-c-inp-border":P.value.colorInpBorder,"--am-c-inp-text":P.value.colorInpText,"--am-c-inp-placeholder":P.value.colorInpPlaceHolder,"--am-c-btn-prim":P.value.colorBtnPrim,"--am-c-btn-prim-text":P.value.colorBtnPrimText,"--am-c-skeleton-op20":x(P.value.colorMainText,.2),"--am-c-skeleton-op60":x(P.value.colorMainText,.6),"--am-font-family":T.value.fontFamily,"--am-c-scroll-op30":x(P.value.colorPrimary,.3),"--am-c-scroll-op10":x(P.value.colorPrimary,.1)}));return(E,q)=>{const ne=qe;return e(V)?(n(),U(e(gt),{key:1,count:4,"center-first":!0,"main-class":"am-asi-sign-in am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ue(e($))},[o("div",ns,[e(f)?(n(),U(Ee,{key:0,class:"am-asi__top-message am-asi__top-message-success",type:"success",title:e(u).profile_deleted,description:"","show-icon":!0,closable:!0,onClose:q[0]||(q[0]=se=>e(a).commit("auth/setProfileDeleted",!1))},null,8,["title"])):L("",!0),e(W)?(n(),U(Ee,{key:1,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:e(G),description:"","show-icon":!0,closable:!0,onClose:q[1]||(q[1]=se=>e(a).commit("auth/setProfileDeleted",!1))},null,8,["title"])):L("",!0),o("div",is,h(e(u).welcome_back),1),o("div",rs,h(e(u).enter_credentials),1)]),Z(ne,{ref_key:"authFormRef",ref:w,model:e(O),rules:e(S),"label-position":"top",class:J(["am-asi__form",e(F)])},{default:I(()=>[(n(!0),c(ae,null,pe(e(A),(se,Y)=>(n(),U(Be(se.template),Ne({key:Y,ref_for:!0,ref:"customerCollectorRef",modelValue:e(O)[Y],"onUpdate:modelValue":j=>e(O)[Y]=j},se.props,{onEnter:K}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),Z(ye,{class:"am-asi__btn",type:e(i).signIn.options.signInBtn.buttonType,onClick:K},{default:I(()=>[de(h(e(u).sign_in),1)]),_:1},8,["type"]),o("div",cs,[o("span",us,h(e(u).forgot_your_password),1),o("span",{class:"am-asi__footer-link",onClick:q[2]||(q[2]=se=>_e(D)?D.value="sendAccessLink":D="sendAccessLink")},h(e(u).reset_password),1)])],4))}}});const ms={class:"am-asi__top"},_s={class:"am-asi__header"},gs={class:"am-asi__text"},vs={key:0,class:"am-asi__footer"},fs={name:"AuthReset"},bs=Object.assign(fs,{setup(s){let a=xe();const t=p("settings");let l=p("amCustomize");const i=p("labels"),d=p("localLanguage");let m=g(()=>t.general.usedLanguages.includes(d.value)),r=g(()=>{let R=ke(be({},i)),Q=l.value.accessLink.translations;return Q&&Object.keys(Q).forEach(K=>{Q[K][d.value]&&m.value?R[K]=Q[K][d.value]:Q[K].default&&(R[K]=Q[K].default)}),R}),u=b(null),_=b({email:g({get:()=>a.getters["auth/getEmail"],set:R=>{a.commit("auth/setEmail",R||"")}})}),k=b({email:[{required:!0,message:r.value.enter_email_warning,trigger:"submit"}]}),w=b({email:{template:Se.text,props:{itemName:"email",itemType:"email",label:r.value.email,placeholder:"",class:"am-asi__item"}}}),O=p("pageKey"),S=p("cabinetType"),A=g(()=>a.getters.getLoading);function D(){u.value.validate(R=>{if(R)a.commit("setLoading",!0),Ce.post("/users/customers/reauthorize",{email:a.getters["auth/getEmail"],locale:window.localeLanguage[0],cabinetType:S.value}).then(()=>{O.value="sendAccessLinkProcess"}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)});else return!1})}let y=p("containerWidth"),V=g(()=>Le(y.value)),f=p("amFonts"),W=p("amColors"),G=g(()=>({"--am-c-primary":W.value.colorPrimary,"--am-c-success":W.value.colorSuccess,"--am-c-error":W.value.colorError,"--am-c-warning":W.value.colorWarning,"--am-c-main-bgr":W.value.colorMainBgr,"--am-c-main-heading-text":W.value.colorMainHeadingText,"--am-c-main-text":W.value.colorMainText,"--am-c-main-text-op70":x(W.value.colorMainText,.7),"--am-c-main-text-op60":x(W.value.colorMainText,.6),"--am-c-main-text-op40":x(W.value.colorMainText,.4),"--am-c-main-text-op25":x(W.value.colorMainText,.25),"--am-c-inp-bgr":W.value.colorInpBgr,"--am-c-inp-border":W.value.colorInpBorder,"--am-c-inp-text":W.value.colorInpText,"--am-c-inp-placeholder":W.value.colorInpPlaceHolder,"--am-c-btn-prim":W.value.colorBtnPrim,"--am-c-btn-prim-text":W.value.colorBtnPrimText,"--am-c-skeleton-op20":x(W.value.colorMainText,.2),"--am-c-skeleton-op60":x(W.value.colorMainText,.6),"--am-font-family":f.value.fontFamily,"--am-c-scroll-op30":x(W.value.colorPrimary,.3),"--am-c-scroll-op10":x(W.value.colorPrimary,.1)}));return(R,Q)=>{const K=qe;return e(A)?(n(),U(e(gt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ue(e(G))},[o("div",ms,[o("div",_s,h(e(r).access_link_send),1),o("div",gs,h(e(r).access_link_send_description),1)]),Z(K,{ref_key:"authFormRef",ref:u,model:e(_),rules:e(k),"label-position":"top",class:J(["am-asi__form",e(V)])},{default:I(()=>[(n(!0),c(ae,null,pe(e(w),(z,F)=>(n(),U(Be(z.template),Ne({key:F,ref_for:!0,ref:"customerCollectorRef",modelValue:e(_)[F],"onUpdate:modelValue":T=>e(_)[F]=T},z.props,{onEnter:D}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),Z(ye,{class:"am-asi__btn",type:e(l).accessLink.options.sendBtn.buttonType,onClick:D},{default:I(()=>[de(h(e(r).send),1)]),_:1},8,["type"]),e(t).roles[e(S)+"Cabinet"].loginEnabled?(n(),c("div",vs,[o("span",{class:"am-asi__footer-link",onClick:Q[0]||(Q[0]=z=>_e(O)?O.value="signIn":O="signIn")},h(e(r).sign_in),1)])):L("",!0)],4))}}});const hs={class:"am-asi__top"},ys={class:"am-asi__header"},ks={class:"am-asi__text"},xs={class:"am-asi__email"},Cs={class:"am-asi__footer"},Ts={class:"am-asi__footer-text"},$s={name:"AuthResetProcess"},Ps=Object.assign($s,{setup(s){let a=xe();const t=p("settings");let l=p("amCustomize");const i=p("labels"),d=p("localLanguage");let m=g(()=>t.general.usedLanguages.includes(d.value)),r=g(()=>{let S=ke(be({},i)),A=l.value.accessLinkSuccess.translations;return A&&Object.keys(A).forEach(D=>{A[D][d.value]&&m.value?S[D]=A[D][d.value]:A[D].default&&(S[D]=A[D].default)}),S}),u=g(()=>a.getters["auth/getEmail"]),_=p("pageKey"),k=p("amFonts"),w=p("amColors"),O=g(()=>({"--am-c-primary":w.value.colorPrimary,"--am-c-success":w.value.colorSuccess,"--am-c-error":w.value.colorError,"--am-c-warning":w.value.colorWarning,"--am-c-main-bgr":w.value.colorMainBgr,"--am-c-main-heading-text":w.value.colorMainHeadingText,"--am-c-main-text":w.value.colorMainText,"--am-c-main-text-op70":x(w.value.colorMainText,.7),"--am-c-main-text-op60":x(w.value.colorMainText,.6),"--am-c-main-text-op40":x(w.value.colorMainText,.4),"--am-c-main-text-op25":x(w.value.colorMainText,.25),"--am-c-inp-bgr":w.value.colorInpBgr,"--am-c-inp-border":w.value.colorInpBorder,"--am-c-inp-text":w.value.colorInpText,"--am-c-inp-placeholder":w.value.colorInpPlaceHolder,"--am-c-btn-prim":w.value.colorBtnPrim,"--am-c-btn-prim-text":w.value.colorBtnPrimText,"--am-c-skeleton-op20":x(w.value.colorMainText,.2),"--am-c-skeleton-op60":x(w.value.colorMainText,.6),"--am-font-family":k.value.fontFamily,"--am-c-scroll-op30":x(w.value.colorPrimary,.3),"--am-c-scroll-op10":x(w.value.colorPrimary,.1)}));return(S,A)=>(n(),c("div",{class:"am-asi",style:ue(e(O))},[o("div",hs,[o("div",ys,h(e(r).access_link_send_check),1),o("div",ks,h(e(r).access_link_send_click),1),o("div",xs,h(e(u)),1)]),o("div",Cs,[o("span",Ts,h(e(r).access_link_send_inbox),1),o("span",{class:"am-asi__footer-link",onClick:A[0]||(A[0]=D=>_e(_)?_.value="sendAccessLink":_="sendAccessLink")},h(e(r).access_link_send_retry),1)])],4))}});const Ls={class:"am-asi__top"},ws={class:"am-asi__header"},Ss={class:"am-asi__text"},Ds={name:"AuthNewPass"},Os=Object.assign(Ds,{setup(s){let a=xe();const t=p("settings");let l=p("amCustomize");const i=p("labels"),d=p("localLanguage");let m=g(()=>t.general.usedLanguages.includes(d.value)),r=g(()=>{let G=ke(be({},i)),R=l.value.setPass.translations;return R&&Object.keys(R).forEach(Q=>{R[Q][d.value]&&m.value?G[Q]=R[Q][d.value]:R[Q].default&&(G[Q]=R[Q].default)}),G}),u=b(null),_=b({newPassword:g({get:()=>a.getters["auth/getNewPassword"],set:G=>{a.commit("auth/setNewPassword",G||"")}}),confirmPassword:g({get:()=>a.getters["auth/getConfirmPassword"],set:G=>{a.commit("auth/setConfirmPassword",G||"")}})}),k=b({newPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"}],confirmPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:r.value.passwords_not_match,trigger:"submit"}]}),w=b({newPassword:{template:Se.text,props:{itemName:"newPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon,placeholder:"",minLength:3,class:"am-asi__item"}},confirmPassword:{template:Se.text,props:{itemName:"confirmPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon_retype,placeholder:"",minLength:3,class:"am-asi__item"}}}),O=p("cabinetType"),S=g(()=>a.getters.getLoading);function A(){u.value.validate(G=>{if(G&&a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"]){let R=a.getters["auth/getProfile"];a.commit("setLoading",!0),Ce.post("/users/"+O.value+"s/"+R.id,{password:a.getters["auth/getNewPassword"]},Object.assign(De(a),{params:{source:"cabinet-"+O.value}})).then(()=>{a.commit("auth/setAuthenticated",!0)}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}else return!1})}let D=p("containerWidth"),y=g(()=>Le(D.value)),V=p("amFonts"),f=p("amColors"),W=g(()=>({"--am-c-primary":f.value.colorPrimary,"--am-c-success":f.value.colorSuccess,"--am-c-error":f.value.colorError,"--am-c-warning":f.value.colorWarning,"--am-c-main-bgr":f.value.colorMainBgr,"--am-c-main-heading-text":f.value.colorMainHeadingText,"--am-c-main-text":f.value.colorMainText,"--am-c-main-text-op70":x(f.value.colorMainText,.7),"--am-c-main-text-op60":x(f.value.colorMainText,.6),"--am-c-main-text-op40":x(f.value.colorMainText,.4),"--am-c-main-text-op25":x(f.value.colorMainText,.25),"--am-c-inp-bgr":f.value.colorInpBgr,"--am-c-inp-border":f.value.colorInpBorder,"--am-c-inp-text":f.value.colorInpText,"--am-c-inp-placeholder":f.value.colorInpPlaceHolder,"--am-c-btn-prim":f.value.colorBtnPrim,"--am-c-btn-prim-text":f.value.colorBtnPrimText,"--am-c-skeleton-op20":x(f.value.colorMainText,.2),"--am-c-skeleton-op60":x(f.value.colorMainText,.6),"--am-font-family":V.value.fontFamily,"--am-c-scroll-op30":x(f.value.colorPrimary,.3),"--am-c-scroll-op10":x(f.value.colorPrimary,.1)}));return(G,R)=>{const Q=qe;return e(S)?(n(),U(e(gt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ue(e(W))},[o("div",Ls,[o("div",ws,h(e(r).new_password_set),1),o("div",Ss,h(e(r).new_password_set_description),1)]),Z(Q,{ref_key:"authFormRef",ref:u,model:e(_),rules:e(k),"label-position":"top",class:J(["am-asi__form",e(y)])},{default:I(()=>[(n(!0),c(ae,null,pe(e(w),(K,z)=>(n(),U(Be(K.template),Ne({key:z,ref_for:!0,ref:"customerCollectorRef",modelValue:e(_)[z],"onUpdate:modelValue":F=>e(_)[z]=F},K.props,{onEnter:A}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),Z(ye,{class:"am-asi__btn",type:e(l).setPass.options.newPassBtn.buttonType,onClick:A},{default:I(()=>[de(h(e(r).new_password_set_action),1)]),_:1},8,["type"])],4))}}});const Fs={class:"am-asi__top"},Ms=o("div",{class:"am-asi__img"},[o("span",{class:"am-icon-check"})],-1),zs={class:"am-asi__header"},Is={class:"am-asi__text"},Bs={name:"ChangePassSuccess"},Es=Object.assign(Bs,{setup(s){const a=p("settings");let t=p("amCustomize");const l=p("labels"),i=p("localLanguage");let d=g(()=>a.general.usedLanguages.includes(i.value)),m=g(()=>{let w=ke(be({},l)),O=t.value.setPassSuccess.translations;return O&&Object.keys(O).forEach(S=>{O[S][i.value]&&d.value?w[S]=O[S][i.value]:O[S].default&&(w[S]=O[S].default)}),w}),r=p("pageKey"),u=p("amFonts"),_=p("amColors"),k=g(()=>({"--am-c-primary":_.value.colorPrimary,"--am-c-success":_.value.colorSuccess,"--am-c-error":_.value.colorError,"--am-c-warning":_.value.colorWarning,"--am-c-main-bgr":_.value.colorMainBgr,"--am-c-main-heading-text":_.value.colorMainHeadingText,"--am-c-main-text":_.value.colorMainText,"--am-c-main-text-op70":x(_.value.colorMainText,.7),"--am-c-main-text-op60":x(_.value.colorMainText,.6),"--am-c-main-text-op40":x(_.value.colorMainText,.4),"--am-c-main-text-op25":x(_.value.colorMainText,.25),"--am-c-btn-prim":_.value.colorBtnPrim,"--am-c-btn-prim-text":_.value.colorBtnPrimText,"--am-c-skeleton-op20":x(_.value.colorMainText,.2),"--am-c-skeleton-op60":x(_.value.colorMainText,.6),"--am-font-family":u.value.fontFamily,"--am-c-scroll-op30":x(_.value.colorPrimary,.3),"--am-c-scroll-op10":x(_.value.colorPrimary,.1)}));return(w,O)=>(n(),c("div",{class:"am-asi",style:ue(e(k))},[o("div",Fs,[Ms,o("div",zs,h(e(m).new_password_changed),1),o("div",Is,h(e(m).new_password_changed_description),1)]),Z(ye,{class:"am-asi__btn",type:e(t).setPassSuccess.options.signInBtn.buttonType,onClick:O[0]||(O[0]=S=>_e(r)?r.value="signIn":r="signIn")},{default:I(()=>[de(h(e(m).sign_in),1)]),_:1},8,["type"])],4))}}),js={name:"AuthWrapper"},As=Object.assign(js,{setup(s){const a=p("settings");let t=b({signIn:he(ps),sendAccessLink:he(bs),sendAccessLinkProcess:he(Ps),setPassword:he(Os),changeSuccess:he(Es)}),l=p("originKey"),i=b("signIn");ce("pageKey",i);const d=b(a.customizedData?a.customizedData.fonts:Xe.fonts);ce("amFonts",d);let m=g(()=>a.customizedData&&l.value in a.customizedData?a.customizedData[l.value].colors:Xe[l.value].colors);return ce("amColors",m),(r,u)=>(n(),U(Be(e(t)[e(i)])))}});const Ns={class:"am-csd__inner"},Vs={class:"am-csd__header"},Ys={class:"am-csd__header-text"},Ws={class:"am-csd__content"},Us={class:"am-csd__footer"},Zs={name:"DeleteProfile"},qs=Object.assign(Zs,{props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},customizedOptions:{type:Object,default:()=>({})}},emits:["close","deleteProfile"],setup(s,{emit:a}){const t=s;let l=p("containerWidth");const i=p("labels");function d(_){return Object.keys(t.customizedLabels).length&&t.customizedLabels[_]?t.customizedLabels[_]:i[_]}let m=p("amFonts"),r=p("amColors"),u=g(()=>({"--am-c-csd-text":r.value.colorMainText,"--am-c-csd-bgr":r.value.colorMainBgr,"--am-c-csd-text-op10":x(r.value.colorMainText,.1),"--am-font-family":m.value.fontFamily}));return(_,k)=>(n(),U(at,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__cancel",style:ue(e(u)),position:"center"},{footer:I(()=>[o("div",Us,[Z(ye,{category:"secondary",size:e(l)<=360?"small":"default",type:e(t).customizedOptions.closeBtn.buttonType,onClick:k[1]||(k[1]=()=>{a("close")})},{default:I(()=>[de(h(d("close")),1)]),_:1},8,["size","type"]),Z(ye,{category:"danger",size:e(l)<=360?"small":"default","loading-icon":"loading",type:e(t).customizedOptions.confirmBtn.buttonType,onClick:k[2]||(k[2]=()=>{a("deleteProfile")})},{default:I(()=>[de(h(d("delete")),1)]),_:1},8,["size","type"])])]),default:I(()=>[o("div",Ns,[o("div",Vs,[o("div",Ys,h(d("delete_profile")),1),o("div",{class:"am-csd__header-btn",onClick:k[0]||(k[0]=()=>{a("close")})},[Z(je,{icon:"close"})])]),o("div",Ws,[o("p",null,h(d("delete_profile_description")),1)])])]),_:1},8,["visibility","style"]))}});const wt={props:{pageWidth:{type:Number,default:768},count:{type:[Number,String],default:2},itemDirection:{type:String,default:"row",validator(s){return["row","row-reverse","column","column-reverse","initial","revert","unset"].includes(s)}}},setup(s){const a=s;let t=g(()=>Le(a.pageWidth)),l=p("amColors"),i=g(()=>({"--am-c-skeleton-op20":x(l.value.colorMainText,.2),"--am-c-skeleton-op60":x(l.value.colorMainText,.6),"--am-c-flex-direction":a.itemDirection}));return(d,m)=>{const r=lt,u=ot;return n(),U(u,{animated:"",class:"am-cps",style:ue(e(i))},{template:I(()=>[(n(!0),c(ae,null,pe(new Array(e(a).count),_=>(n(),c("div",{key:_,class:J(["am-cps__item",e(t)])},[Z(r,{class:"am-cps__item-label",variant:"rect"}),Z(r,{class:"am-cps__item-input",variant:"rect"})],2))),128))]),_:1},8,["style"])}}};const Rs=o("span",{class:"am-icon-checkmark-circle-full"},null,-1),Hs={name:"CabinetProfile",key:"profile"},Js=Object.assign(Hs,{setup(s){let a=xe(),t=g(()=>a.getters.getLoading),l=b(null),i=b(0),d=p("sidebarCollapsed");window.addEventListener("resize",m);function m(){l.value&&(i.value=l.value.offsetWidth)}$e(d,N=>{N?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=l.value.offsetWidth}Oe(()=>{Re(()=>{i.value=l.value.offsetWidth})});let u=g(()=>Le(i.value));const _=p("settings");let k=p("cabinetType"),w=p("amCustomize");const O=p("labels"),S=p("localLanguage");let A=g(()=>_.general.usedLanguages.includes(S.value));function D(N,v){return v&&Object.keys(v).forEach(C=>{v[C][S.value]&&A.value?N[C]=v[C][S.value]:v[C].default&&(N[C]=v[C].default)}),N}let y=g(()=>{let N=ke(be({},O)),v=w.value.profile.translations;return D(N,v)});function V(N){let v={},C=w.value[N].translations;return D(v,C)}let f=g(()=>w.value.profile.options),W=b("first"),G=b("");function R(){Y.value=!1,G.value=""}let Q=b(null),K=b(!1),z=b({firstName:g({get:()=>a.getters["auth/getProfile"].firstName,set:N=>{a.commit("auth/setProfileFirstName",N||"")}}),lastName:g({get:()=>a.getters["auth/getProfile"].lastName,set:N=>{a.commit("auth/setProfileLastName",N||"")}}),email:g({get:()=>a.getters["auth/getProfile"].email,set:N=>{a.commit("auth/setProfileEmail",N||"")}}),phone:g({get:()=>a.getters["auth/getProfile"].phone,set:N=>{a.commit("auth/setProfilePhone",N||"")}}),birthday:g({get:()=>a.getters["auth/getProfile"].birthday?a.getters["auth/getProfile"].birthday:"",set:N=>{a.commit("auth/setProfileBirthday",N?fe(N).format("YYYY-MM-DD"):"")}})}),F=b({firstName:{template:Se.text,props:{itemName:"firstName",label:y.value.first_name_colon,placeholder:y.value.enter_first_name,class:g(()=>`am-capi__item ${u.value}`)}},lastName:{template:Se.text,props:{itemName:"lastName",label:y.value.last_name_colon,placeholder:y.value.enter_last_name,class:g(()=>`am-capi__item ${u.value}`)}},email:{template:Se.text,props:{itemName:"email",label:y.value.email_colon,placeholder:y.value.enter_email,class:g(()=>`am-capi__item ${u.value}`)}},phone:{countryPhoneIso:g({get:()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:"",set:N=>{a.commit("auth/setProfileCountryPhoneIso",N?N.toLowerCase():"")}}),template:Se.phone,props:{itemName:"phone",label:y.value.phone_colon,placeholder:y.value.enter_phone,defaultCode:g(()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:""),phoneError:g(()=>K.value),whatsAppLabel:y.value.whatsapp_opt_in_text,isWhatsApp:_.notifications.whatsAppEnabled&&_.notifications.whatsAppAccessToken&&_.notifications.whatsAppBusinessID&&_.notifications.whatsAppPhoneID,class:g(()=>`am-capi__item ${u.value}`)}},birthday:{template:Se.datepicker,props:{itemName:"birthday",label:y.value.date_of_birth,placeholder:y.value.enter_date_of_birth,clearable:!0,readOnly:!1,class:g(()=>`am-capi__item am-capi__item-birthday ${u.value}`)}}}),T=b({firstName:[{required:!0,message:y.value.enter_first_name_warning,trigger:"submit"}],lastName:[{required:f.value.lastName.required,message:y.value.enter_last_name_warning,trigger:"submit"}],email:[{required:f.value.email.required,type:"email",message:y.value.enter_valid_email_warning,trigger:"submit"}],phone:[{required:f.value.phone.required,message:y.value.enter_phone_warning,trigger:"submit"}],birthday:[{required:f.value.birthday.required,message:y.value.enter_date_of_birth_warning,trigger:"submit"}]}),P=b(!1);ce("deleteProfileDialog",P);function $(){a.commit("auth/setProfileFirstName",z.value.firstName?z.value.firstName.trim():""),a.commit("auth/setProfileLastName",z.value.lastName?z.value.lastName.trim():""),a.commit("auth/setProfileEmail",z.value.email?z.value.email.trim():""),Q.value.validate(N=>{if(N){G.value=y.value.profile_data_success;let v=a.getters["auth/getProfile"];a.commit("setLoading",!0),Ce.post("/users/"+k.value+"s/"+v.id,v,De(a)).finally(()=>{a.commit("setLoading",!1),Y.value=!0,f.value.phone.required&&z.value.phone&&(K.value=!1)})}else return f.value.phone.required&&!z.value.phone&&(K.value=!0),!1})}ce("saveProfileChanges",$);let E=b(null),q=b({newPass:g({get:()=>a.getters["auth/getNewPassword"],set:N=>{a.commit("auth/setNewPassword",N||"")}}),confirmPass:g({get:()=>a.getters["auth/getConfirmPassword"],set:N=>{a.commit("auth/setConfirmPassword",N||"")}})}),ne=b({newPass:{template:Se.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:y.value.new_password_colon,placeholder:"",minLength:3,class:g(()=>`am-capp__item ${u.value}`)}},confirmPass:{template:Se.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:y.value.new_password_colon_retype,placeholder:"",minLength:3,class:g(()=>`am-capp__item ${u.value}`)}}}),se=b({newPass:[{required:!0,message:y.value.new_password_required,trigger:"submit"},{min:4,message:y.value.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:y.value.new_password_required,trigger:"submit"},{min:4,message:y.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:y.value.passwords_not_match,trigger:"submit"}]}),Y=b(!1);function j(){Y.value=!1}function te(){E.value.validate(N=>{if(N){G.value="Password changed Successfully";let v=a.getters["auth/getProfile"];a.commit("setLoading",!0),Ce.post("/users/"+k.value+"s/"+v.id,{password:a.getters["auth/getNewPassword"]},De(a)).then(()=>{a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1),Y.value=!0})}else return!1})}ce("changeProfilePassword",te);function ee(){P.value=!1,a.commit("auth/setProfileDeleted",!0),a.dispatch("auth/logout")}function ie(){a.commit("setLoading",!0);let N=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;if(!N)return;let v={email:"",firstName:y.value.customer,lastName:N,phone:"",birthday:"",gender:"",externalId:"",password:""};const C=st().cookies;Ce.post("/users/customers/"+N,Object.assign(De(a),v)).then(()=>{a.commit("auth/setProfile",{}),C.remove("ameliaUserEmail"),a.commit("setLoading",!1),ee()}).catch(B=>{a.commit("setLoading",!1),console.log(B)})}let le=p("amColors"),X=g(()=>({"--am-c-capi-primary":le.value.colorPrimary,"--am-c-capi-text":le.value.colorMainText,"--am-c-capi-text-op10":x(le.value.colorMainText,.1)}));return(N,v)=>{const C=qe,B=Mt,H=zt;return n(),c("div",{ref_key:"pageContainer",ref:l,class:"am-capi",style:ue(e(X))},[e(Y)?(n(),U(Ee,{key:0,type:"success","show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:R,onTriggerClose:R},{title:I(()=>[Rs,de(" "+h(e(G)),1)]),_:1})):L("",!0),Z(H,{modelValue:e(W),"onUpdate:modelValue":v[0]||(v[0]=M=>_e(W)?W.value=M:W=M),class:"am-capi__tabs",onTabClick:j},{default:I(()=>[Z(B,{class:"am-capi__tabs-item",label:e(y).personal_info,name:"first"},{default:I(()=>[e(t)?(n(),U(wt,{key:1,count:5,"page-width":e(i)},null,8,["page-width"])):(n(),c(ae,{key:0},[e(a).getters["auth/getProfile"]?(n(),U(C,{key:0,ref_key:"infoFormRef",ref:Q,model:e(z),rules:e(T),"label-position":"top",class:J(["am-capi__form",e(u)])},{default:I(()=>[(n(!0),c(ae,null,pe(e(w).profile.order,M=>(n(),c(ae,{key:M.id},[!e(f)[M.id]||e(f)[M.id].visibility?(n(),U(Be(e(F)[M.id].template),Ne({key:0,ref_for:!0,ref:"customerCollectorRef",modelValue:e(z)[M.id],"onUpdate:modelValue":me=>e(z)[M.id]=me,countryPhoneIso:e(F)[M.id].countryPhoneIso,"onUpdate:countryPhoneIso":me=>e(F)[M.id].countryPhoneIso=me},e(F)[M.id].props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"])):L("",!0)],64))),128))]),_:1},8,["model","rules","class"])):L("",!0)],64))]),_:1},8,["label"]),Z(B,{class:"am-capi__tabs-item",label:e(y).password_tab,name:"second"},{default:I(()=>[e(t)?(n(),U(wt,{key:1,"item-direction":"column",count:2,"page-width":e(i)},null,8,["page-width"])):(n(),U(C,{key:0,ref_key:"passFormRef",ref:E,model:e(q),rules:e(se),"label-position":"top",class:J(["am-capi__form",e(u)])},{default:I(()=>[(n(!0),c(ae,null,pe(e(ne),(M,me)=>(n(),U(Be(M.template),Ne({key:M.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:e(q)[me],"onUpdate:modelValue":Ae=>e(q)[me]=Ae},M.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])]),_:1},8,["modelValue"]),Z(qs,{visibility:e(P),"customized-labels":V("deleteProfile"),"customized-options":e(w).deleteProfile.options,onClose:v[1]||(v[1]=M=>_e(P)?P.value=!1:P=!1),onDeleteProfile:ie},null,8,["visibility","customized-labels","customized-options"]),Z(Ma,{loading:e(t),display:e(W),"parent-width":e(i),"customized-labels":e(y),"save-footer-button":e(f).saveFooterButton.buttonType,"delete-footer-type":e(f).deleteFooterButton.buttonType,"pass-footer-button":e(f).passFooterButton.buttonType},null,8,["loading","display","parent-width","customized-labels","save-footer-button","delete-footer-type","pass-footer-button"])],4)}}});const Gs={key:0,class:"am-capf__zone"},Qs={class:"am-capf__menu"},Xs={key:2},Ks=o("span",{class:"am-icon-filter"},null,-1),el={key:0},tl={key:0,class:"am-capf__list"},al=["onClick"],sl=o("span",{class:"am-icon-close"},null,-1),ll=[sl],ol={name:"CabinetFilters"},vt=Object.assign(ol,{props:{paramList:{type:[Object,Array],default:()=>[]},stepKey:{type:String,default:""},responsiveClass:{type:String,default:""},empty:{type:Boolean,default:!1}},emits:["changeFilters"],setup(s,{emit:a}){const t=s;let l=xe(),i=g(()=>l.getters.getLoading),d=g(()=>t.stepKey==="packages"?"packagesList":t.stepKey);const m=p("settings");let r=p("amCustomize");const u=p("labels"),_=p("localLanguage");let k=g(()=>m.general.usedLanguages.includes(_.value)),w=g(()=>{let T=ke(be({},u));if(t.stepKey){let P=r.value[d.value].translations;P&&Object.keys(P).forEach($=>{P[$][_.value]&&k.value?T[$]=P[$][_.value]:P[$].default&&(T[$]=P[$].default)})}return T});function O(T){return T==="services"?"service":T==="providers"?"employee":T==="locations"?"locations":T==="packages"?"shipment":T==="events"?"star-outline":""}function S(){a("changeFilters")}let A=p("containerWidth"),D={components:{IconComponent:je},template:'<IconComponent icon="filter"/>'},y=b(!1),V=b({dates:g({get:()=>l.getters["cabinetFilters/getDates"],set:T=>{ia(),l.commit("cabinetFilters/setDates",T),a("changeFilters")}}),services:g({get:()=>l.getters["cabinetFilters/getServices"],set:T=>{l.commit("cabinetFilters/setServices",T)}}),providers:g({get:()=>l.getters["cabinetFilters/getProviders"],set:T=>{l.commit("cabinetFilters/setProviders",T)}}),locations:g({get:()=>l.getters["cabinetFilters/getLocations"],set:T=>{l.commit("cabinetFilters/setLocations",T)}}),packages:g({get:()=>l.getters["cabinetFilters/getPackages"],set:T=>{l.commit("cabinetFilters/setPackages",T)}}),events:g({get:()=>l.getters["cabinetFilters/getEvents"],set:T=>{l.commit("cabinetFilters/setEvents",T)}})}),f=g(()=>t.stepKey==="events"?l.getters["cabinetFilters/getEventFiltersOption"]:t.stepKey==="packages"?l.getters["cabinetFilters/getPackageFilterOptions"]:l.getters["cabinetFilters/getAppointmentFilterOptions"]),W=g(()=>{let T=0;return Object.keys(f.value).forEach(P=>{f.value[P].length>0&&r.value[d.value].options[`${P}Filter`].visibility&&T++}),T});function G(T){let P=T.charAt(0).toUpperCase()+T.slice(1);l.commit(`cabinetFilters/set${P}`,[]),a("changeFilters")}let R=g(()=>r.value[d.value].options),Q=g(()=>t.stepKey==="appointments"?R.value.servicesFilter.visibility||R.value.providersFilter.visibility||R.value.locationsFilter.visibility:t.stepKey==="events"?R.value.eventsFilter.visibility||R.value.providersFilter.visibility||R.value.locationsFilter.visibility:R.value.packagesFilter.visibility||R.value.servicesFilter.visibility||R.value.providersFilter.visibility||R.value.locationsFilter.visibility),K=g(()=>t.stepKey==="appointments"?!!(f.value.services.length||f.value.providers.length||f.value.locations.length):t.stepKey==="events"?!!(f.value.events.length||f.value.providers.length||f.value.locations.length):!!(f.value.packages.length||f.value.services.length||f.value.providers.length||f.value.locations.length)),z=p("amColors"),F=g(()=>({"--am-c-capf-heading-text":z.value.colorMainText,"--am-c-capf-text":z.value.colorInpText,"--am-c-capf-text-op10":x(z.value.colorInpText,.1),"--am-c-select-border":z.value.colorInpBorder,"--am-c-select-bgr":z.value.colorInpBgr}));return(T,P)=>e(i)?L("",!0):(n(),c("div",{key:0,class:"am-capf",style:ue(e(F))},[e(A)<=480&&e(R).timeZone.visibility&&e(t).stepKey!=="packages"?(n(),c("div",Gs,[Z(ct,{size:"small"})])):L("",!0),o("div",Qs,[e(A)<=480&&e(R).timeZone.visibility&&e(t).stepKey==="packages"?(n(),U(ct,{key:0,size:"small"})):L("",!0),e(t).stepKey!=="packages"?(n(),U(Aa,{key:1,modelValue:e(V).dates,"onUpdate:modelValue":P[0]||(P[0]=$=>e(V).dates=$),type:"daterange",editable:!1,size:"small",clearable:!1,format:e(ra)(),style:ue(e(F)),lang:e(_),class:"am-capf__menu-datepicker","popper-class":"am-capf__menu-datepicker-popper","custom-input-display":!0},null,8,["modelValue","format","style","lang"])):L("",!0),!e(t).empty&&e(Q)&&e(K)?(n(),c("div",Xs,[Z(ye,{icon:e(D),"icon-only":e(A)<=700,"custom-class":"am-capf__menu-btn",size:"small",category:"primary",type:e(R).filterBtn?e(R).filterBtn.buttonType:"filled",onClick:P[1]||(P[1]=$=>_e(y)?y.value=!e(y):y=!e(y))},{default:I(()=>[Ks,e(A)>700?(n(),c("span",el,h(e(w).filters),1)):L("",!0)]),_:1},8,["icon","icon-only","type"])])):L("",!0)]),Z(Ie,{name:"am-slide-fade"},{default:I(()=>[e(y)&&!e(t).empty?(n(),c("div",tl,[(n(!0),c(ae,null,pe(Object.keys(e(f)),$=>(n(),c(ae,{key:$},[e(f)[$].length>0&&e(r)[e(d)].options[`${$}Filter`].visibility?(n(),c("span",{key:0,class:J(["am-capf__list-item",[{"am-selected":e(V)[$].length>0},`am-capf__list-item-${e(W)}`,e(t).responsiveClass]])},[Z(Qe,{id:`am-select-${$}`,modelValue:e(V)[$],"onUpdate:modelValue":E=>e(V)[$]=E,multiple:!0,placeholder:e(w)[`${$}_dropdown`],"prefix-icon":O($),"collapse-tags":!0,size:"small","popper-class":"am-filter-select-popper",onChange:S},{default:I(()=>[(n(!0),c(ae,null,pe(e(f)[$],E=>(n(),U(Ge,{key:E.id,value:E.id,label:E.firstName?E.firstName+" "+E.lastName:E.name},null,8,["value","label"]))),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue","placeholder","prefix-icon"]),e(V)[$].length>0?(n(),c("span",{key:0,class:"am-capf__clear",onClick:E=>G($)},ll,8,al)):L("",!0)],2)):L("",!0)],64))),128))])):L("",!0)]),_:1})],4))}});function nl(s,a){let t=s.getters["entities/getService"](a.serviceId),l=0,i=0;return a.bookings.forEach(d=>{if(["approved","pending"].includes(d.status)){let m=d.duration?d.duration:t.duration;m>l&&(l=m);let r=0;d.extras.forEach(u=>{r+=t.extras.find(k=>k.id===u.extraId).duration*u.quantity}),r>i&&(i=r)}}),l+i}function Nt(s,a){for(let t in s)s[t].appointments.forEach(l=>{let i={};l.bookings.forEach(m=>{m.customerId in i||(i[m.customerId]=[]),i[m.customerId][m.id]=m.status});let d={};for(let m in i)for(let r in i[m])(!(m in d)||i[m][r]==="approved"||i[m][r]==="pending")&&(d[m]=r);l.bookings.forEach(m=>{m.customerId in d&&parseInt(m.id)!==parseInt(d[m.customerId])||(a===""&&(l.bookingStart=Je(l.bookingStart),l.bookingEnd=Je(l.bookingEnd)),l.bookings=[m])})});if(a===""){let t={};for(let l in s)s[l].appointments.forEach(i=>{let d=i.bookingStart.split(" ")[0];d in t?t[d].appointments.push(i):t[d]={appointments:[i],date:d}});return t}return s}function Vt(s){let a=[];return s.forEach(t=>{if(["approved","pending"].includes(t.status)&&t.customFields){let l=JSON.parse(t.customFields);Object.keys(l).forEach(i=>{a.push({label:l[i].label,value:l[i].value})})}}),a}function il(s,a){let t=[];return s.forEach(l=>{["approved","pending"].includes(l.status)&&l.extras.forEach(i=>{t.push(Object.assign(i,a.extras.find(d=>d.id===i.extraId)))})}),t}const rl={class:"am-cc__periods-date"},cl={class:"am-cc__periods-time"},ul={key:0,class:"am-cc__periods-link__list"},dl=["href"],pl=o("span",{class:"am-icon-link"},null,-1),ml=["href"],_l=o("span",{class:"am-icon-link"},null,-1),gl=["href"],vl=o("span",{class:"am-icon-link"},null,-1),fl={name:"TemplatePeriods"},bl=Object.assign(fl,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=p("amLabels");let l=p("containerWidth"),i=g(()=>Le(l.value));return(d,m)=>(n(),c("div",{class:J(["am-cc__periods",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,u)=>(n(),c("div",{key:u,class:"am-cc__periods-item"},[o("span",rl,h(e(Fe)(r.date)),1),o("span",cl,h(`${e(Ke)(r.startTime)} - ${e(Ke)(r.endTime)}`),1),r.googleMeetLink||r.zoomLink||r.lessonSpaceLink?(n(),c("div",ul,[r.googleMeetLink?(n(),c("a",{key:0,class:"am-cc__periods-link",href:r.googleMeetLink,target:"_blank"},[pl,de(" "+h(e(t).google_meet_link),1)],8,dl)):L("",!0),r.zoomLink?(n(),c("a",{key:1,class:"am-cc__periods-link",href:r.zoomLink,target:"_blank"},[_l,de(" "+h(e(t).zoom_link),1)],8,ml)):L("",!0),r.lessonSpaceLink?(n(),c("a",{key:2,class:"am-cc__periods-link",href:r.lessonSpaceLink,target:"_blank"},[vl,de(" "+h(e(t).lesson_space_link),1)],8,gl)):L("",!0)])):L("",!0)]))),128))],2))}});const hl={class:"am-cc__extras-name"},yl={key:0,class:"am-cc__extras-duration"},kl={key:1,class:"am-cc__extras-price"},xl={key:2,class:"am-cc__extras-quantity"},Cl={name:"TemplateExtras"},Tl=Object.assign(Cl,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=p("amLabels");let l=p("containerWidth"),i=g(()=>Le(l.value));return(d,m)=>(n(),c("div",{class:J(["am-cc__extras",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,u)=>(n(),c("div",{key:u,class:"am-cc__extras-item"},[o("span",hl,h(r.name),1),r.duration||r.price||r.quantity?(n(),c("div",{key:0,class:J(["am-cc__extras-item__inner",[{"am-flex-space":!r.price&&r.duration},{"am-flex-end":!r.duration}]])},[r.duration?(n(),c("span",yl,h(e(It)(r.duration,e(t).h,e(t).min)),1)):L("",!0),r.price?(n(),c("span",kl,h(e(et)(r.price)),1)):L("",!0),r.quantity?(n(),c("span",xl," x"+h(r.quantity),1)):L("",!0)],2)):L("",!0)]))),128))],2))}});const $l={class:"am-cc__tickets-item_inner"},Pl={class:"am-cc__tickets-name"},Ll={class:"am-cc__tickets-calc"},wl={class:"am-cc__tickets-price"},Sl={name:"TemplateTickets"},Dl=Object.assign(Sl,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=p("amLabels");let l=p("containerWidth"),i=g(()=>Le(l.value));return(d,m)=>(n(),c("div",{class:J(["am-cc__tickets",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,u)=>(n(),c("div",{key:u,class:"am-cc__tickets-item"},[o("div",$l,[o("span",Pl,h(r.name),1),o("span",Ll,h(`${r.persons} ${r.persons>1?e(t).event_tickets:e(t).event_ticket} x ${e(et)(r.price)}`),1)]),o("div",wl,h(e(et)(r.persons*r.price)),1)]))),128))],2))}});const Ol=["innerHTML"],Fl={class:"am-cc__cf-value"},Ml={class:"am-cc__cf-value__inner"},zl={name:"TemplateCustomFields"},Il=Object.assign(zl,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s;let t=p("containerWidth"),l=g(()=>Le(t.value));function i(d){return d?Array.isArray(d)?d.length===0?"/":d.map(m=>typeof m=="object"&&m!==null&&!Array.isArray(m)?m.name||"/":m||"/").join(", "):d:"/"}return(d,m)=>(n(),c("div",{class:J(["am-cc__cf",e(l)])},[(n(!0),c(ae,null,pe(e(a).data,(r,u)=>(n(),c("div",{key:u,class:"am-cc__cf-item"},[o("span",{class:"am-cc__cf-name",innerHTML:r.label},null,8,Ol),o("div",Fl,[o("span",Ml,h(i(r.value)),1)])]))),128))],2))}});const Bl={class:"am-cc__employee-heading"},El={class:"am-cc__employee-heading__inner"},jl={class:"am-cc__employee-name"},Al=["innerHTML"],Nl={key:1,class:"am-cc__employee-wrapper"},Vl={class:"am-cc__employee-heading"},Yl={class:"am-cc__employee-heading__inner"},Wl={class:"am-cc__employee-name"},Ul=["innerHTML"],Zl={name:"TemplateEmployee"},ql=Object.assign(Zl,{props:{data:{type:[Object,Array]}},setup(s){const a=s;let t=g(()=>!Array.isArray(a.data)),l=p("containerWidth"),i=g(()=>Le(l.value));function d(u){let _=u.firstName.charAt(0).toUpperCase(),k=u.lastName.charAt(0).toUpperCase();return`${_}${k}`}function m(u){return u.pictureThumbPath?{backgroundImage:`url(${u.pictureThumbPath})`}:{}}function r(u){return u&&u.includes("<!-- Content -->")?u.slice(16).length:u?u.length:!1}return(u,_)=>(n(),c("div",{class:J(["am-cc__employee",e(i)])},[e(t)?(n(),c(ae,{key:0},[o("div",Bl,[o("span",{class:"am-cc__employee-img",style:ue(m(e(a).data))},[e(a).data.pictureThumbPath?L("",!0):(n(),c(ae,{key:0},[de(h(d(e(a).data)),1)],64))],4),o("div",El,[o("span",jl,h(`${e(a).data.firstName} ${e(a).data.lastName}`),1),e(a).data.badge?(n(),c("span",{key:0,class:"am-cc__employee-badge",style:ue({background:e(a).data.badge.color})},h(e(a).data.badge.content),5)):L("",!0)])]),e(a).data.description?(n(),c("div",{key:0,class:J(["am-cc__employee-desc",{"ql-description":e(a).data.description.includes("<!-- Content -->")}]),innerHTML:e(a).data.description},null,10,Al)):L("",!0)],64)):(n(),c("div",Nl,[(n(!0),c(ae,null,pe(e(a).data,k=>(n(),c(ae,{key:k.id},[o("div",Vl,[o("span",{class:"am-cc__employee-img",style:ue(m(k))},[k.pictureThumbPath?L("",!0):(n(),c(ae,{key:0},[de(h(d(k)),1)],64))],4),o("div",Yl,[o("span",Wl,h(`${k.firstName} ${k.lastName}`),1),k.badge?(n(),c("span",{key:0,class:"am-cc__employee-badge",style:ue({background:k.badge.color})},h(k.badge.content),5)):L("",!0)])]),r(k.description)?(n(),c("div",{key:0,class:J(["am-cc__employee-desc",{"ql-description":k.description.includes("<!-- Content -->")}]),innerHTML:k.description},null,10,Ul)):L("",!0)],64))),128))]))],2))}});const Rl={class:"am-cc__popover-inner"},Hl={key:0,class:"am-cc__popover-heading"},Jl={name:"CollapseCardPopoverTemplate"},Ue=Object.assign(Jl,{props:{headerText:{type:String,default:""},type:{type:String,required:!0},contentData:{type:[Array,Object,String],default:""}},setup(s){const a=s;let t=b({period:he(bl),extras:he(Tl),ticket:he(Dl),customField:he(Il),employee:he(ql)}),l=p("amFonts"),i=p("amColors"),d=g(()=>({"--am-c-cc-primary":i.value.colorPrimary,"--am-c-cc-primary-op70":x(i.value.colorPrimary,.7),"--am-c-cc-success":i.value.colorSuccess,"--am-c-cc-success-op15":x(i.value.colorSuccess,.15),"--am-c-cc-bgr":i.value.colorMainBgr,"--am-c-cc-text":i.value.colorMainText,"--am-c-cc-text-op10":x(i.value.colorMainText,.1),"--am-c-cc-text-op15":x(i.value.colorMainText,.15),"--am-c-cc-text-op70":x(i.value.colorMainText,.7),"--am-c-cc-text-op80":x(i.value.colorMainText,.8),"--am-c-cc-text-op90":x(i.value.colorMainText,.9),"--am-c-scroll-op30":x(i.value.colorPrimary,.3),"--am-c-scroll-op10":x(i.value.colorPrimary,.1),"--am-font-family":l.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(m,r)=>{const u=pt;return n(),U(u,{"show-arrow":!1,persistent:!1,width:"auto","popper-class":"am-cc__popover","popper-style":e(d),trigger:"click"},{reference:I(()=>[Dt(m.$slots,"default")]),default:I(()=>[o("div",Rl,[e(a).headerText?(n(),c("div",Hl,h(e(a).headerText),1)):L("",!0),(n(),U(Be(e(t)[e(a).type]),{class:"am-cc__popover-content",data:e(a).contentData},null,8,["data"]))])]),_:3},8,["popper-style"])}}});function Gl(s){let a=Ot(null,s.coupon,s.tax?s.tax[0]:null,s.price-s.price/100*s.discount,!1);return a.price-a.discount+a.tax}const Ye=ke(window.wpAmeliaLabels);function St(s,a,t,l=null){t.type==="package"&&s.commit("cabinet/setPackageLoading",!0),t.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),t.type==="event"&&s.commit("cabinet/setEventsLoading",!0),s.commit("cabinet/setPaymentLinkLoader",t.bookings?t.bookings[0].id:t.id);let i=JSON.parse(JSON.stringify(t)),d=JSON.parse(JSON.stringify(s.getters["auth/getProfile"]));d.birthday=null,i.customer=d,i.type!=="package"?(i[i.type]=t,i.booking=t.bookings[0],i.paymentId=t.bookings[0].payments[0].id):i=Object.assign(i,i.package),Ce.post("/payments/link",{data:i,paymentMethod:a}).then(m=>{!m.data.data.error&&m.data.data.paymentLink?window.location.href=m.data.data.paymentLink:s.commit("cabinet/setPaymentLinkError",{value:!0,type:t.type})}).catch(m=>{s.commit("cabinet/setPaymentLinkError",{value:!0,type:t.type})}).finally(()=>{s.commit("cabinet/setPaymentLinkLoader",null),t.type==="package"&&s.commit("cabinet/setPackageLoading",!1),t.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),t.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function ut(s,a){if(s.type!=="package"&&(!s.bookings||s.bookings.length===0))return!1;a=JSON.parse(a);let t=a&&"payments"in a&&a.payments&&"paymentLinks"in a.payments&&a.payments.paymentLinks?a.payments.paymentLinks:ze.payments.paymentLinks,l=!1;switch(s.type){case"package":l=!s.end||fe(s.end,"YYYY-MM-DD HH:mm").isAfter(fe());break;case"appointment":l=fe(s.bookingStart,"YYYY-MM-DD HH:mm:ss").isAfter(fe())&&s.bookings[0].payments.length>0;break;case"event":l=fe(s.periods[s.periods.length-1].periodEnd,"YYYY-MM-DD HH:mm:ss").isAfter(fe())&&s.bookings[0].payments.length>0;break}return dt(ze).length&&ze&&t&&t.enabled&&l}function dt(s){typeof s=="string"&&(s=JSON.parse(s));let a=[];return s=s.payments,ze.payments.wc.enabled?a.push({value:"wc",label:Ye.wc}):ze.payments.mollie.enabled&&(!("mollie"in s)||s.mollie.enabled)?a.push({value:"mollie",label:Ye.on_line}):(ze.payments.payPal.enabled&&(!("payPal"in s)||s.payPal.enabled)&&a.push({value:"payPal",label:Ye.pay_pal}),ze.payments.stripe.enabled&&(!("stripe"in s)||s.stripe.enabled)&&a.push({value:"stripe",label:Ye.credit_card}),ze.payments.razorpay.enabled&&(!("razorpay"in s)||s.razorpay.enabled)&&a.push({value:"razorpay",label:Ye.razorpay}),ze.payments.square.enabled&&(!("square"in s)||s.square.enabled)&&a.push({value:"square",label:Ye.square})),a}function He(s,a){switch(a.type){case"appointment":{let t=Bt(s,{price:a.bookings[0].price,persons:a.bookings[0].persons,aggregatedPrice:a.bookings[0].aggregatedPrice,extras:a.bookings[0].extras,serviceId:null,tax:a.bookings[0].tax,coupon:a.bookings[0].coupon},!1);return t.total-t.discount+t.tax>a.bookings[0].payments.filter(l=>l.status!=="refunded"&&l.status!=="pending").reduce((l,i)=>l+i.amount,0)}case"event":return jt(a)>a.bookings[0].payments.filter(t=>t.status!=="refunded"&&t.status!=="pending").reduce((t,l)=>t+l.amount,0);case"package":return Gl(a)>a.payments.filter(t=>t.status!=="refunded"&&t.status!=="pending").reduce((t,l)=>t+l.amount,0)}}const Ql={class:"am-cc__edit"},Xl=["onClick"],Kl={class:"am-cc__edit-text"},eo={name:"PaymentButton"},Yt=Object.assign(eo,{props:{reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},type:{type:String},btnSize:{type:String,default:"mini"},class:{type:String,default:""}},setup(s){const a=s;let t=xe();const l=p("amLabels");let i=g(()=>dt(a.bookable.settings)),d=g(()=>t.getters["cabinet/getPaymentLinkLoader"]),m=Et({components:{IconComponent:je},template:'<IconComponent icon="arrow-down"></IconComponent>'}),r=b(!1);function u(D){D.stopPropagation(),i.value.length===1?St(t,i.value[0].value,a.reservation):r.value=!r.value}function _(){r.value=!1}let k=b(!1);function w(){k.value=!1}let O=p("amFonts"),S=p("amColors"),A=g(()=>({"--am-c-cc-primary":S.value.colorPrimary,"--am-c-cc-primary-op70":x(S.value.colorPrimary,.7),"--am-c-cc-error":S.value.colorError,"--am-c-cc-error-op15":x(S.value.colorError,.15),"--am-c-cc-warning":S.value.colorWarning,"--am-c-cc-warning-op15":x(S.value.colorWarning,.15),"--am-c-cc-success":S.value.colorSuccess,"--am-c-cc-success-op15":x(S.value.colorSuccess,.15),"--am-c-cc-bgr":S.value.colorMainBgr,"--am-c-cc-text":S.value.colorMainText,"--am-c-cc-text-op10":x(S.value.colorMainText,.1),"--am-c-cc-text-op15":x(S.value.colorMainText,.15),"--am-c-cc-text-op70":x(S.value.colorMainText,.7),"--am-c-cc-text-op90":x(S.value.colorMainText,.9),"--am-font-family":O.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(D,y)=>{const V=pt;return e(ut)(e(a).reservation,e(a).bookable.settings)?(n(),U(V,{key:0,ref:"payRef",visible:e(r),"onUpdate:visible":y[0]||(y[0]=f=>_e(r)?r.value=f:r=f),persistent:!1,"show-arrow":!1,"popper-class":"am-cc__popper","popper-style":e(A),trigger:"click"},{reference:I(()=>[Z(ye,{size:e(a).btnSize,type:e(a).type,suffix:e(i).length>1&&e(He)(e(t),e(a).reservation)?e(m):"",class:J([{"am-button-single":e(i).length===1||!e(He)(e(t),e(a).reservation)},e(a).class]),loading:!!e(d),"loading-icon":"loading",disabled:!e(He)(e(t),e(a).reservation),onClick:u},{default:I(()=>[de(h(e(He)(e(t),e(a).reservation)?e(l).pay_now_btn:e(l).paid),1)]),_:1},8,["size","type","suffix","class","loading","disabled"])]),default:I(()=>[tt((n(),c("div",Ql,[(n(!0),c(ae,null,pe(e(dt)(e(a).bookable.settings),f=>tt((n(),c("div",{key:f.value,class:"am-cc__edit-item",onClick:W=>e(St)(e(t),f.value,e(a).reservation)},[o("span",Kl,h(f.label),1)],8,Xl)),[[e(rt),_]])),128))])),[[e(rt),w]])]),_:1},8,["visible","popper-style"])):L("",!0)}}});const to={class:"am-cc__time"},ao={key:0,class:"am-cc__name"},so={key:0,class:"am-cc__name"},lo={class:"am-cc__edit"},oo=o("span",{class:"am-icon-date-time"},null,-1),no={class:"am-cc__edit-text"},io=o("span",{class:"am-icon-clearable"},null,-1),ro={class:"am-cc__edit-text"},co={class:"am-cc__content-inner"},uo={class:"am-cc__data"},po=o("span",{class:"am-icon-user"},null,-1),mo={class:"am-cc__data-text"},_o={key:1,class:"am-cc__data"},go=o("span",{class:"am-icon-payments"},null,-1),vo={class:"am-cc__data-text"},fo={key:2,class:"am-cc__data"},bo=o("span",{class:"am-icon-clock"},null,-1),ho={class:"am-cc__data-text"},yo={class:"am-cc__data"},ko=o("span",{class:"am-icon-clock"},null,-1),xo={class:"am-cc__data-text"},Co={key:4,class:"am-cc__data link"},To=o("span",{class:"am-icon-link"},null,-1),$o=["href"],Po={key:5,class:"am-cc__data link"},Lo=o("span",{class:"am-icon-link"},null,-1),wo=["href"],So={key:6,class:"am-cc__data link"},Do=o("span",{class:"am-icon-link"},null,-1),Oo=["href"],Fo={class:"am-cc__data"},Mo=o("span",{class:"am-icon-border-plus"},null,-1),zo={class:"am-cc__data-text"},Io={class:"am-cc__data"},Bo=o("span",{class:"am-icon-file-text"},null,-1),Eo={class:"am-cc__data-text"},jo={class:"am-cc__data"},Ao=o("span",{class:"am-icon-tickets"},null,-1),No={class:"am-cc__data-text"},Vo=o("span",{class:"am-icon-locations"},null,-1),Yo=["href"],Wo={key:1,class:"am-cc__data-text"},Uo={name:"CollapseCard"},Wt=Object.assign(Uo,{props:{start:{type:[String,Object,Array,Function],required:!0},name:{type:String,default:""},employee:{type:[Object,Array],default:()=>{}},location:{type:[String,Object],default:""},price:{type:Number,default:0},duration:{type:Number,default:0},periods:{type:Array,default:()=>{}},extras:{type:Array,default:()=>{}},tickets:{type:Array,default:()=>{}},customFields:{type:Array,default:()=>[]},googleMeetLink:{type:String,default:""},zoomLink:{type:String,default:""},lessonSpaceLink:{type:String,default:""},reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},booking:{type:Object,default:()=>{}},isPackageBooking:{type:Boolean,default:!1},responsiveClass:{type:String,default:""},parentWidth:{type:Number,default:1200},customizedOptions:{type:Object,required:!0}},emits:["cancelBooking","rescheduling"],setup(s,{emit:a}){const t=s,l=p("settings"),i=p("amLabels");let d=b(!1);function m(A){A.stopPropagation(),d.value=!d.value}function r(){d.value=!1}function u(){a("cancelBooking",t.booking),d.value=!1}function _(){a("rescheduling",t.reservation,t.booking),d.value=!1}function k(A){return Array.isArray(A)?i.value.event_staff:!Array.isArray(A)&&A.rank&&A.rank==="organizer"?i.value.event_organizer:`${t.employee.firstName} ${t.employee.lastName}`}let w=p("amFonts"),O=p("amColors"),S=g(()=>({"--am-c-cc-primary":O.value.colorPrimary,"--am-c-cc-primary-op70":x(O.value.colorPrimary,.7),"--am-c-cc-error":O.value.colorError,"--am-c-cc-error-op15":x(O.value.colorError,.15),"--am-c-cc-warning":O.value.colorWarning,"--am-c-cc-warning-op15":x(O.value.colorWarning,.15),"--am-c-cc-success":O.value.colorSuccess,"--am-c-cc-success-op15":x(O.value.colorSuccess,.15),"--am-c-cc-bgr":O.value.colorMainBgr,"--am-c-cc-text":O.value.colorMainText,"--am-c-cc-text-op03":x(O.value.colorMainText,.03),"--am-c-cc-text-op10":x(O.value.colorMainText,.1),"--am-c-cc-text-op15":x(O.value.colorMainText,.15),"--am-c-cc-text-op70":x(O.value.colorMainText,.7),"--am-c-cc-text-op90":x(O.value.colorMainText,.9),"--am-font-family":w.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(A,D)=>{const y=pt;return n(),c("div",{class:"am-cc",style:ue(e(S))},[Z(ua,null,{default:I(()=>[Z(ca,{"heading-class":"am-cc__heading-wrapper",side:e(t).parentWidth>500},{heading:I(()=>[o("div",{class:J(["am-cc__heading",e(t).responsiveClass])},[o("div",{class:J(["am-cc__heading-info",e(t).responsiveClass])},[o("div",{class:J(["am-cc__heading-info__part",e(t).responsiveClass])},[o("div",to,h(e(t).start),1),e(t).parentWidth>650?(n(),c("div",ao,h(e(t).name),1)):L("",!0),e(t).parentWidth<=650?(n(),c("div",{key:1,class:J(["am-cc__status",`am-cc__status-${e(t).booking.status}`])},h(e(i)[e(t).booking.status]),3)):L("",!0)],2),o("div",{class:J(["am-cc__heading-info__part",e(t).responsiveClass])},[e(t).parentWidth<=650?(n(),c("div",so,h(e(t).name),1)):L("",!0),e(t).parentWidth>650?(n(),c("div",{key:1,class:J(["am-cc__status",`am-cc__status-${e(t).booking.status}`])},h(e(i)[e(t).booking.status]),3)):L("",!0)],2)],2),(e(t).booking.status==="approved"||e(t).booking.status==="pending"||e(t).booking.status==="waiting")&&(!e(t).isPackageBooking&&e(t).booking.price>0&&e(ut)(e(t).reservation,e(t).bookable.settings)||!!(e(t).reservation.cancelable||e(l).roles.allowCustomerReschedule&&e(t).reservation.reschedulable))?(n(),c("div",{key:0,class:J(["am-cc__heading-actions",e(t).responsiveClass])},[e(t).booking.status!=="waiting"&&!e(t).isPackageBooking&&e(t).booking.price>0&&e(ut)(e(t).reservation,e(t).bookable.settings)?(n(),U(Yt,{key:0,reservation:e(t).reservation,bookable:e(t).bookable},null,8,["reservation","bookable"])):L("",!0),e(t).reservation.cancelable||e(l).roles.allowCustomerReschedule&&e(t).reservation.reschedulable?(n(),U(y,{key:1,ref:"editRef",visible:e(d),"onUpdate:visible":D[0]||(D[0]=V=>_e(d)?d.value=V:d=V),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":e(S),trigger:"click"},{reference:I(()=>[e(t).booking?(n(),c("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:m})):L("",!0)]),default:I(()=>[tt((n(),c("div",lo,[e(t).reservation.type==="appointment"&&e(l).roles.allowCustomerReschedule&&e(t).reservation.reschedulable?(n(),c("div",{key:0,class:"am-cc__edit-item",onClick:_},[oo,o("span",no,h(e(i).reschedule),1)])):L("",!0),e(t).reservation.cancelable?(n(),c("div",{key:1,class:"am-cc__edit-item am-delete",onClick:u},[io,o("span",ro,h(e(i).cancel),1)])):L("",!0)])),[[e(rt),r]])]),_:1},8,["visible","popper-style"])):L("",!0)],2)):L("",!0)],2)]),default:I(()=>[o("div",{class:J(["am-cc__content",e(t).responsiveClass])},[o("div",co,[s.customizedOptions.employee.visibility?(n(),c(ae,{key:0},[(Array.isArray(e(t).employee)?e(t).employee.length:Object.keys(e(t).employee).length)?(n(),U(Ue,{key:0,"header-text":Array.isArray(e(t).employee)?e(i).view_employees:e(i).provider_profile,type:"employee","content-data":e(t).employee},{default:I(()=>[o("div",uo,[po,o("span",mo,h(k(e(t).employee)),1)])]),_:1},8,["header-text","content-data"])):L("",!0)],64)):L("",!0),e(t).price&&e(t).customizedOptions.price.visibility?(n(),c("div",_o,[go,o("span",vo,h(e(et)(e(t).price)),1)])):L("",!0),e(t).duration?(n(),c("div",fo,[bo,o("span",ho,h(e(It)(e(t).duration,e(i).h,e(i).min)),1)])):L("",!0),s.periods.length?(n(),U(Ue,{key:3,"header-text":e(i).event_timetable,type:"period","content-data":e(t).periods},{default:I(()=>[o("div",yo,[ko,o("span",xo,h(e(i).event_timetable),1)])]),_:1},8,["header-text","content-data"])):L("",!0),e(t).googleMeetLink?(n(),c("div",Co,[To,o("a",{class:"am-cc__data-text link",href:e(t).googleMeetLink,target:"_blank"},h(e(i).google_meet_link),9,$o)])):L("",!0),e(t).zoomLink?(n(),c("div",Po,[Lo,o("a",{class:"am-cc__data-text link",href:e(t).zoomLink,target:"_blank"},h(e(i).zoom_link),9,wo)])):L("",!0),e(t).lessonSpaceLink?(n(),c("div",So,[Do,o("a",{class:"am-cc__data-text link",href:e(t).lessonSpaceLink,target:"_blank"},h(e(i).lesson_space_link),9,Oo)])):L("",!0),e(t).extras.length?(n(),U(Ue,{key:7,"header-text":`${e(t).extras.length} ${e(i).extras}`,type:"extras","content-data":e(t).extras},{default:I(()=>[o("div",Fo,[Mo,o("span",zo,h(`${e(t).extras.length} ${e(i).extras}`),1)])]),_:1},8,["header-text","content-data"])):L("",!0),e(t).customFields.length?(n(),U(Ue,{key:8,"header-text":e(i).custom_fields,type:"customField","content-data":e(t).customFields},{default:I(()=>[o("div",Io,[Bo,o("span",Eo,h(e(i).custom_fields),1)])]),_:1},8,["header-text","content-data"])):L("",!0),e(t).tickets.length?(n(),U(Ue,{key:9,"header-text":e(i).event_tickets,type:"ticket","content-data":e(t).tickets},{default:I(()=>[o("div",jo,[Ao,o("span",No,h(e(i).event_tickets),1)])]),_:1},8,["header-text","content-data"])):L("",!0),e(t).location?(n(),c("div",{key:10,class:J(["am-cc__data",{link:e(t).location.address}])},[Vo,e(t).location.address?(n(),c("a",{key:0,class:"am-cc__data-text",href:`https://maps.google.com/?q=${e(t).location.address}`,target:"_blank"},h(e(t).location.name),9,Yo)):(n(),c("span",Wo,h(e(t).location.name),1))],2)):L("",!0)])],2)]),_:1},8,["side"])]),_:1})],4)}}});const Zo={class:"am-csd__header"},qo={class:"am-csd__header-text"},Ro=o("span",{class:"am-icon-clearable"},null,-1),Ho={class:"am-csd__footer"},Jo={name:"AppointmentBooking"},Ut=Object.assign(Jo,{props:{visibility:{type:Boolean,default:!1},appointment:{type:Object,default:null},employees:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},slotsParams:{type:Object,default:()=>{}},labels:{type:Object,required:!0},customizedOptions:{type:Object,required:!0}},emits:["close","success","error","employee-selection","location-selection"],setup(s,{emit:a}){const t=s;let l=xe();const i=p("settings");let d=p("amLabels"),m=b(null),r=b(null);$e(()=>t.appointment,re=>{setTimeout(()=>{Q.value++},200);let oe=JSON.parse(JSON.stringify(re));oe&&oe.bookingStart&&(m.value=oe.bookingStart.split(" ")[0],r.value=oe.bookingStart.split(" ")[1].substring(0,5))});let u=b(null),_=b(0),k=p("sidebarCollapsed");window.addEventListener("resize",w);function w(){u.value&&(_.value=u.value.offsetWidth)}$e(k,re=>{re?setTimeout(()=>{O()},1500):setTimeout(()=>{O()},500)});function O(){_.value=u.value.offsetWidth}Oe(()=>{Re(()=>{_.value=u.value.offsetWidth})});let S=g(()=>t.visibility);$e(S,re=>{re&&setTimeout(()=>{_.value=u.value.offsetWidth},300)});let A=g(()=>Le(_.value)),D=b(!1),y=b(null),V=b("");function f(){D.value=!1,V.value=""}let W=b(null),G=g(()=>W.value?W.value.calendarSlotsLoading:!0),R=p("cabinetType"),Q=b(0),K=b(!1),z=b({employee:null,location:null}),F=b(!0),T=b(!0),P=g(()=>t.appointment&&!t.appointment.id&&(t.employees.length||t.locations.length)&&(t.customizedOptions.employee.visibility||t.customizedOptions.location.visibility)&&(F.value||T.value)),$=b(null),E=g(()=>P.value?{employee:[{required:"employee"in t.customizedOptions?t.customizedOptions.employee.required:!1,message:d.value.please_select_employee,trigger:"submit"}],location:[{required:"location"in t.customizedOptions?t.customizedOptions.location.required:!1,message:d.value.please_select_location,trigger:"submit"}]}:{}),q=g(()=>{let re={};return z.value.employee?re.providerIds=[z.value.employee]:"providerIds"in t.slotsParams&&t.slotsParams.providerIds.length&&(re.providerIds=t.slotsParams.providerIds),z.value.location?re.locationId=z.value.location:"locationId"in t.slotsParams&&t.slotsParams.locationId?re.locationId=t.slotsParams.locationId:re.locationId=null,Object.assign({},t.slotsParams,re)});function ne(){$.value&&$.value.clearValidate(),K.value=!0,Q.value++,a("employee-selection",z.value.employee),a("location-selection",z.value.location)}function se(re){z.value.employee=re,ne()}function Y(){P.value&&(z.value.employee=null,z.value.location=null,F.value=!0,T.value=!0,ne()),a("close")}$e(S,re=>{re&&t.employees.length===1&&(z.value.employee=t.employees[0].id,F.value=!1),re&&t.locations.length===1&&(z.value.location=t.locations[0].id,T.value=!1),re&&(t.locations.length===1||t.employees.length===1)&&ne()});let j=b();ce("formWrapper",j);let te=g(()=>l.getters["entities/getService"](t.appointment.serviceId).duration);ce("calendarSlotDuration",te);let ee=b(!0);ce("calendarChangeSideBar",ee);let ie=b(0);ce("calendarServiceDuration",ie);function le(){"id"in t.appointment?N():C()}function X(re){let oe=re?"UTC":l.getters["cabinet/getTimeZone"],ge=m.value+" "+r.value,Ve=null,ve=null;if(re){let yt=Pt(ge);ve=$t(yt),Ve=yt}else Ve=ge;return{utcOffset:ve,bookingStart:Ve,timeZone:oe}}function N(){W.value.calendarSlotsLoading=!0;let re=X(!1);Ze()===l.getters["cabinet/getTimeZone"]&&i.general.showClientTimeZone&&(re.utcOffset=$t(Pt(m.value+" "+r.value))),Ce.post("/bookings/reassign/"+t.appointment.bookings.filter(oe=>oe.status==="approved"||oe.status==="pending")[0].id,re,Object.assign(De(l),{params:{source:"cabinet-"+R.value}})).then(()=>{W.value.calendarSlotsLoading=!1,a("success",{message:d.value.appointment_rescheduled})}).catch(oe=>{W.value.calendarSlotsLoading=!1,oe.response&&(!("data"in oe.response.data)&&"message"in oe.response.data&&(D.value=!0,V.value=oe.response.data.message,setTimeout(function(){Te(j.value,y.value.$el,0,300)},500)),"data"in oe.response&&"data"in oe.response.data&&"cancelBookingUnavailable"in oe.response.data.data&&(D.value=!0,V.value=t.labels.booking_cancel_exception,setTimeout(function(){Te(j.value,y.value.$el,0,300)},500)),"data"in oe.response&&"data"in oe.response.data&&"timeSlotUnavailable"in oe.response.data.data&&oe.response.data.data.timeSlotUnavailable===!0&&(D.value=!0,V.value=t.labels.time_slot_unavailable,setTimeout(function(){Te(j.value,y.value.$el,0,300)},500)),"data"in oe.response&&"data"in oe.response.data&&"rescheduleBookingUnavailable"in oe.response.data.data&&oe.response.data.data.rescheduleBookingUnavailable===!0&&(D.value=!0,V.value=t.labels.booking_reschedule_exception,setTimeout(function(){Te(j.value,y.value.$el,0,300)},500))),a("error")})}function v(){W.value.calendarSlotsLoading=!0;let re=X(i.general.showClientTimeZone&&l.getters["cabinet/getTimeZone"]===Ze()),oe=JSON.parse(JSON.stringify(t.appointment));oe.bookingStart=re.bookingStart,oe.bookings[0].utcOffset=re.utcOffset,oe.bookings[0].timeZone=re.timeZone,oe.providerId=parseInt(B.value),oe.locationId=parseInt(H.value),Ce.post("/bookings",oe,De(l)).then(ge=>{W.value.calendarSlotsLoading=!1,ga(l,ge),a("success",{message:d.value.booking_added_success})}).catch(ge=>{W.value.calendarSlotsLoading=!1,ge.response&&("customerAlreadyBooked"in ge.response.data.data&&ge.response.data.data.customerAlreadyBooked===!0&&(D.value=!0,V.value=t.labels.customer_already_booked_app,setTimeout(function(){Te(j.value,y.value.$el,0,300)},500)),"timeSlotUnavailable"in ge.response.data.data&&ge.response.data.data.timeSlotUnavailable===!0&&(D.value=!0,V.value=t.labels.time_slot_unavailable,setTimeout(function(){Te(j.value,y.value.$el,0,300)},500)),"packageBookingUnavailable"in ge.response.data.data&&ge.response.data.data.packageBookingUnavailable===!0&&(D.value=!0,V.value=t.labels.package_booking_unavailable,setTimeout(function(){Te(j.value,y.value.$el,0,300)},500)),"customerBlocked"in ge.response.data.data&&ge.response.data.data.customerBlocked===!0&&(D.value=!0,V.value=t.labels.customer_blocked,setTimeout(function(){Te(j.value,y.value.$el,0,300)},500))),a("error",ge)})}function C(){P.value?$.value.validate(re=>{re?v():setTimeout(()=>{Te(j.value,$.value.$el,0,300)},200)}):v()}let B=b(null),H=b(null),M=b(null);function me(re,oe){if(M.value=oe,K.value=!1,!t.appointment.bookingStart)return{calendarStartDate:ma(Object.keys(oe))[0],calendarEventSlots:[],calendarEventSlot:null};let ge=t.appointment.bookingStart.split(" ");return{calendarStartDate:ge[0],calendarEventSlots:ge[0]in oe?Object.keys(oe[ge[0]]):[],calendarEventSlot:ge[1].slice(0,5)}}ce("useSlotsCallback",me),ce("useRange",()=>{if(!t.appointment.bookingStart)return{start:null,end:null};let re=t.appointment.bookingStart.split(" ")[0];return{start:fe(re,"YYYY-MM-DD").startOf("month").subtract(6,"days").format("YYYY-MM-DD"),end:fe(re,"YYYY-MM-DD").endOf("month").add(12,"days").format("YYYY-MM-DD")}}),ce("useSelectedDuration",()=>{});function Ae(){let re=Object.keys(M.value[m.value]);re.length&&(B.value=r.value&&M.value[m.value][r.value]?M.value[m.value][r.value][0][0]:M.value[m.value][re[0]][0][0],H.value=r.value&&M.value[m.value][r.value]?M.value[m.value][r.value][0][1]:M.value[m.value][re[0]][0][1])}ce("useBusySlots",()=>[]),ce("useSelectedDate",(re,oe)=>(m.value=oe,t.appointment&&t.appointment.bookingStart&&(r.value=t.appointment.bookingStart.split(" ")[1].substring(0,5)),Ae(),Object.keys(M.value[oe]))),ce("useSelectedTime",(re,oe)=>{r.value=oe.substring(0,5),m.value?Ae():t.appointment&&(m.value=t.appointment.bookingStart.split(" ")[0],Ae())}),ce("useDeselectedDate",()=>{m.value="",r.value="",B.value=null,H.value=null});let qt=p("amFonts"),We=p("amColors"),Rt=g(()=>({"--am-c-csd-text":We.value.colorMainText,"--am-c-csd-bgr":We.value.colorMainBgr,"--am-c-csd-text-op10":x(We.value.colorMainText,.1),"--am-c-scroll-op30":x(We.value.colorPrimary,.3),"--am-c-scroll-op10":x(We.value.colorPrimary,.1),"--am-font-family":qt.value.fontFamily}));return(re,oe)=>{const ge=_a,Ve=qe;return n(),U(at,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__reschedule",style:ue(e(Rt)),position:"center"},{footer:I(()=>[o("div",Ho,[Z(ye,{category:"secondary",size:e(_)<=360?"small":"default",type:e(t).customizedOptions.cancelBtn.buttonType,disabled:e(K)||e(G),onClick:Y},{default:I(()=>[de(h(s.labels.cancel),1)]),_:1},8,["size","type","disabled"]),Z(ye,{size:e(_)<=360?"small":"default",type:e(t).customizedOptions.continueBtn.buttonType,disabled:!!(e(K)||e(G)||!e(m)||!e(r)),onClick:le},{default:I(()=>[de(h(s.labels.continue),1)]),_:1},8,["size","type","disabled"])])]),default:I(()=>[o("div",{ref_key:"popupInnerRef",ref:u,class:"am-csd__inner"},[o("div",Zo,[o("div",qo,h(s.labels.no_selected_slot_requirements),1),o("div",{class:"am-csd__header-btn",onClick:Y},[Z(je,{icon:"close"})])]),o("div",{ref_key:"rescheduleRef",ref:j,class:"am-csd__content"},[e(D)?(n(),U(Ee,{key:0,ref_key:"alertContainer",ref:y,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:f,onTriggerClose:f},{title:I(()=>[Ro,de(" "+h(e(V)),1)]),_:1},512)):L("",!0),e(P)?(n(),U(Ve,{key:1,ref_key:"packageFormRef",ref:$,class:"am-csd__filter-wrapper",rules:e(E),model:e(z),"label-position":"top"},{default:I(()=>[o("div",{class:J(["am-csd__filter am-csd__filter-employee",e(A)])},[e(t).employees.length&&e(F)&&e(t).customizedOptions.employee.visibility?(n(),U(ge,{key:0,class:J([{"am-csd__filter-full":!(e(t).locations.length&&e(T)&&e(t).customizedOptions.location.visibility)},e(A)]),label:`${e(d).package_appointment_employee}:`,prop:"employee"},{default:I(()=>[Z(Qe,{modelValue:e(z).employee,"onUpdate:modelValue":oe[0]||(oe[0]=ve=>e(z).employee=ve),clearable:"",filterable:e(t).customizedOptions.employee.filterable,placeholder:`${e(d).package_select_employee}...`,"fit-input-width":!0,"popper-class":"am-csd__filter-employees",disabled:e(K),onChange:ne},{default:I(()=>[(n(!0),c(ae,null,pe(e(t).employees,ve=>(n(),U(Ge,{key:ve.id,value:ve.id,label:`${ve.firstName} ${ve.lastName}`},{default:I(()=>[Z(da,{identifier:ve.id,label:`${ve.firstName} ${ve.lastName}`,price:0,"image-thumb":ve.pictureThumbPath,description:ve.description,"dialog-title":e(d).employee_information_package,"dialog-button-text":e(d).select_this_employee_package,badge:ve.badge,onClick:se},null,8,["identifier","label","image-thumb","description","dialog-title","dialog-button-text","badge"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):L("",!0),e(t).locations.length&&e(T)&&e(t).customizedOptions.location.visibility?(n(),U(ge,{key:1,class:J([{"am-csd__filter-full":!(e(t).employees.length&&e(F)&&e(t).customizedOptions.employee.visibility)},e(A)]),label:`${e(d).package_appointment_location}:`,prop:"location"},{default:I(()=>[Z(Qe,{modelValue:e(z).location,"onUpdate:modelValue":oe[1]||(oe[1]=ve=>e(z).location=ve),clearable:"",filterable:e(t).customizedOptions.location.filterable,placeholder:`${e(d).package_select_location}...`,"fit-input-width":!0,disabled:e(K),onChange:ne},{default:I(()=>[(n(!0),c(ae,null,pe(e(t).locations,ve=>(n(),U(Ge,{key:ve.id,value:ve.id,label:ve.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):L("",!0)],2)]),_:1},8,["rules","model"])):L("",!0),e(t).appointment!==null?(n(),U(pa,{key:2,id:0,ref_key:"calendarRef",ref:W,"preselect-slot":!1,"load-counter":e(Q),"end-time":e(t).customizedOptions.endTimeVisibility.visibility,"time-zone":e(t).customizedOptions.timeZoneVisibility.visibility,"label-slots-selected":s.labels.date_time_slots_selected,"fetched-slots":null,"service-id":0,date:e(t).appointment&&e(t).appointment.bookingStart?e(t).appointment.bookingStart.split(" ")[0]:"","slots-params":e(q)},null,8,["load-counter","end-time","time-zone","label-slots-selected","date","slots-params"])):L("",!0)],512)],512)]),_:1},8,["visibility","style"])}}});const Go={class:"am-csd__inner"},Qo={class:"am-csd__header"},Xo={class:"am-csd__header-text"},Ko={class:"am-csd__content"},en={class:"am-ccpss__heading"},tn={class:"am-csd__footer"},an={name:"CancelBooking"},ft=Object.assign(an,{props:{visibility:{type:Boolean,required:!0},title:{type:String,default:""},description:{type:String,default:""},closeBtnText:{type:String,required:!0},confirmBtnText:{type:String,required:!0},loading:{type:Boolean,default:!1},count:{type:Number,default:1},customizedOptions:{type:Object,required:!0}},emits:["close","confirm"],setup(s,{emit:a}){const t=s;let l=p("containerWidth"),i=p("amFonts"),d=p("amColors"),m=g(()=>({"--am-c-csd-text":d.value.colorMainText,"--am-c-csd-bgr":d.value.colorMainBgr,"--am-font-family":i.value.fontFamily}));return(r,u)=>{const _=lt,k=ot;return n(),U(at,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__cancel",style:ue(e(m)),position:"center"},{footer:I(()=>[o("div",tn,[Z(ye,{category:"secondary",size:e(l)<=360?"small":"default",type:s.customizedOptions.cancelBtn.buttonType,disabled:s.loading,onClick:u[1]||(u[1]=()=>{a("close")})},{default:I(()=>[de(h(e(t).closeBtnText),1)]),_:1},8,["size","type","disabled"]),Z(ye,{category:"danger",size:e(l)<=360?"small":"default",type:s.customizedOptions.confirmBtn.buttonType,disabled:s.loading,onClick:u[2]||(u[2]=()=>{a("confirm")})},{default:I(()=>[de(h(e(t).confirmBtnText),1)]),_:1},8,["size","type","disabled"])])]),default:I(()=>[o("div",Go,[s.loading?(n(),U(k,{key:1,animated:"",class:"am-ccpss"},{template:I(()=>[o("div",en,[Z(_,{variant:"rect"})]),(n(!0),c(ae,null,pe(new Array(e(t).count),w=>(n(),c("div",{key:w,class:"am-ccpss__text"},[Z(_,{variant:"rect"})]))),128))]),_:1})):(n(),c(ae,{key:0},[o("div",Qo,[o("div",Xo,h(e(t).title),1),o("div",{class:"am-csd__header-btn",onClick:u[0]||(u[0]=()=>{a("close")})},[Z(je,{icon:"close"})])]),o("div",Ko,[o("p",null,h(e(t).description),1)])],64))])]),_:1},8,["visibility","style"])}}});const sn={name:"CabinetAppointmentsList"},Zt=Object.assign(sn,{props:{groupedAppointments:{type:Object,default:null},responsiveClass:{type:String,default:""},pageWidth:{type:Number},isPackageBooking:{type:Boolean,default:!1},stepKey:{type:String,required:!0}},emits:["booked","canceled"],setup(s,{emit:a}){const t=s;let l=xe();const i=p("settings");let d=p("amLabels"),m=p("cabinetType"),r=b(null),u=b(null),_=b(null);function k(z=null){u.value=null,a("booked",z)}let w=b(!1);function O(){w.value=!0,Ce.post("/bookings/cancel/"+r.value.id,{type:"appointment"},Object.assign(De(l),{params:{source:"cabinet-"+m.value}})).then(()=>{r.value=null,a("canceled",{message:d.value.appointment_canceled})}).catch(z=>{console.log(z)}).finally(()=>{w.value=!1})}function S(z){let F=Bt(l,{price:z.bookings[0].price,persons:z.bookings[0].persons,aggregatedPrice:z.bookings[0].aggregatedPrice,extras:z.bookings[0].extras,tax:z.bookings[0].tax,coupon:z.bookings[0].coupon},!1);return F.total-F.discount+F.tax}function A(z){let F=[],T=0,P=z;P.bookings.forEach(E=>{E.extras.forEach(q=>{F.push({id:q.extraId,quantity:q.quantity})}),"duration"in E&&E.duration&&E.duration>T&&(E.status==="approved"||E.status==="pending")&&(T=E.duration)});let $={serviceId:P.serviceId,serviceDuration:T||null,locationId:P.locationId,providerIds:[P.providerId],extras:JSON.stringify(F),excludeAppointmentId:P.isGroup?null:P.id,group:1,timeZone:l.getters["cabinet/getTimeZone"],page:"cabinet"};u.value=z,_.value=$}function D(z){return l.getters["entities/getEmployee"](z)}let y=p("amCustomize");const V=p("labels"),f=p("localLanguage");let W=g(()=>i.general.usedLanguages.includes(f.value));function G(z){let F=ke(be({},V)),T=y.value[z].translations;return T&&Object.keys(T).forEach(P=>{T[P][f.value]&&W.value?F[P]=T[P][f.value]:T[P].default&&(F[P]=T[P].default)}),F}function R(z){return y.value[z].options}let Q=p("amColors"),K=g(()=>({"--am-c-capa-bgr":Q.value.colorMainBgr,"--am-c-capa-text":Q.value.colorMainText,"--am-c-capa-text-op70":x(Q.value.colorMainText,.7),"--am-c-capa-text-op25":x(Q.value.colorMainText,.25),"--am-c-capa-primary":Q.value.colorPrimary}));return(z,F)=>(n(),c(ae,null,[o("div",{class:J(["am-capa__wrapper",[{"am-no-border":e(t).groupedAppointments&&Object.keys(e(t).groupedAppointments).length===1},e(t).responsiveClass]]),style:ue(e(K))},[(n(!0),c(ae,null,pe(e(t).groupedAppointments,(T,P)=>(n(),c("div",{key:P,class:"am-capa"},[o("div",{class:J(["am-capa__date",[{"am-today":e(Fe)(P)===e(Fe)(e(Ta)().format("YYYY-MM-DD"))},{"am-no-flag":e(t).groupedAppointments&&Object.keys(e(t).groupedAppointments).length===1},e(t).responsiveClass]])},h(e(Fe)(P)),3),(n(!0),c(ae,null,pe(T.appointments,($,E)=>(n(),c(ae,{key:E},[e(l).getters["entities/getService"]($.serviceId)?(n(),U(Wt,{key:0,start:e(Ke)($.bookingStart.split(" ")[1].slice(0,5)),name:e(l).getters["entities/getService"]($.serviceId).name,employee:D($.provider.id),price:S($),duration:e(nl)(e(l),$),periods:[],extras:e(il)($.bookings,e(l).getters["entities/getService"]($.serviceId)),tickets:[],"custom-fields":e(Vt)($.bookings),location:$.locationId?e(l).getters["entities/getLocation"]($.locationId):null,"google-meet-link":$.googleMeetUrl,"zoom-link":$.zoomMeeting?$.zoomMeeting.joinUrl:"","lesson-space-link":$.lessonSpace,bookable:$.service,reservation:$,booking:$.bookings[0],"is-package-booking":e(t).isPackageBooking,"responsive-class":e(t).responsiveClass,"parent-width":e(t).pageWidth,"customized-options":R(e(t).stepKey),onCancelBooking:F[0]||(F[0]=q=>{_e(r)?r.value=q:r=q}),onRescheduling:A},null,8,["start","name","employee","price","duration","extras","custom-fields","location","google-meet-link","zoom-link","lesson-space-link","bookable","reservation","booking","is-package-booking","responsive-class","parent-width","customized-options"])):L("",!0)],64))),128))]))),128))],6),Z(ft,{visibility:e(r)!==null,title:G("cancelAppointment").cancel_appointment,description:G("cancelAppointment").confirm_cancel_appointment,"close-btn-text":G("cancelAppointment").close,"confirm-btn-text":G("cancelAppointment").confirm,"customized-options":R("cancelAppointment"),loading:e(w),onClose:F[1]||(F[1]=T=>_e(r)?r.value=null:r=null),onConfirm:O},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"]),Z(Ut,{visibility:e(u)!==null,appointment:e(u),"slots-params":e(_),labels:G("rescheduleAppointment"),"customized-options":R("rescheduleAppointment"),onClose:F[2]||(F[2]=T=>_e(u)?u.value=null:u=null),onSuccess:k,onError:F[3]||(F[3]=()=>{})},null,8,["visibility","appointment","slots-params","labels","customized-options"])],64))}});const ln={key:0,class:"el-skeleton-item-wrapper-title"},on={name:"AuthSkeleton"},bt=Object.assign(on,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(s){const a=s;return(t,l)=>{const i=lt,d=ot;return n(),U(d,{animated:"",class:J(["am-asi-el-skeleton",[{"am-asi":e(a).mainClass}]])},{template:I(()=>[e(a).centerFirst?(n(),c("div",ln,[Z(i,{variant:"rect"})])):L("",!0),(n(!0),c(ae,null,pe(new Array(e(a).count),m=>(n(),c("div",{key:m,class:"el-skeleton-item-wrapper"},[Z(i,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const nn={class:"am-ces__img-holder"},rn={width:"240",height:"195",viewBox:"0 0 240 195",fill:"none",xmlns:"http://www.w3.org/2000/svg"},cn={"clip-path":"url(#clip0_1811_81872)"},un=["fill"],dn=["fill"],pn=["fill"],mn=["fill"],_n=["fill"],gn=["fill"],vn=["fill"],fn={opacity:"0.5"},bn=["fill"],hn=["fill"],yn=["fill"],kn=["fill"],xn=["fill"],Cn=["stroke"],Tn={opacity:"0.5"},$n=["stroke"],Pn=va('<circle cx="109.964" cy="55.167" r="34.0723" transform="rotate(-45 109.964 55.167)" fill="url(#paint0_linear_1811_81872)" fill-opacity="0.7"></circle><mask id="mask0_1811_81872" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="75" y="21" width="69" height="69"><circle cx="109.714" cy="55.167" r="34.0723" transform="rotate(-45 109.714 55.167)" fill="url(#paint1_linear_1811_81872)"></circle></mask><g mask="url(#mask0_1811_81872)"><rect x="111.095" y="4.51782" width="10.0968" height="107.245" transform="rotate(30 111.095 4.51782)" fill="url(#paint2_linear_1811_81872)" fill-opacity="0.6"></rect><rect x="125.427" y="2.67041" width="3.39099" height="107.245" transform="rotate(30 125.427 2.67041)" fill="url(#paint3_linear_1811_81872)" fill-opacity="0.6"></rect></g>',3),Ln={id:"paint0_linear_1811_81872",x1:"144.037",y1:"91.6409",x2:"83.5731",y2:"31.1781",gradientUnits:"userSpaceOnUse"},wn=["stop-color"],Sn=["stop-color"],Dn={id:"paint1_linear_1811_81872",x1:"143.786",y1:"91.6409",x2:"83.3226",y2:"31.1781",gradientUnits:"userSpaceOnUse"},On=["stop-color"],Fn=["stop-color"],Mn={id:"paint2_linear_1811_81872",x1:"116.144",y1:"4.51782",x2:"116.144",y2:"111.763",gradientUnits:"userSpaceOnUse"},zn=["stop-color"],In=["stop-color"],Bn={id:"paint3_linear_1811_81872",x1:"127.122",y1:"2.67041",x2:"127.122",y2:"109.915",gradientUnits:"userSpaceOnUse"},En=["stop-color"],jn=["stop-color"],An={id:"clip0_1811_81872"},Nn=["fill"],Vn={class:"am-ces__content"},Yn={class:"am-ces__heading"},Wn={class:"am-ces__text"},ht={props:{heading:{type:String,default:""},text:{type:String,default:""}},setup(s){const a=s;let t=p("amColors"),l=g(()=>({"--am-c-ces-text":t.value.colorMainText,"--am-c-ces-text-op70":x(t.value.colorMainText,.7)}));return(i,d)=>(n(),c("div",{class:"am-ces",style:ue(e(l))},[o("div",nn,[(n(),c("svg",rn,[o("g",cn,[o("path",{d:"M10.0934 144.996C11.624 145.051 13.0595 145.879 14.0693 147.034C15.0791 148.184 15.6995 149.633 16.0934 151.114C16.8587 153.976 16.3878 157.359 15.5727 160.207C12.4708 159.097 10.5599 155.792 9.69496 154.053C8.32741 151.304 7.5259 145.513 10.0889 144.996",fill:e(t).colorMainText},null,8,un),o("path",{d:"M20.033 163.676C19.0549 162.272 19.0322 160.32 19.8066 158.79C20.5809 157.264 22.0662 156.163 23.7009 155.661C24.4571 155.43 25.3356 155.33 25.9922 155.769C26.6081 156.181 26.8752 156.987 26.7937 157.721C26.7122 158.455 26.3409 159.129 25.9017 159.723C24.3937 161.765 22.5598 163.463 20.033 163.671",fill:e(t).colorMainText},null,8,dn),o("path",{d:"M20.3771 173.244C20.3771 173.244 20.3137 173.036 20.2367 172.651C20.1552 172.225 20.0465 171.677 19.9198 171.021C19.6752 169.649 19.2858 167.697 19.5801 165.541C19.8609 163.395 20.7167 161.557 21.6133 160.461C22.0526 159.908 22.4782 159.514 22.7907 159.274C22.9401 159.148 23.076 159.071 23.1575 159.007C23.2435 158.948 23.2933 158.921 23.2979 158.93C23.3296 158.966 22.5733 159.437 21.7356 160.556C20.8888 161.656 20.0737 163.458 19.793 165.573C19.5032 167.688 19.8609 169.621 20.0692 170.998C20.1779 171.691 20.2684 172.252 20.3228 172.642C20.3726 173.031 20.3952 173.249 20.3771 173.249V173.244Z",fill:e(t).colorMainText},null,8,pn),o("path",{d:"M11.0894 149.357C11.0894 149.357 11.1392 149.434 11.2161 149.593C11.2977 149.769 11.4063 150 11.5377 150.281C11.8094 150.883 12.1988 151.757 12.6652 152.839C13.598 155.009 14.8478 158.024 16.152 161.38C17.4561 164.74 18.5656 167.81 19.3354 170.038C19.7203 171.152 20.0282 172.058 20.232 172.687C20.3271 172.986 20.4041 173.226 20.4629 173.412C20.5128 173.579 20.5354 173.665 20.5309 173.67C20.5263 173.674 20.4856 173.588 20.4222 173.425C20.3543 173.239 20.2637 173.004 20.155 172.714C19.9195 172.071 19.5935 171.179 19.195 170.088C18.3845 167.869 17.2524 164.812 15.9528 161.452C14.6486 158.097 13.426 155.076 12.5294 152.894C12.0901 151.821 11.7278 150.942 11.4652 150.308C11.3475 150.018 11.2569 149.783 11.1844 149.602C11.1211 149.439 11.0939 149.353 11.0984 149.348L11.0894 149.357Z",fill:e(t).colorMainText},null,8,mn),o("path",{d:"M16.6956 166.913C14.8662 163.802 11.4564 161.683 7.85639 161.421C6.94167 161.353 5.83676 161.507 5.42922 162.331C5.02167 163.155 5.56507 164.128 6.18997 164.808C8.78922 167.62 13.1817 168.602 16.7273 167.162",fill:e(t).colorMainText},null,8,_n),o("path",{d:"M9.25113 163.875C9.25113 163.875 9.4549 163.87 9.82622 163.897C10.0119 163.911 10.2383 163.925 10.4964 163.974C10.7545 164.024 11.0534 164.051 11.3749 164.137C11.6964 164.214 12.0541 164.296 12.4209 164.427C12.7968 164.536 13.1817 164.699 13.5847 164.871C14.3817 165.233 15.233 165.709 16.0391 166.325C16.8406 166.95 17.5153 167.647 18.0677 168.331C18.3304 168.679 18.584 169.014 18.7832 169.354C19.0006 169.68 19.1636 170.006 19.313 170.3C19.476 170.59 19.5711 170.876 19.6798 171.116C19.7885 171.356 19.8519 171.573 19.9062 171.75C20.0149 172.103 20.0692 172.297 20.0557 172.302C20.0104 172.32 19.7885 171.528 19.1772 170.368C19.0187 170.083 18.8511 169.766 18.6292 169.449C18.43 169.119 18.1764 168.797 17.9092 168.457C17.3613 167.792 16.6911 167.113 15.9032 166.497C15.1108 165.89 14.2821 165.419 13.4987 165.052C13.1047 164.88 12.7243 164.713 12.3575 164.599C11.9998 164.463 11.6511 164.377 11.3341 164.287C10.0617 163.965 9.24207 163.92 9.2466 163.875H9.25113Z",fill:e(t).colorMainText},null,8,gn),o("path",{d:"M91.9065 80.3956L75.8945 162.72L73.7979 173.497L180.693 172.972C185.488 172.95 189.74 168.688 191.285 162.362L210.24 84.6386C211.413 79.8341 208.841 74.8394 205.2 74.8394L97.0099 74.9526C94.619 74.9526 92.5314 77.185 91.9065 80.3956Z",fill:e(t).colorMainBgr},null,8,vn),o("g",fn,[o("path",{d:"M91.9065 80.3951L75.8945 162.72L73.7979 173.497L180.693 172.972C185.488 172.949 189.74 168.688 191.285 162.362L210.24 84.6381C211.413 79.8336 208.841 74.8389 205.2 74.8389L97.0099 74.9521C94.619 74.9521 92.5314 77.1845 91.9065 80.3951Z",fill:e(t).colorMainText},null,8,bn)]),o("path",{d:"M170.441 157.146L159.125 65.9412C158.663 62.2053 155.683 59.4159 152.169 59.4295L127.35 59.511C125.511 59.5155 123.75 60.2989 122.445 61.6846L110.663 74.2099L41.6378 74.5721C37.422 74.5948 34.1797 78.5842 34.7367 83.0718L45.2469 167.366C45.7133 171.097 48.6839 173.882 52.1933 173.873L172.488 173.638C185.887 173.914 187.164 169.961 187.164 169.961C171.808 173.362 170.441 157.159 170.441 157.15V157.146Z",fill:e(t).colorMainText},null,8,hn),o("rect",{x:"130.984",y:"80.0801",width:"5.5062",height:"25.0888",rx:"2.7531",transform:"rotate(-45 130.984 80.0801)",fill:e(t).colorMainBgr},null,8,yn),o("path",{d:"M147.845 104.347C142.496 98.9978 142.496 90.3249 147.845 84.9756C148.737 84.084 150.182 84.084 151.074 84.9756L178.063 111.965C181.183 115.085 181.183 120.144 178.063 123.265C174.942 126.385 169.883 126.385 166.763 123.265L147.845 104.347Z",fill:e(t).colorMainBgr},null,8,kn),o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M151.42 91.7928C151.138 91.5115 150.682 91.5115 150.401 91.7928C150.12 92.0741 150.12 92.5303 150.401 92.8116L161.801 104.212C162.083 104.493 162.539 104.493 162.82 104.212C163.101 103.931 163.101 103.474 162.82 103.193L151.42 91.7928ZM165.702 105.806C165.42 105.524 164.964 105.524 164.683 105.806C164.402 106.087 164.402 106.543 164.683 106.825L165.11 107.252C165.391 107.533 165.847 107.533 166.129 107.252C166.41 106.97 166.41 106.514 166.129 106.233L165.702 105.806Z",fill:e(t).colorMainText},null,8,xn),o("circle",{cx:"109.964",cy:"55.167",r:"37.6805",transform:"rotate(-45 109.964 55.167)",stroke:e(t).colorMainText,"stroke-width":"8"},null,8,Cn),o("g",Tn,[o("circle",{cx:"109.964",cy:"55.167",r:"37.6805",transform:"rotate(-45 109.964 55.167)",stroke:e(t).colorMainBgr,"stroke-width":"8"},null,8,$n)]),Pn]),o("defs",null,[o("linearGradient",Ln,[o("stop",{"stop-color":e(t).colorMainBgr},null,8,wn),o("stop",{offset:"1","stop-color":e(t).colorMainBgr},null,8,Sn)]),o("linearGradient",Dn,[o("stop",{"stop-color":e(t).colorMainBgr},null,8,On),o("stop",{offset:"1","stop-color":e(t).colorMainBgr},null,8,Fn)]),o("linearGradient",Mn,[o("stop",{"stop-color":e(t).colorMainText},null,8,zn),o("stop",{offset:"1","stop-color":e(t).colorMainText,"stop-opacity":"0"},null,8,In)]),o("linearGradient",Bn,[o("stop",{"stop-color":e(t).colorMainText},null,8,En),o("stop",{offset:"1","stop-color":e(t).colorMainText,"stop-opacity":"0"},null,8,jn)]),o("clipPath",An,[o("rect",{width:"240",height:"194.717",fill:e(t).colorMainText},null,8,Nn)])])]))]),o("div",Vn,[o("div",Yn,h(e(a).heading),1),o("div",Wn,h(e(a).text),1)])],4))}};const Un=o("span",{class:"am-icon-checkmark-circle-full"},null,-1),Zn={name:"CabinetAppointments",key:"appointments"},qn=Object.assign(Zn,{props:{loadBookingsCounter:{type:Number,default:0},appointments:{type:Object,default:null}},setup(s){const a=s;let t=xe();const l=p("settings");let i=p("amCustomize");const d=p("labels"),m=p("localLanguage");let r=g(()=>l.general.usedLanguages.includes(m.value)),u=g(()=>{let F=ke(be({},d)),T=i.value.appointments.translations;return T&&Object.keys(T).forEach(P=>{T[P][m.value]&&r.value?F[P]=T[P][m.value]:T[P].default&&(F[P]=T[P].default)}),F});ce("amLabels",u);let _=b(null),k=b(0),w=p("sidebarCollapsed");window.addEventListener("resize",O);function O(){_.value&&(k.value=_.value.offsetWidth)}$e(w,F=>{F?setTimeout(()=>{S()},1500):setTimeout(()=>{S()},500)});function S(){k.value=_.value.offsetWidth}Oe(()=>{Re(()=>{k.value=_.value.offsetWidth})});let A=g(()=>Le(k.value)),D=b(!1),y=b(null),V=b(!1),f=b("success"),W=b("");function G(){V.value=!1,t.commit("cabinet/setPaymentLinkError",{value:!1,type:"appointment"})}let R=p("cabinetType");t.commit("cabinetFilters/setDates",mt(R.value));let Q=g(()=>t.getters["cabinet/getAppointmentsLoading"]),K=b(null);function z(F=null){t.commit("cabinet/setAppointmentsLoading",!0);let T=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getAppointmentsFilters"])),P=t.getters["cabinet/getTimeZone"];T.dates=T.dates.map($=>fe($).format("YYYY-MM-DD")),T.timeZone=P,T.source="cabinet-"+R.value,Ce.get("/appointments",_t(Object.assign(De(t),{params:T}))).then($=>{K.value=Nt($.data.data.appointments,P);let E=!(T.services.length||T.providers.length||T.locations.length);if(D.value=(!K.value||Object.values(K.value).length===0)&&E,K.value&&Object.values(K.value).length>0&&E){let q=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.serviceId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectServiceOptions",q);let ne=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.providerId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectProviderOptions",ne);let se=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.locationId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectLocationOptions",se)}}).catch($=>{console.log($)}).finally(()=>{t.commit("cabinet/setAppointmentsLoading",!1),F&&"message"in F&&(V.value=!0,W.value=F.message,_.value&&y.value&&setTimeout(function(){Te(_.value,y.value.$el,0,300)},500))})}return $e(()=>a.loadBookingsCounter,()=>{z()}),Oe(()=>{z()}),(F,T)=>(n(),c("div",{ref_key:"pageContainer",ref:_,class:"am-cap"},[e(V)?(n(),U(Ee,{key:0,ref_key:"alertContainer",ref:y,type:e(f),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:G,onTriggerClose:G},{title:I(()=>[Un,de(" "+h(e(W)),1)]),_:1},8,["type"])):L("",!0),Z(vt,{"step-key":"appointments","responsive-class":e(A),empty:e(D),onChangeFilters:z},null,8,["responsive-class","empty"]),e(Q)?(n(),U(bt,{key:2})):(n(),c(ae,{key:1},[e(K)&&Object.keys(e(K)).length>0?(n(),U(Zt,{key:0,"grouped-appointments":e(K),"page-width":e(k),"responsive-class":e(A),"step-key":"appointments",onCanceled:z,onBooked:z},null,8,["grouped-appointments","page-width","responsive-class"])):(n(),U(ht,{key:1,heading:e(u).no_app_found,text:e(u).have_no_app},null,8,["heading","text"]))],64))],512))}});const Rn=o("span",{class:"am-icon-checkmark-circle-full"},null,-1),Hn={name:"CabinetEvents",key:"events"},Jn=Object.assign(Hn,{props:{loadBookingsCounter:{type:Number,default:0}},setup(s){const a=s;let t=xe(),l=b(null),i=b(0),d=p("sidebarCollapsed");window.addEventListener("resize",m);function m(){l.value&&(i.value=l.value.offsetWidth)}$e(d,Y=>{Y?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=l.value.offsetWidth}Oe(()=>{Re(()=>{i.value=l.value.offsetWidth})});let u=g(()=>Le(i.value));const _=p("settings");let k=p("amCustomize");const w=p("labels"),O=p("localLanguage");let S=g(()=>_.general.usedLanguages.includes(O.value)),A=g(()=>{let Y=ke(be({},w)),j=k.value.events.translations;return j&&Object.keys(j).forEach(te=>{j[te][O.value]&&S.value?Y[te]=j[te][O.value]:j[te].default&&(Y[te]=j[te].default)}),Y});ce("amLabels",A);let D=b(null),y=b(!1),V=b("success"),f=b("");function W(){y.value=!1,t.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}function G(Y){let j=ke(be({},w)),te=k.value[Y].translations;return te&&Object.keys(te).forEach(ee=>{te[ee][O.value]&&S.value?j[ee]=te[ee][O.value]:te[ee].default&&(j[ee]=te[ee].default)}),j}function R(Y){return k.value[Y].options}let Q=p("cabinetType");t.commit("cabinetFilters/setDates",mt(Q.value));let K=g(()=>t.getters["cabinet/getEventsLoading"]),z=b(!1),F=b(null),T=b(null);function P(){F.value=null,t.commit("cabinet/setEventsLoading",!0);let Y=t.getters["cabinet/getTimeZone"],j=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getEventsFilters"]));j.dates=j.dates.map(te=>fe(te).format("YYYY-MM-DD")),j.timeZone=Y,j.source="cabinet-"+Q.value,j.id=j.events,Ce.get("/events",_t(Object.assign(De(t),{params:j}))).then(te=>{t.commit("eventEntities/setEvents",te.data.data.events),T.value=Na(te.data.data.events,t.getters["cabinet/getTimeZone"],t);let ee=!(j.events.length||j.providers.length||j.locations.length);if(z.value=(!T.value||Object.values(T.value).length===0)&&ee,T.value&&Object.values(T.value).length>0&&ee){t.dispatch("cabinetFilters/injectEventsOptions");let ie=Object.values(T.value).map(X=>X.events.map(N=>N.organizerId)).flat().concat(Object.values(T.value).map(X=>X.events.map(N=>N.providers).flat().map(N=>N.id)).flat()).filter((X,N,v)=>v.indexOf(X)===N);t.dispatch("cabinetFilters/injectProviderOptions",ie);let le=Object.values(T.value).map(X=>X.events.map(N=>N.locationId)).flat().filter((X,N,v)=>v.indexOf(X)===N);t.dispatch("cabinetFilters/injectLocationOptions",le)}}).catch(te=>{console.log(te)}).finally(()=>{t.commit("cabinet/setEventsLoading",!1)})}let $=b(!1);function E(){$.value=!0,Ce.post("/bookings/cancel/"+F.value.id,{type:"event",source:"cabinet-"+Q.value},Object.assign(De(t),{params:{source:"cabinet-"+Q.value}})).then(()=>{F.value=null,P(),y.value=!0,f.value=A.value.event_canceled,l.value&&D.value&&setTimeout(function(){Te(l.value,D.value.$el,0,300)},500)}).catch(Y=>{!("data"in Y.response.data)&&"message"in Y.response.data&&(y.value=!0,f.value=Y.response.data.message,l.value&&D.value&&setTimeout(function(){Te(l.value,D.value.$el,0,300)},500))}).finally(()=>{$.value=!1})}$e(()=>a.loadBookingsCounter,()=>{P()}),Oe(()=>{P()});function q(Y){let j=[],te=t.getters["entities/getEmployees"];if(Y.organizerId&&te.find(ee=>ee.id===Y.organizerId)){let ee=Ct(be({},te.find(ie=>ie.id===Y.organizerId)),{rank:"organizer"});if(!Y.providers.length)return ee;j.push(ee)}return Y.providers.length&&Y.providers.forEach(ee=>{ee.id!==Y.organizerId&&te.find(ie=>ie.id===ee.id)&&j.push(te.find(ie=>ie.id===ee.id))}),j}let ne=p("amColors"),se=g(()=>({"--am-c-cape-bgr":ne.value.colorMainBgr,"--am-c-cape-text":ne.value.colorMainText,"--am-c-cape-text-op70":x(ne.value.colorMainText,.7),"--am-c-cape-text-op25":x(ne.value.colorMainText,.25),"--am-c-cape-primary":ne.value.colorPrimary}));return(Y,j)=>(n(),c("div",{ref_key:"pageContainer",ref:l,class:"am-cap",style:ue(e(se))},[e(y)?(n(),U(Ee,{key:0,ref_key:"alertContainer",ref:D,type:e(V),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:W,onTriggerClose:W},{title:I(()=>[Rn,de(" "+h(e(f)),1)]),_:1},8,["type"])):L("",!0),Z(vt,{"step-key":"events",empty:e(z),"responsive-class":e(u),onChangeFilters:P},null,8,["empty","responsive-class"]),e(K)?(n(),U(bt,{key:2})):(n(),c(ae,{key:1},[e(T)&&Object.keys(e(T)).length>0?(n(),c("div",{key:0,class:J(["am-cape__wrapper",[{"am-no-border":e(T)&&Object.keys(e(T)).length===1},e(u)]])},[(n(!0),c(ae,null,pe(e(T),(te,ee)=>(n(),c("div",{key:ee,class:"am-cape"},[o("div",{class:J(["am-cape__date",[{"am-today":e(Fe)(ee)===e(Fe)(e(fe)().format("YYYY-MM-DD"))},{"am-no-flag":e(T)&&Object.keys(e(T)).length===1},e(u)]])},h(e(Fe)(ee)),3),(n(!0),c(ae,null,pe(te.events,(ie,le)=>(n(),U(Wt,{key:le,start:e(Ke)(ie.periods[0].periodStart.split(" ")[1].slice(0,5)),name:ie.name,employee:q(ie),price:e(jt)(ie),duration:null,periods:(Y.periods=e(Va)(ie.periods))?Y.periods:[],extras:[],tickets:e(Ya)(ie),"custom-fields":e(Vt)(ie.bookings),location:e(Wa)(e(t),ie),"google-meet-link":ie.periods.length===1&&ie.periods[0].googleMeetUrl?ie.periods[0].googleMeetUrl:"","zoom-link":ie.periods.length===1&&ie.periods[0].zoomMeeting?ie.periods[0].zoomMeeting.joinUrl:"","lesson-space-link":ie.periods.length===1&&ie.periods[0].lessonSpace?ie.periods[0].lessonSpace:"",bookable:ie,reservation:ie,booking:ie.bookings[0],"responsive-class":e(u),"parent-width":e(i),"customized-options":R("events"),onCancelBooking:j[0]||(j[0]=X=>{_e(F)?F.value=X:F=X})},null,8,["start","name","employee","price","periods","tickets","custom-fields","location","google-meet-link","zoom-link","lesson-space-link","bookable","reservation","booking","responsive-class","parent-width","customized-options"]))),128))]))),128))],2)):L("",!0),e(T)===null||Object.keys(e(T)).length===0?(n(),U(ht,{key:1,heading:e(A).no_evt_found,text:e(A).have_no_evt},null,8,["heading","text"])):L("",!0),Z(ft,{visibility:e(F)!==null,title:G("cancelEvent").cancel_event,description:G("cancelEvent").confirm_cancel_event,"close-btn-text":G("cancelEvent").close,"confirm-btn-text":G("cancelEvent").confirm,"customized-options":R("cancelEvent"),loading:e($),onClose:j[1]||(j[1]=te=>_e(F)?F.value=null:F=null),onConfirm:E},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])],64))],4))}});const Gn={class:"am-sc__top-left"},Qn={class:"am-sc__name"},Xn={key:0,class:"am-sc__date"},Kn={key:1,class:"am-sc__date"},ei=["onClick"],ti={class:"am-sc__capacity"},ai=o("div",{class:"am-sc__btn"},[o("span",{class:"am-icon-arrow-right"})],-1),si={key:0,class:"am-sc__bottom"},li={class:"am-sc__expiration"},oi=o("span",{class:"am-icon-triangle-info"},null,-1),ni={name:"CabinetPackagesList"},ii=Object.assign(ni,{props:{packages:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""}},emits:["click"],setup(s,{emit:a}){const t=s;function l(y){return fe(y,"YYYY-MM-DD").diff(fe(),"days")}function i(y){a("click",y)}function d(y,V,f){let W=0;return Object.keys(y).forEach(G=>{(V===null||parseInt(V)===parseInt(G))&&(W+=y[G].purchaseData[f])}),W}function m(y){return y===1?S.value.appointment_booked:S.value.appointments_booked}function r(y){let V=y.packageData.sharedCapacity?y.packageData.sharedCount:d(y.services,null,"count"),f=y.packageData.sharedCapacity?y.packageData.sharedTotal:d(y.services,null,"total");return`${f-V}/${f} ${m(f-V)}`}const u=p("settings");let _=p("amCustomize");const k=p("labels"),w=p("localLanguage");let O=g(()=>u.general.usedLanguages.includes(w.value)),S=g(()=>{let y=ke(be({},k)),V=_.value.packagesList.translations;return V&&Object.keys(V).forEach(f=>{V[f][w.value]&&O.value?y[f]=V[f][w.value]:V[f].default&&(y[f]=V[f].default)}),y}),A=p("amColors"),D=g(()=>({"--am-c-sc-bgr":A.value.colorMainBgr,"--am-c-sc-bgr-op15":x(A.value.colorMainText,.15),"--am-c-sc-text":A.value.colorMainText,"--am-c-sc-text-op80":x(A.value.colorMainText,.8),"--am-c-sc-text-op60":x(A.value.colorMainText,.6),"--am-c-sc-warning-op50":x(A.value.colorWarning,.5)}));return(y,V)=>e(t).packages.length?(n(!0),c(ae,{key:0},pe(e(t).packages,f=>(n(),c("div",{key:f[0],style:ue(e(D)),class:J(["am-sc",{"am-sc__canceled":f[1].packageData.status==="canceled"}])},[o("div",{class:J(["am-sc__top",s.responsiveClass])},[o("div",Gn,[o("div",Qn,h(f[1].packageData.name),1),f[1].packageData.end?(n(),c("div",Xn,h(e(S).package_book_expire)+" "+h(e(Fe)(f[1].packageData.end.split(" ")[0])),1)):(n(),c("div",Kn,h(`${e(S).package_book_expiration} ${e(S).package_book_unlimited}`),1))]),o("div",{class:J(["am-sc__top-right",s.responsiveClass]),onClick:W=>i(f[0])},[o("div",ti,h(r(f[1])),1),ai],10,ei)],2),f[1].packageData.end&&f[1].packageData.status!=="canceled"?(n(),c(ae,{key:0},[l(f[1].packageData.end.split(" ")[0])>0?(n(),c("div",si,[o("span",li,[oi,de(" "+h(`${e(S).package_deal_expire_in} ${l(f[1].packageData.end.split(" ")[0])} ${e(S).expires_days}, ${e(S).appointments_deal_expire}`),1)])])):L("",!0)],64)):L("",!0)],6))),128)):(n(),U(ht,{key:1,heading:e(S).no_pack_found,text:e(S).have_no_pack},null,8,["heading","text"]))}});const ri=o("span",{class:"am-icon-checkmark-circle-full"},null,-1),ci={class:"am-cappa__back"},ui={class:"am-cappa__heading-left"},di={key:0,class:"am-cappa__img-name"},pi={class:"am-cappa__info"},mi={class:"am-cappa__name"},_i={key:0,class:"am-cappa__date"},gi={key:1,class:"am-cappa__date"},vi={key:2,class:"am-cappa__capacity"},fi={class:"am-cappa__service-heading"},bi={class:"am-cappa__service-right"},hi={key:0,class:"am-cappa__service-img__name"},yi={class:"am-cappa__service-info"},ki={class:"am-cappa__service-name"},xi={key:0,class:"am-cappa__service-capacity"},Ci={name:"CabinetPackageAppointmentsList",key:"packagesList"},Ti=Object.assign(Ci,{props:{data:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["goBack","booked","canceled","cancelError"],setup(s,{emit:a}){const t=s;let l=xe(),i=g(()=>l.getters.getSettings),d=Et({components:{IconComponent:je},template:'<IconComponent icon="arrow-left"></IconComponent>'}),{selectedPackageCustomerId:m}=p("packageSelection"),r=g(()=>l.getters["entities/getPackage"](t.data.packageData.id)),u=g(()=>r.value.bookable.find(v=>parseInt(v.service.id)===parseInt(D.value))),_=b(null),k=b(null),w=g(()=>{let v=l.getters["entities/getEntitiesRelations"],C=l.getters["entities/getUnfilteredEmployees"],B=[];if(u.value){if(k.value)Object.keys(v).forEach(M=>{y.value&&y.value.serviceId in v[M]&&v[M][parseInt(y.value.serviceId)].indexOf(k.value)!==-1&&B.push(parseInt(M))});else{let M=[];if(u.value.locations.length)M=u.value.locations.map(me=>me.id);else for(let me in v)u.value.service.id in v[me]&&(M=M.concat(v[me][u.value.service.id]));for(let me in v)u.value.service.id in v[me]&&M.forEach(Ae=>{v[me][u.value.service.id].indexOf(Ae)!==-1&&B.push(parseInt(me))})}let H=u.value.providers.length?u.value.providers.map(M=>M.id):C.map(M=>M.id);return C.filter(M=>H.indexOf(M.id)!==-1&&B.indexOf(M.id)!==-1&&(l.getters["entities/getShowHidden"]||M.status==="visible"))}return[]}),O=g(()=>{let v=l.getters["entities/getEntitiesRelations"],C=l.getters["entities/getUnfilteredLocations"],B=[];if(u.value){if(_.value)B=v[_.value][u.value.service.id];else{let M=[];if(u.value.providers.length)M=u.value.providers.map(me=>me.id);else for(let me in v)u.value.service.id in v[me]&&M.push(parseInt(me));for(let me in v)u.value.service.id in v[me]&&M.indexOf(parseInt(me))!==-1&&(B=B.concat(v[me][u.value.service.id]))}let H=u.value.locations.length?u.value.locations.map(M=>M.id):C.map(M=>M.id);return C.filter(M=>H.indexOf(M.id)!==-1&&B.indexOf(M.id)!==-1&&(l.getters["entities/getShowHidden"]||M.status==="visible"))}return[]}),S=g(()=>{let v=[];return Object.keys(t.data.services).forEach(C=>{Object.keys(t.data.services[C].appointments).forEach(B=>{t.data.services[C].appointments[B].appointments.forEach(H=>{v.push(H)})})}),{type:"package",package:r.value,booking:null,bookable:r.value,paymentId:t.data.packageData.payments.length?t.data.packageData.payments[0].id:null,customer:l.getters["auth/getProfile"],packageCustomerId:parseInt(m.value),packageReservations:v,payments:t.data.packageData.payments,price:t.data.packageData.price,tax:t.data.packageData.tax,coupon:t.data.packageData.coupon,discount:t.data.packageData.discount,end:t.data.packageData.end}}),A=b(!1),D=b(null),y=b(null),V=b(null);Oe(()=>{D.value=Object.keys(t.data.services)[0]});function f(v,C,B){let H=0;return Object.keys(v).forEach(M=>{(C===null||parseInt(C)===parseInt(M))&&(H+=v[M].purchaseData[B])}),H}function W(v){return v===1?se.value.appointment_booked:se.value.appointments_booked}function G(v,C=null){let B=v.packageData.sharedCapacity?v.packageData.sharedCount:f(v.services,C,"count"),H=v.packageData.sharedCapacity?v.packageData.sharedTotal:f(v.services,C,"total");return`${H-B}/${H} ${W(H-B)}`}function R(v){D.value=v.paneName}function Q(){let v=l.getters["auth/getProfile"],C=l.getters["cabinet/getTimeZone"]?l.getters["cabinet/getTimeZone"]:"UTC",B={serviceId:parseInt(D.value),group:1,timeZone:l.getters["cabinet/getTimeZone"],page:"cabinet"},H=r.value.bookable.find(M=>parseInt(M.service.id)===parseInt(D.value)).providers.map(M=>M.id);H.length&&(B.providerIds=H),B.locationId=null,V.value=B,y.value={type:"appointment",bookings:[{packageCustomerService:{id:t.data.services[D.value].purchaseData.packageCustomerServiceId},customer:{id:v.id,firstName:v.firstName,lastName:v.lastName,email:v.email,phone:v.phone,countryPhoneIso:v.countryPhoneIso,externalId:v.externalId},customerId:v.id,customFields:null,persons:1,extras:[],deposit:0}],serviceId:D.value,locationId:t.data.services[D.value].purchaseData.locitionId,providerId:t.data.services[D.value].purchaseData.employeeId,isGroup:!0,notifyParticipants:i.value.notifications.notifyCustomers?1:0,payment:null,recurring:[],package:[],timeZone:C===""?Intl.DateTimeFormat().resolvedOptions().timeZone:C,utc:C==="",locale:window.localeLanguage[0]}}function K(v){y.value=null,a("booked",v)}let z=b(!1);function F(){z.value=!0,Ce.post("/packages/customers/"+parseInt(m.value),{status:"canceled"},De(l)).then(()=>{A.value=!1,a("canceled",{message:se.value.package_purchase_canceled})}).catch(v=>{v.response&&a("cancelError",v.response.data)}).finally(()=>{z.value=!1})}function T(v){a("booked",v)}function P(){a("goBack")}let $=p("amCustomize");const E=p("labels"),q=p("localLanguage");let ne=g(()=>i.value.general.usedLanguages.includes(q.value)),se=g(()=>{let v=ke(be({},E)),C=$.value.packageAppointmentsList.translations;return C&&Object.keys(C).forEach(B=>{C[B][q.value]&&ne.value?v[B]=C[B][q.value]:C[B].default&&(v[B]=C[B].default)}),v});ce("amLabels",se);let Y=g(()=>l.getters["cabinet/getPaymentLinkError"].package),j=b("error"),te=b(se.value.payment_link_error);function ee(){Y.value=!1,l.commit("cabinet/setPaymentLinkError",{value:!1,type:"package"})}function ie(v){let C=ke(be({},E)),B=$.value[v].translations;return B&&Object.keys(B).forEach(H=>{B[H][q.value]&&ne.value?C[H]=B[H][q.value]:B[H].default&&(C[H]=B[H].default)}),C}function le(v){return $.value[v].options}let X=p("amColors"),N=g(()=>({"--am-c-cappa-text":X.value.colorMainText,"--am-c-cappa-bgr":X.value.colorMainBgr,"--am-c-cappa-text-op80":x(X.value.colorMainText,.8),"--am-c-cappa-text-op70":x(X.value.colorMainText,.7),"--am-c-cappa-text-op20":x(X.value.colorMainText,.2),"--am-c-cappa-primary":X.value.colorPrimary}));return(v,C)=>{const B=Mt,H=zt;return n(),c("div",{class:"am-cappa",style:ue(e(N))},[e(Y)?(n(),U(Ee,{key:0,ref:"alertContainer",type:e(j),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:ee,onTriggerClose:ee},{title:I(()=>[ri,de(" "+h(e(te)),1)]),_:1},8,["type"])):L("",!0),o("div",ci,[Z(ye,{"custom-class":"am-cappa__back-btn",icon:e(d),type:e($).packageAppointmentsList.options.backBtn.buttonType,size:"micro",category:"secondary","icon-only":"",onClick:P},null,8,["icon","type"]),o("span",null,h(e(se).back_btn),1)]),o("div",{class:J(["am-cappa__heading",s.responsiveClass])},[o("div",ui,[o("div",{class:"am-cappa__img",style:ue(e(t).data.packageData.pictureThumbPath?{backgroundImage:`url(${e(t).data.packageData.pictureThumbPath})`}:{})},[e(t).data.packageData.pictureThumbPath?L("",!0):(n(),c("span",di,h(e(Lt)(e(t).data.packageData.name)),1)),o("span",{class:"am-cappa__img-color",style:ue({backgroundColor:e(t).data.packageData.color})},null,4)],4),o("div",pi,[o("div",mi,h(e(t).data.packageData.name),1),e(t).data.packageData.end?(n(),c("div",_i,h(e(se).package_book_expire)+" "+h(e(Fe)(e(t).data.packageData.end.split(" ")[0])),1)):(n(),c("div",gi,h(`${e(se).package_book_expiration} ${e(se).package_book_unlimited}`),1)),Object.keys(e(t).data.services).length>1?(n(),c("div",vi,h(G(e(t).data)),1)):L("",!0)])]),o("div",{class:J(["am-cappa__heading-right",s.responsiveClass])},[e(i).roles.allowCustomerCancelPackages&&e(t).data.packageData.status!=="canceled"?(n(),U(ye,{key:0,category:"danger",size:"small",class:J(["am-cappa__actions",s.responsiveClass]),type:e($).packageAppointmentsList.options.cancelBtn.buttonType,onClick:C[0]||(C[0]=()=>{_e(A)?A.value=!0:A=!0})},{default:I(()=>[de(h(e(se).cancel),1)]),_:1},8,["class","type"])):L("",!0),e(t).data.packageData.status==="approved"&&e(t).data.packageData.price>0?(n(),U(Yt,{key:1,"btn-size":"small",class:J(`am-cappa__actions ${s.responsiveClass}`),type:e($).packageAppointmentsList.options.payBtn.buttonType,reservation:e(S),bookable:e(r)},null,8,["class","type","reservation","bookable"])):L("",!0)],2)],2),Z(H,{modelValue:e(D),"onUpdate:modelValue":C[1]||(C[1]=M=>_e(D)?D.value=M:D=M),class:"am-cappa__service",onTabClick:R},{default:I(()=>[(n(!0),c(ae,null,pe(Object.keys(e(t).data.services),M=>(n(),U(B,{key:M,name:M},{label:I(()=>[o("div",fi,h(e(t).data.services[M].purchaseData.name),1)]),default:I(()=>[e(D)===M?(n(),c(ae,{key:0},[o("div",{class:J(["am-cappa__service-top",s.responsiveClass])},[o("div",bi,[o("div",{class:"am-cappa__service-img",style:ue(e(t).data.services[e(D)].purchaseData.pictureThumbPath?{backgroundImage:`url(${e(t).data.services[e(D)].purchaseData.pictureThumbPath})`}:{})},[e(t).data.services[e(D)].purchaseData.pictureThumbPath?L("",!0):(n(),c("span",hi,h(e(Lt)(e(t).data.services[e(D)].purchaseData.name)),1)),o("span",{class:"am-cappa__service-img__color",style:ue({backgroundColor:e(t).data.services[e(D)].purchaseData.color})},null,4)],4),o("div",yi,[o("div",ki,h(e(t).data.services[e(D)].purchaseData.name),1),e(t).data.packageData.sharedCapacity?L("",!0):(n(),c("div",xi,h(G(e(t).data,e(D))),1))])]),e(t).data.packageData.status!=="canceled"?(n(),U(ye,{key:0,class:J(["am-cappa__service-book",s.responsiveClass]),size:"small",type:e($).packageAppointmentsList.options.bookBtn.buttonType,disabled:f(e(t).data.services,e(D),"count")===0,onClick:Q},{default:I(()=>[de(h(e(se).book_now),1)]),_:1},8,["class","type","disabled"])):L("",!0)],2),Z(Zt,{"grouped-appointments":e(t).data.services[e(D)].appointments,"page-width":s.pageWidth,"responsive-class":s.responsiveClass,"is-package-booking":!0,"step-key":"packageAppointmentsList",onCanceled:T,onBooked:T},null,8,["grouped-appointments","page-width","responsive-class"])],64)):L("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),Z(ft,{loading:e(z),visibility:e(A),title:ie("cancelPackage").cancel_package,description:ie("cancelPackage").confirm_cancel_package,"close-btn-text":ie("cancelPackage").close,"confirm-btn-text":ie("cancelPackage").confirm,"customized-options":le("cancelPackage"),onClose:C[2]||(C[2]=()=>{_e(A)?A.value=!1:A=!1}),onConfirm:F},null,8,["loading","visibility","title","description","close-btn-text","confirm-btn-text","customized-options"]),Z(Ut,{visibility:e(y)!==null&&!e(y).id,appointment:e(y),employees:e(w),locations:e(O),"slots-params":e(V),labels:ie("bookAppointment"),"customized-options":le("bookAppointment"),onClose:C[3]||(C[3]=M=>_e(y)?y.value=null:y=null),onSuccess:K,onError:C[4]||(C[4]=()=>{}),onEmployeeSelection:C[5]||(C[5]=M=>_e(_)?_.value=M:_=M),onLocationSelection:C[6]||(C[6]=M=>_e(k)?k.value=M:k=M)},null,8,["visibility","appointment","employees","locations","slots-params","labels","customized-options"])],4)}}});const $i=o("span",{class:"am-icon-checkmark-circle-full"},null,-1),Pi={name:"CabinetPackages",key:"packages"},Li=Object.assign(Pi,{props:{loadBookingsCounter:{type:Number,default:0}},setup(s){const a=s;let t=xe(),l=b(null),i=b(0),d=p("sidebarCollapsed");window.addEventListener("resize",m);function m(){l.value&&(i.value=l.value.offsetWidth)}$e(d,$=>{$?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=l.value.offsetWidth}Oe(()=>{Re(()=>{i.value=l.value.offsetWidth})});let u=g(()=>Le(i.value)),_=b(null),k=b(!1),w=b("success"),O=b("");function S(){k.value=!1,O.value=""}let A=p("cabinetType");t.commit("cabinetFilters/setDates",mt(A.value));let D=g(()=>t.getters["cabinet/getPackageLoading"]),y=b([]),V=b(null);function f(){let $=t.getters["cabinetFilters/getPackages"],E=t.getters["cabinetFilters/getServices"],q=t.getters["cabinetFilters/getProviders"],ne=t.getters["cabinetFilters/getLocations"];y.value=K.value.filter(se=>{let Y=t.getters["entities/getPackageEntities"](se[1].packageData.id);return(E.length===0||E.filter(j=>Y.services.includes(j)).length>0)&&(q.length===0||q.filter(j=>Y.providers.includes(j)).length>0)&&(ne.length===0||ne.filter(j=>Y.locations.includes(j)).length>0)&&($.length===0||$.filter(j=>Y.packages.includes(j)).length>0)})}function W($,E,q){let ne=0;return Object.keys($).forEach(se=>{(E===null||parseInt(E)===parseInt(se))&&(ne+=$[se].purchaseData[q])}),ne}function G($){let E=W($.services,null,"count"),q=W($.services,null,"total");return q-E===q}function R($){t.commit("cabinet/setPackageLoading",!0);let E=t.getters["cabinet/getTimeZone"],q=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getPackagesFilters"]));q.timeZone=E,q.source="cabinet-"+A.value,q.activePackages=0,Ce.get("/appointments",_t(Object.assign(De(t),{params:q}))).then(ne=>{let se={};ne.data.data.availablePackageBookings.forEach(X=>{X.packages.forEach(N=>{N.services.forEach(v=>{v.bookings.forEach(C=>{let B=t.getters["entities/getPackage"](N.packageId);if(B&&(C.packageCustomerId in se||(se[C.packageCustomerId]={packageData:{id:B.id,name:B.name,start:C.start,end:C.end,price:C.price,tax:C.tax,coupon:C.coupon,status:C.status,type:"package",payments:C.payments,sharedCapacity:C.sharedCapacity,sharedTotal:C.total,sharedCount:C.count,discount:0,color:B.color,pictureFullPath:B.pictureFullPath,pictureThumbPath:B.pictureThumbPath},services:{}}),!(v.serviceId in se[C.packageCustomerId].services))){let H=t.getters["entities/getService"](v.serviceId);se[C.packageCustomerId].services[v.serviceId]={appointments:{},purchaseData:{packageCustomerServiceId:C.id,total:C.total,count:C.count,employeeId:C.employeeId,locationId:C.locationId,name:H.name,color:H.color,pictureThumbPath:H.pictureThumbPath}}}})})})});let Y=Nt(ne.data.data.appointments,E);Object.keys(Y).forEach(X=>{Y[X].appointments.forEach(N=>{N.bookings.forEach(v=>{let C=v.packageCustomerService.packageCustomer.id;C in se&&(X in se[C].services[N.serviceId].appointments||(se[C].services[N.serviceId].appointments[X]={date:X,appointments:[]}),se[C].services[N.serviceId].appointments[X].appointments.push(N))})})});let j=Object.entries(se).filter(X=>X[1].packageData.status==="canceled"),te=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&G(X[1])),ee=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&!G(X[1])&&X[1].packageData.end===null),ie=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&!G(X[1])&&X[1].packageData.end!==null).sort((X,N)=>fe(X[1].packageData.end,"YYYY-MM-DD HH:mm:ss").diff(fe(N[1].packageData.end,"YYYY-MM-DD HH:mm:ss"),"minutes"));if(y.value=[...ie,...ee,...te,...j],K.value=[...ie,...ee,...te,...j],!(q.packages.length||q.services.length||q.providers.length||q.locations.length)){let X=[],N=[],v=[],C=[];y.value.forEach(B=>{let H=t.getters["entities/getPackageEntities"](B[1].packageData.id);X=X.concat(H.services),N=N.concat(H.providers),v=v.concat(H.locations),C=C.concat(H.packages)}),t.dispatch("cabinetFilters/injectServiceOptions",X.filter((B,H,M)=>M.indexOf(B)===H)),t.dispatch("cabinetFilters/injectProviderOptions",N.filter((B,H,M)=>M.indexOf(B)===H)),t.dispatch("cabinetFilters/injectLocationOptions",v.filter((B,H,M)=>M.indexOf(B)===H)),t.dispatch("cabinetFilters/injectPackagesOptions",C.filter((B,H,M)=>M.indexOf(B)===H))}}).catch(ne=>{console.log(ne)}).finally(()=>{t.commit("cabinet/setPackageLoading",!1),$&&"message"in $&&(k.value=!0,O.value=$.message,l.value&&_.value&&setTimeout(function(){Te(l.value,_.value.$el,0,300)},500))})}function Q($){k.value=!0,O.value=$.message,w.value="error",l.value&&_.value&&setTimeout(function(){Te(l.value,_.value.$el,0,300)},500)}ce("packageSelection",{selectedPackageCustomerId:V});let K=b([]);$e(()=>a.loadBookingsCounter,()=>{R()}),Oe(()=>{R()});let z=g(()=>({list:{template:he(ii),props:{packages:y.value,responsiveClass:u.value},handlers:{click:T}},item:{template:he(Ti),props:{data:V.value?y.value.find($=>$[0]===V.value)[1]:{},responsiveClass:u.value,pageWidth:i.value},handlers:{goBack:P,booked:R,canceled:R,cancelError:Q}}})),F=b("list");function T($){V.value=$,F.value="item"}function P(){V.value=null,F.value="list"}return($,E)=>(n(),c("div",{ref_key:"pageContainer",ref:l,class:"am-cap"},[e(k)?(n(),U(Ee,{key:0,ref_key:"alertContainer",ref:_,type:e(w),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:S,onTriggerClose:S},{title:I(()=>[$i,de(" "+h(e(O)),1)]),_:1},8,["type"])):L("",!0),tt(Z(vt,{"step-key":"packages","responsive-class":e(u),onChangeFilters:f},null,8,["responsive-class"]),[[fa,e(F)==="list"]]),e(D)?(n(),U(bt,{key:2})):(n(),U(Be(e(z)[e(F)].template),Ne({key:1},e(z)[e(F)].props,ba(e(z)[e(F)].handlers)),null,16))],512))}});const wi=o("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),Si=o("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),Di=["href"],Oi={class:"am-fs-sb__page-wrapper am-fs-sb__page-wrapper__cabinet"},Fi=["onClick"],Mi={class:"am-fs-sb__page-icon"},zi=o("span",{class:"am-icon-arrow-big-right"},null,-1),Ii=[zi],Bi={key:1,class:"am-fs-sb__page-divider"},Ei={class:"am-fs-sb__page-inner"},ji=o("div",{class:"am-fs-sb__page-icon"},[o("span",{class:"am-icon-dashboard"})],-1),Ai=o("div",{class:"am-fs-sb__page-divider"},null,-1),Ni={class:"am-fs-sb__page-inner"},Vi=o("div",{class:"am-fs-sb__page-icon"},[o("span",{class:"am-icon-logout"})],-1),Yi={class:"am-caph"},Wi={class:"am-caph__text"},Ui=o("span",{class:"am-icon-menu"},null,-1),Zi=[Ui],qi={name:"CustomerPanel"},Ri=Object.assign(qi,{setup(s){const a=st().cookies,t=xe();let l=g(()=>t.getters["auth/getAuthenticated"]);$e(l,v=>{v&&(t.commit("auth/setNewPassword",""),t.commit("auth/setConfirmPassword",""))});let i=b("customer");ce("cabinetType",i);let d=p("licence"),m=b("capc");ce("originKey",m);let r=b(null),{width:u}=ha(r);ce("containerWidth",u);const _=p("settings"),k=g(()=>_.customizedData&&"capc"in _.customizedData?_.customizedData.capc:Xe.capc);ce("amCustomize",k);const w=b(_.customizedData?_.customizedData.fonts:Xe.fonts);ce("amFonts",w);const O=p("labels"),S=p("localLanguage");let A=g(()=>_.general.usedLanguages.includes(S.value)),D=g(()=>{let v=ke(be({},O));return _.customizedData&&Object.keys(k.value).forEach(C=>{if(C!=="colors"&&k.value[C].translations){let B=k.value[C].translations;Object.keys(B).forEach(H=>{B[H][S.value]&&A.value?v[H]=B[H][S.value]:B[H].default&&(v[H]=B[H].default)})}}),v}),y=g(()=>P.value==="packages"?k.value.packagesList.options:k.value[P.value].options),V=b(!1),f=b(!1);ce("sidebarCollapsed",ya(f));let W=b("");$e(f,v=>{v?setTimeout(()=>{W.value="am-collapsed"},1e3):W.value=""});let G=b(null),R=b(0),Q=g(()=>u.value>480);Oe(()=>{G.value&&setTimeout(()=>{R.value=G.value.offsetHeight},200)});let K=b(null);$e(u,v=>{clearTimeout(K.value),K.value=setTimeout(()=>{f.value=k.value.sidebar.options.toggle.visibility?k.value.sidebar.options.toggle.visibility:v<=600,V.value=v>481?!1:V.value},200)});const z=p("baseUrls");t.dispatch("entities/getEntities",{types:["employees","categories","locations","packages","entitiesRelations","customFields"],licence:"basic",loadEntities:!0,showHidden:!0});const F=p("shortcodeData");let T=g(()=>t.getters.getReady),P=b(F.value.appointments||!F.value.events?"appointments":"events"),$=b({profile:he(Js)});(F.value.appointments||!F.value.events)&&($.value.appointments=he(qn)),(F.value.events||!F.value.appointments)&&($.value.events=he(Jn)),(F.value.appointments||!F.value.events)&&(d.isPro||d.isDeveloper)&&($.value.packages=he(Li));const E=b([{key:"profile",icon:"user",pageLabel:D.value.my_profile,label:g(()=>k.value.profile.options.lastName.visibility?`${t.getters["auth/getProfile"].firstName} ${t.getters["auth/getProfile"].lastName}`:`${t.getters["auth/getProfile"].firstName}`)}]);(F.value.appointments||!F.value.events)&&E.value.push({key:"appointments",icon:"service",label:D.value.appointments}),(F.value.events||!F.value.appointments)&&E.value.push({key:"events",icon:"star-outline",label:D.value.events}),(F.value.appointments||!F.value.events)&&(d.isPro||d.isDeveloper)&&E.value.push({key:"packages",icon:"shipment",label:D.value.packages}),ce("sidebarSteps",E),Oe(()=>{q.value=E.value.findIndex(v=>v.key===P.value)});let q=b(0);function ne(v,C){P.value=v.key,q.value=C,t.commit("cabinetFilters/setResetFilters")}function se(v){ne(v.step,v.index),t.commit("cabinetFilters/setResetFilters")}function Y(){t.dispatch("auth/logout")}function j(){V.value=!1,Y()}let te=b(0);function ee(){te.value++}ce("bookingsCounterChanger",{bookingsCounterChanger:ee});const ie=p("timeZone");Ft(()=>{if(!_.general.showClientTimeZone){let v=ie.value;a.get("ameliaUserTimeZone")&&(v=a.get("ameliaUserTimeZone")),t.commit("cabinet/setTimeZone",v)}t.getters["cabinet/getTimeZone"]||t.commit("cabinet/setTimeZone",Ze())});let le=g(()=>k.value.colors);ce("amColors",le);let X=g(()=>({"--am-c-primary":le.value.colorPrimary,"--am-c-success":le.value.colorSuccess,"--am-c-error":le.value.colorError,"--am-c-warning":le.value.colorWarning,"--am-c-main-bgr":le.value.colorMainBgr,"--am-c-main-heading-text":le.value.colorMainHeadingText,"--am-c-main-text":le.value.colorMainText,"--am-c-sb-bgr":le.value.colorSbBgr,"--am-c-sb-text":le.value.colorSbText,"--am-c-inp-bgr":le.value.colorInpBgr,"--am-c-inp-border":le.value.colorInpBorder,"--am-c-inp-text":le.value.colorInpText,"--am-c-inp-placeholder":le.value.colorInpPlaceHolder,"--am-c-drop-bgr":le.value.colorDropBgr,"--am-c-drop-text":le.value.colorDropText,"--am-c-btn-prim":le.value.colorBtnPrim,"--am-c-btn-prim-text":le.value.colorBtnPrimText,"--am-c-btn-sec":le.value.colorBtnSec,"--am-c-btn-sec-text":le.value.colorBtnSecText,"--am-c-btn-danger":le.value.colorBtnDanger,"--am-c-btn-danger-text":le.value.colorBtnDangerText,"--am-c-skeleton-op20":x(le.value.colorMainText,.2),"--am-c-skeleton-op60":x(le.value.colorMainText,.6),"--am-c-skeleton-sb-op20":x(le.value.colorSbText,.2),"--am-c-skeleton-sb-op60":x(le.value.colorSbText,.6),"--am-c-scroll-op30":x(le.value.colorPrimary,.3),"--am-c-scroll-op10":x(le.value.colorPrimary,.1),"--am-font-family":w.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px","--am-mw-main":Q.value?f.value?"858px":"1024px":"520px","--am-brad-main":Q.value?"0 0.5rem 0.5rem 0":"0.5rem"})),N=g(()=>({"--am-c-msd-bgr":le.value.colorSbBgr,"--am-c-msd-text":le.value.colorSbText,"--am-c-msd-text-op05":x(le.value.colorSbText,.05),"--am-c-msd-text-op10":x(le.value.colorSbText,.1),"--am-c-msd-text-op60":x(le.value.colorSbText,.6)}));return(v,C)=>(n(),c(ae,null,[w.value.customFontSelected?L("",!0):(n(),c(ae,{key:0},[wi,Si,o("link",{rel:"stylesheet",type:"text/css",href:`${e(z).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,Di)],64)),o("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:r,class:J(["am-cap__wrapper",[{"am-collapsed":e(f)},{"am-auth":!e(l)}]]),style:ue(e(X))},[e(l)?L("",!0):(n(),U(As,{key:0})),e(l)?(n(),c(ae,{key:1},[e(Q)?(n(),U(ka,{key:0,class:J(["am-fs-sb",{"am-collapsed":e(f)}]),style:ue({width:e(f)?"72px":"240px",paddingBottom:`${e(R)+16}px`})},{"step-list":I(()=>[o("div",Oi,[(n(!0),c(ae,null,pe(E.value,(B,H)=>(n(),c(ae,{key:B.key},[B.key!=="packages"||e(t).getters["entities/getPackages"].length?(n(),c("div",{key:0,class:J(["am-fs-sb__page",{selected:e(P)===B.key}]),onClick:M=>ne(B,H)},[o("div",{class:J(["am-fs-sb__page-inner",{"am-collapsed":e(f)}])},[o("div",Mi,[o("span",{class:J(`am-icon-${B.icon}`)},null,2)]),Z(Ie,{name:"fade"},{default:I(()=>[e(f)?L("",!0):(n(),c("p",{key:0,class:J(["am-fs-sb__page-heading",e(W)])},h(B.label),3))]),_:2},1024),Z(Ie,{name:"fade"},{default:I(()=>[e(f)?L("",!0):(n(),c("div",{key:0,class:J(["am-fs-sb__page-indicator",e(W)])},Ii,2))]),_:1})],2)],10,Fi)):L("",!0),H===0?(n(),c("div",Bi)):L("",!0)],64))),128))])]),"support-info":I(()=>[o("div",{ref_key:"sidebarFooterRef",ref:G,class:"am-fs-sb__footer"},[o("div",{class:"am-fs-sb__page",onClick:C[0]||(C[0]=B=>_e(f)?f.value=!e(f):f=!e(f))},[o("div",Ei,[ji,Z(Ie,{name:"fade"},{default:I(()=>[e(f)?L("",!0):(n(),c("p",{key:0,class:J(["am-fs-sb__page-heading",e(W)])},h(e(D).toggle_sidebar),3))]),_:1})])]),Ai,o("div",{class:"am-fs-sb__page",onClick:Y},[o("div",Ni,[Vi,Z(Ie,{name:"fade"},{default:I(()=>[e(f)?L("",!0):(n(),c("p",{key:0,class:J(["am-fs-sb__page-heading",e(W)])},h(e(D).log_out),3))]),_:1})])])],512)]),_:1},8,["class","style"])):L("",!0),Z(xa,{"max-width":786,"old-responsive":!1},{header:I(()=>[Z(wa,{ready:e(T)},{default:I(()=>[o("div",Yi,[o("div",Wi,h(E.value[e(q)].key==="profile"?E.value[e(q)].pageLabel:E.value[e(q)].label),1),e(Q)?L("",!0):(n(),c("div",{key:0,class:"am-caph__menu",onClick:C[1]||(C[1]=()=>_e(V)?V.value=!e(V):V=!e(V))},Zi)),e(Q)&&e(P)!=="profile"&&e(y).timeZone.visibility?(n(),U(ct,{key:1})):L("",!0),Z(ss,{"menu-items":E.value,monitor:e(P),visibility:e(V),"custom-css":e(N),"customized-labels":e(D),position:"right",width:240,"onUpdate:visibility":C[2]||(C[2]=B=>_e(V)?V.value=B:V=B),onClick:se,onLogout:j},null,8,["menu-items","monitor","visibility","custom-css","customized-labels"])])]),_:1},8,["ready"])]),step:I(()=>[(n(),U(Be(e($)[e(P)]),{class:"am-fs__main-content","load-bookings-counter":e(te)},null,8,["load-bookings-counter"]))]),_:1})],64)):L("",!0)],6)],64))}});var er=Object.freeze(Object.defineProperty({__proto__:null,default:Ri},Symbol.toStringTag,{value:"Module"}));export{er as C,Ma as _,Aa as a,Va as b,wa as c,ss as d,Ki as e,we as f,Xi as g,Me as h,$a as i,jt as u};
