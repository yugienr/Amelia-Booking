wpJsonpAmeliaBookingPlugin([18],{1395:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(694),i=a.n(s),n=a(673),o=a.n(n),l=a(702),r=a(91),c=a(676),u=a(654),d=a(336),m=a(901),p=a(1396),h=a.n(p),v=a(1399),g=a.n(v),f=a(851),b=a.n(f),y=a(810),C=a.n(y),x=a(658),k=a(660),$=a(693),w=a(941),P=a.n(w),S=a(657),T=a(745),D=a.n(T),E=a(655),I=a(730),F=a(0),L=(a.n(F),a(798)),N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={mixins:[l.a,r.a,c.a,$.a,k.a,u.a,d.a,m.a,x.a,S.a,E.a,I.a,L.a],data:function(){return{customersNoShowCount:[],bookingFetched:!1,paymentsFilteredCount:0,paymentsTotalCount:0,taxFetched:!1,taxesFilteredCount:0,taxesTotalCount:0,couponFetched:!1,couponsFilteredCount:0,couponsTotalCount:0,invoicesFilteredCount:0,invoicesTotalCount:0,paymentsFiltering:!1,taxesFiltering:!1,couponsFiltering:!1,invoicesFiltering:!1,fetchedFilteredPayments:!1,fetchedFilteredTaxes:!1,fetchedFilteredCoupons:!1,fetchedFilteredInvoices:!1,addNewTaxBtnDisplay:!1,addNewCouponBtnDisplay:!1,dialogTax:!1,dialogCoupon:!1,dialogPayment:!1,invoiceInDialog:!1,tax:null,coupon:null,form:new o.a,checkPaymentData:{toaster:!1,allChecked:!1},checkTaxData:{toaster:!1,allChecked:!1},checkCouponData:{toaster:!1,allChecked:!1},options:{entities:{events:[],services:[],packages:[],extras:[],employees:[],customers:[]},fetched:!1},dialogPaymentsExport:!1,dialogCouponsExport:!1,paymentsParams:{page:1,show:this.$root.settings.general.itemsPerPageBackEnd,dates:this.getDatePickerInitRange(),status:"",services:[],events:[],providerId:"",customerId:""},exportParamsPayments:{fields:[{label:this.$root.labels.service+"/"+this.$root.labels.event,value:"service",checked:!0},{label:this.$root.labels.booking_start,value:"bookingStart",checked:!0},{label:this.$root.labels.customer,value:"customer",checked:!0},{label:this.$root.labels.customer_email,value:"customerEmail",checked:!0},{label:this.$root.labels.employee,value:"employee",checked:!0},{label:this.$root.labels.employee_email,value:"employeeEmail",checked:!0},{label:this.$root.labels.location,value:"location",checked:!0},{label:this.$root.labels.amount,value:"amount",checked:!0},{label:this.$root.labels.method,value:"type",checked:!0},{label:this.$root.labels.status,value:"status",checked:!0},{label:this.$root.labels.payment_date,value:"paymentDate",checked:!0},{label:this.$root.labels.coupon_code,value:"couponCode",checked:!0},{label:this.$root.labels.payment_created,value:"paymentCreated",checked:!0}]},exportPaymentsAction:"",taxesParams:{page:1,status:"",services:[],extras:[],events:[],packages:[],search:""},couponsParams:{page:1,status:"",services:[],events:[],search:""},exportParamsCoupons:{fields:[{label:this.$root.labels.code,value:"code",checked:!0},{label:this.$root.labels.discount,value:"discount",checked:!0},{label:this.$root.labels.deduction,value:"deduction",checked:!0},{label:this.$root.labels.services,value:"services",checked:!0},{label:this.$root.labels.events,value:"events",checked:!0},{label:this.$root.labels.limit,value:"limit",checked:!0},{label:this.$root.labels.used,value:"used",checked:!0}]},exportCouponsAction:"",invoiceParams:{page:1,show:this.$root.settings.general.itemsPerPageBackEnd,dates:this.getDatePickerInitRange(),services:[],events:[],packages:[],providerId:"",customerId:"",invoices:!0},statuses:[{value:"paid",label:this.$root.labels.paid},{value:"pending",label:this.$root.labels.pending},{value:"partiallyPaid",label:this.$root.labels.partially_paid}],selectedPaymentModalData:{paymentId:null,bookingStart:null,bookings:null,service:null,providers:null,customer:null},filterPaymentsFields:!0,filterTaxesFields:!0,searchTaxesPlaceholder:this.$root.labels.finance_taxes_search_placeholder,filterCouponsFields:!0,searchCouponsPlaceholder:this.$root.labels.finance_coupons_search_placeholder,filterInvoicesFields:!0,financeTabs:"payments",payments:[],taxes:[],coupons:[],invoices:[],timer:null,cancelSource:null}},created:function(){o.a.defaults.axios=this.$http,this.$root.licence.isBasic||this.$root.licence.isStarter||this.$root.licence.isLite||this.statuses.push({value:"refunded",label:this.$root.labels.refunded});var t=this.getUrlQueryParams(window.location.href);this.paymentsParams.dates="dateFrom"in t&&"dateTo"in t?{start:this.$moment(t.dateFrom).toDate(),end:this.$moment(t.dateTo).toDate()}:this.getDatePickerInitRange(),t.status&&(this.paymentsParams.status=t.status),this.getPayments(),this.$root.settings.payments.taxes.enabled&&this.getTaxes(),this.$root.settings.payments.coupons&&this.getCoupons(),this.getInvoices(),this.handleResize(),this.getFinanceOptions()},mounted:function(){this.inlineSVG(),this.$root.settings.payments.wc&&this.$root.settings.payments.wc.enabled&&this.exportParamsPayments.fields.push({label:this.$root.labels.wc_order_id,value:"wcOrderId",checked:!0})},methods:{getExportData:function(){return this.paymentsParams.dates||(this.paymentsParams.dates={start:"",end:""}),Object.assign(this.paymentsParams,this.exportParamsPayments)},clearDateFilter:function(){this.paymentsParams.dates=null,this.paymentsParams.page=1,this.filterPayments()},clearInvoiceDateFilter:function(){this.invoiceParams.dates=null,this.invoiceParams.page=1,this.filterInvoices()},getBookableName:function(t){return t.secondaryPayments&&Object.values(t.secondaryPayments).length>0?t.name===Object.values(t.secondaryPayments)[0].name?t.name:t.name+" +"+Object.values(t.secondaryPayments).length:t.name},getPaymentsStatusAndTotal:function(t){var e=[t].concat(t.secondaryPayments?Object.values(t.secondaryPayments):[]),a={};e.forEach(function(e){var s=t.type+"_"+(e.packageCustomerId?e.packageCustomerId:e.customerBookingId);s in a?a[s].booking.payments.push(e):a[s]={booking:{price:e.bookedPrice,aggregatedPrice:e.aggregatedPrice,persons:e.persons,extras:e.extras,coupon:e.coupon,tax:e.bookedTax,payments:[e]}}});var s=this.getPaymentAmountData(Object.values(a),t.type),i=s.total;if(e.every(function(t){return"refunded"===t.status}))return{status:"refunded",total:i};var n=s.paid;return n>=i.toFixed(2)?{status:"paid",total:i}:n>0?{status:"partiallyPaid",total:i}:{status:"pending",total:i}},savedTax:function(){this.updateStashEntities({}),this.getTaxes()},savedCoupon:function(){this.updateStashEntities({}),this.getCoupons()},formatForFetch:function(t){var e=[];return t.dates&&(t.dates.start&&e.push(this.$moment(t.dates.start).format("YYYY-MM-DD")),t.dates.end&&e.push(this.$moment(t.dates.end).format("YYYY-MM-DD")),t.dates=e),Object.keys(t).forEach(function(e){return!t[e]&&0!==t[e]&&delete t[e]}),t},getPayments:function(){var t=this;this.paymentsFiltering=!0,this.fetchedFilteredPayments=!1,this.cancelSource&&this.cancelSource.cancel();var e=JSON.parse(JSON.stringify(this.paymentsParams));e=this.formatForFetch(e),this.cancelSource=this.$http.CancelToken.source(),this.$http.get(this.$root.getAjaxUrl+"/payments",{params:this.getAppropriateUrlParams(e),cancelToken:this.cancelSource.token}).then(function(e){var a=t.options.entities.customers.map(function(t){return t.id}),s=t.options.entities.customers,i=t;e.data.data.payments.forEach(function(t){t.checked=!1;var e=i.getPaymentsStatusAndTotal(t);t.fullStatus=e.status,-1===a.indexOf(t.customerId)&&s.push({id:t.customerId,firstName:t.customerFirstName,lastName:t.customerLastName,email:t.customerEmail})}),t.options.entities.customers=Object.values(s),t.payments=e.data.data.payments,t.paymentsFilteredCount=e.data.data.filteredCount,t.paymentsTotalCount=e.data.data.totalCount,t.cancelSource=null,t.paymentsFiltering=!1,t.fetchedFilteredPayments=!0}).catch(function(e){console.log(e.message),t.$http.isCancel(e)||(t.paymentsFiltering=!1,t.fetchedFilteredPayments=!0)})},getInvoices:function(){var t=this;if(this.$root.licence.isLite||this.$root.licence.isStarter)return this.invoicesFiltering=!1,void(this.fetchedFilteredInvoices=!1);this.invoicesFiltering=!0,this.fetchedFilteredInvoices=!1;var e=JSON.parse(JSON.stringify(this.invoiceParams));e=this.formatForFetch(e),this.$http.get(this.$root.getAjaxUrl+"/payments",{params:this.getAppropriateUrlParams(e)}).then(function(e){var a=t;e.data.data.payments.forEach(function(t){var e=a.getPaymentsStatusAndTotal(t);t.fullStatus=e.status,t.total=e.total}),t.invoices=e.data.data.payments,t.invoicesFilteredCount=e.data.data.filteredCount,t.invoicesTotalCount=e.data.data.totalCount,t.invoicesFiltering=!1,t.fetchedFilteredInvoices=!0}).catch(function(e){console.log(e.message),t.invoicesFiltering=!1,t.fetchedFilteredInvoices=!0})},getTotal:function(){switch(this.financeTabs){case"payments":return this.paymentsFilteredCount;case"coupons":return this.couponsFilteredCount;case"taxes":return this.taxesFilteredCount;case"invoices":return this.invoicesFilteredCount}},getFinanceOptions:function(){var t=this;this.options.fetched=!1,this.searchCustomers("",function(){var e=t.options.entities.customers.map(function(t){return parseInt(t.id)}),a=t.options.entities.customers;t.searchedCustomers.forEach(function(s){-1===e.indexOf(parseInt(s.id))&&(e.push(s.id),a.push(s)),t.customersNoShowCount.push({customerId:s.id,noShowCount:s.noShowCount})}),t.options.entities.customers=Object.values(a)}),this.$http.get(this.$root.getAjaxUrl+"/entities",{params:this.getAppropriateUrlParams({types:["categories","employees","events","packages"]})}).then(function(e){t.options.entities=e.data.data,t.options.entities.services=t.getServicesFromCategories(t.options.entities.categories);var a=[];t.options.entities.services.forEach(function(t){a=a.concat(t.extras)}),t.options.entities.extras=a,t.setEntitiesToTaxes(),t.options.fetched=!0,t.searchedEvents=t.options.entities.events}).catch(function(e){console.log(e.message),t.options.fetched=!0})},setEntitiesToTaxes:function(){var t=this;this.taxes.forEach(function(e,a){["service","extra","event","package"].forEach(function(s){e[s+"List"].forEach(function(e,i){var n=t.options.entities[s+"s"].find(function(t){return t.id===e.id});void 0!==(void 0===n?"undefined":N(n))&&n&&(t.taxes[a][s+"List"][i]=n)})})})},getTaxes:function(){var t=this;if(this.$root.licence.isLite||this.$root.licence.isStarter)return this.taxesFiltering=!1,void(this.fetchedFilteredTaxes=!1);this.taxesFiltering=!0,this.fetchedFilteredTaxes=!1;var e=JSON.parse(JSON.stringify(this.taxesParams));Object.keys(e).forEach(function(t){return!e[t]&&0!==e[t]&&delete e[t]}),this.$http.get(this.$root.getAjaxUrl+"/taxes",{params:e}).then(function(e){e.data.data.taxes.forEach(function(t){t.checked=!1}),t.taxes=e.data.data.taxes,t.taxesFilteredCount=e.data.data.filteredCount,t.taxesTotalCount=e.data.data.totalCount,t.setEntitiesToTaxes(),t.taxesFiltering=!1,t.fetchedFilteredTaxes=!0}).catch(function(e){console.log(e.message),t.taxesFiltering=!1,t.fetchedFilteredTaxes=!0})},getCoupons:function(){var t=this;if(this.$root.licence.isLite)return this.couponsFiltering=!1,void(this.fetchedFilteredCoupons=!1);this.couponsFiltering=!0,this.fetchedFilteredCoupons=!1;var e=JSON.parse(JSON.stringify(this.couponsParams));Object.keys(e).forEach(function(t){return!e[t]&&0!==e[t]&&delete e[t]}),this.$http.get(this.$root.getAjaxUrl+"/coupons",{params:e}).then(function(e){e.data.data.coupons.forEach(function(t){t.checked=!1}),t.coupons=e.data.data.coupons,t.couponsFilteredCount=e.data.data.filteredCount,t.couponsTotalCount=e.data.data.totalCount,t.couponsFiltering=!1,t.fetchedFilteredCoupons=!0}).catch(function(e){console.log(e.message),t.couponsFiltering=!1,t.fetchedFilteredCoupons=!0})},getPaymentAppointment:function(t,e){var a=this;this.$http.get(this.$root.getAjaxUrl+"/appointments/"+t.appointmentId,{params:{customerId:t.customerId}}).then(function(s){a.selectedPaymentModalData=a.getPaymentData(t,s.data.data.appointment,null,null,e?s.data.data.recurring:[]),a.selectedPaymentModalData.recurring=s.data.data.recurring,a.bookingFetched=!0}).catch(function(t){console.log(t.message)})},getEvent:function(t){var e=this;this.$http.get(this.$root.getAjaxUrl+"/events/"+t.eventId).then(function(a){e.selectedPaymentModalData=e.getPaymentData(t,null,a.data.data.event,null),e.bookingFetched=!0}).catch(function(t){console.log(t.message)})},getPackage:function(t){var e={package:{name:t.name},booking:{price:t.bookedPrice,payments:[t].concat(t.secondaryPayments?Object.values(t.secondaryPayments):[]),extras:[],tax:t.bookedTax?JSON.parse(t.bookedTax):null}};this.selectedPaymentModalData=this.getPaymentData(t,null,null,e),this.bookingFetched=!0},getTax:function(t){var e=this;this.$http.get(this.$root.getAjaxUrl+"/taxes/"+t).then(function(t){var a=t.data.data.tax,s=e.options.entities.services.map(function(t){return t.id});a.serviceList=a.serviceList.filter(function(t){return-1!==s.indexOf(t.id)});var i=[];e.options.entities.services.forEach(function(t){i=i.concat(t.extras.map(function(t){return t.id}))}),a.extraList=a.extraList.filter(function(t){return-1!==i.indexOf(t.id)});var n=e.options.entities.events.map(function(t){return t.id});a.eventList=a.eventList.filter(function(t){return-1!==n.indexOf(t.id)});var o=e.options.entities.packages.map(function(t){return t.id});a.packageList=a.packageList.filter(function(t){return-1!==o.indexOf(t.id)}),e.tax=a,e.taxFetched=!0}).catch(function(t){console.log(t.message)})},getCoupon:function(t){var e=this;this.$http.get(this.$root.getAjaxUrl+"/coupons/"+t).then(function(t){var a=t.data.data.coupon;a.expirationDate=a.expirationDate?e.getDate(a.expirationDate):null;var s=e.options.entities.events.map(function(t){return t.id});a.eventList=a.eventList.filter(function(t){return-1!==s.indexOf(t.id)});var i=e.options.entities.packages.map(function(t){return t.id});a.packageList=a.packageList.filter(function(t){return-1!==i.indexOf(t.id)}),e.coupon=a,e.couponFetched=!0}).catch(function(t){console.log(t.message)})},paymentGroupDeleteCallback:function(){this.checkPaymentData.allChecked=!1,this.checkPaymentData.toaster=!1,this.getPayments()},taxGroupDeleteCallback:function(){this.checkTaxData.allChecked=!1,this.checkTaxData.toaster=!1,this.updateStashEntities({}),this.getTaxes()},couponGroupDeleteCallback:function(){this.checkCouponData.allChecked=!1,this.checkCouponData.toaster=!1,this.updateStashEntities({}),this.getCoupons()},changeRange:function(){this.setDatePickerSelectedDaysCount(this.paymentsParams.dates.start,this.paymentsParams.dates.end),this.filterPayments()},changeRangeInvoices:function(){this.setDatePickerSelectedDaysCount(this.invoiceParams.dates.start,this.invoiceParams.dates.end),this.invoiceParams.page=1,this.filterInvoices()},filterPayments:function(){this.getPayments()},filterTaxes:function(){this.getTaxes()},filterCoupons:function(){this.getCoupons()},filterInvoices:function(){this.getInvoices()},updatePaymentCallback:function(){this.dialogPayment=!1,this.getPayments()},duplicateTaxCallback:function(t){var e=this;setTimeout(function(){e.$set(e,"tax",t),e.$set(e.tax,"id",0),e.dialogTax=!0},300)},duplicateCouponCallback:function(t){var e=this;setTimeout(function(){e.$set(e,"coupon",t),e.$set(e.coupon,"id",0),e.dialogCoupon=!0},300)},handleResize:function(){this.filterPaymentsFields=window.innerWidth>=992,this.filterTaxesFields=window.innerWidth>=992,this.filterCouponsFields=window.innerWidth>=992},showDialogNewTax:function(){this.tax=this.getInitTaxObject(),this.dialogTax=!0},showDialogNewCoupon:function(){this.coupon=this.getInitCouponObject(),this.dialogCoupon=!0},showDialogEditTax:function(t){this.dialogTax=!0,this.getTax(t)},showDialogEditCoupon:function(t){this.dialogCoupon=!0,this.getCoupon(t)},showDialogEditPayment:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.dialogPayment=!0,this.invoiceInDialog=e,t.appointmentId&&this.getPaymentAppointment(t,e),t.eventId&&this.getEvent(t),t.packageId&&this.getPackage(t)},handleTabClick:function(t){"coupons"===t.name?(this.addNewTaxBtnDisplay=!1,this.addNewCouponBtnDisplay=!0):"taxes"===t.name?(this.addNewTaxBtnDisplay=!0,this.addNewCouponBtnDisplay=!1):"invoices"===t.name?(this.addNewCouponBtnDisplay=!1,this.addNewTaxBtnDisplay=!1):(this.addNewTaxBtnDisplay=!1,this.addNewCouponBtnDisplay=!1)},selectAllInCategoryFinance:function(t){var e=this.getCategoryServices(t).map(function(t){return t.id});_.isEqual(_.intersection(e,this.paymentsParams.services),e)?this.paymentsParams.services=_.difference(this.paymentsParams.services,e):this.paymentsParams.services=_.uniq(this.paymentsParams.services.concat(e)),this.filterPayments()},selectAllInCategoryTaxes:function(t){var e=this.getCategoryServices(t).map(function(t){return t.id});_.isEqual(_.intersection(e,this.taxesParams.services),e)?this.taxesParams.services=_.difference(this.taxesParams.services,e):this.taxesParams.services=_.uniq(this.taxesParams.services.concat(e)),this.filterTaxes()},selectAllInServiceTaxes:function(t){var e=this.getServiceById(t).extras.map(function(t){return t.id});_.isEqual(_.intersection(e,this.taxesParams.extras),e)?this.taxesParams.extras=_.difference(this.taxesParams.extras,e):this.taxesParams.extras=_.uniq(this.taxesParams.extras.concat(e)),this.filterTaxes()},selectAllInCategoryCoupons:function(t){var e=this.getCategoryServices(t).map(function(t){return t.id});_.isEqual(_.intersection(e,this.couponsParams.services),e)?this.couponsParams.services=_.difference(this.couponsParams.services,e):this.couponsParams.services=_.uniq(this.couponsParams.services.concat(e)),this.filterCoupons()},getInitTaxObject:function(){return{id:0,name:"",amount:0,type:"percentage",status:"visible",serviceList:[],extraList:[],eventList:[],packageList:[]}},getInitCouponObject:function(){return{id:0,code:"",discount:0,deduction:0,limit:0,customerLimit:0,status:"visible",notificationInterval:0,notificationRecurring:!1,serviceList:[],eventList:[],packageList:[]}},closeDialogPayment:function(){this.dialogPayment=!1,this.bookingFetched=!1},closeDialogTax:function(){this.tax=null,this.dialogTax=!1,this.taxFetched=!1},closeDialogCoupon:function(){this.coupon=null,this.dialogCoupon=!1,this.couponFetched=!1}},watch:{"taxesParams.search":function(){clearTimeout(this.timer),this.timer=setTimeout(this.filterTaxes,500)},"couponsParams.search":function(){clearTimeout(this.timer),this.timer=setTimeout(this.filterCoupons,500)},dialogPayment:function(){!1===this.dialogPayment&&(this.bookingFetched=!1)},dialogTax:function(){!1===this.dialogTax&&(this.taxFetched=!1,this.tax=null)},dialogCoupon:function(){!1===this.dialogCoupon&&(this.couponFetched=!1,this.coupon=null)}},computed:{hasPayments:function(){return 0!==this.paymentsTotalCount},hasPaymentsFiltered:function(){return 0!==this.payments.length},hasInvoices:function(){return 0!==this.invoicesTotalCount},hasInvoicesFiltered:function(){return 0!==this.invoices.length},isPaymentsFiltering:function(){return this.paymentsFiltering&&"payments"===this.financeTabs},isInvoicesFiltering:function(){return this.invoicesFiltering&&"invoices"===this.financeTabs},hasTaxes:function(){return 0!==this.taxesTotalCount},hasTaxesFiltered:function(){return 0!==this.taxes.length},isTaxesFiltering:function(){return this.taxesFiltering&&"taxes"===this.financeTabs},hasCoupons:function(){return 0!==this.couponsTotalCount},hasCouponsFiltered:function(){return 0!==this.coupons.length},isCouponsFiltering:function(){return this.couponsFiltering&&"coupons"===this.financeTabs}},components:{PageHeader:i.a,DialogTax:h.a,DialogCoupon:g.a,DialogPayment:b.a,DialogExport:C.a,GroupDelete:P.a,PaginationBlock:D.a}}},1396:function(t,e,a){var s=a(90)(a(1397),a(1398),!1,null,null,null);t.exports=s.exports},1397:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(681),i=a.n(s),n=a(654),o=a(658),l=a(657),r=a(336),c=a(699);a.n(c);e.default={mixins:[n.a,o.a,l.a,r.a],props:{tax:null,taxFetched:!1,taxes:null,services:null,extras:null,events:null,packages:null},data:function(){var t=this,e=function(e,a,s){0===t.tax.serviceList.length&&0===t.tax.extraList.length&&0===t.tax.eventList.length&&0===t.tax.packageList.length?s(new Error(t.$root.labels.no_entities_selected)):s()};return{allServicesSelected:!1,allExtrasSelected:!1,allEventsSelected:!1,allPackagesSelected:!1,dialogLoading:!0,showCustomerLimitInput:!1,amountTypes:[{value:"fixed",label:this.$root.labels.fixed_amount},{value:"percentage",label:this.$root.labels.percentage}],rules:{name:[{required:!0,message:this.$root.labels.enter_name_warning,trigger:"submit"}],amount:[{validator:function(e,a,s){0===t.tax.amount?s(new Error(t.$root.labels.no_tax_amount)):s()},trigger:"submit"}],services:[{validator:e,trigger:"submit"}],events:[{validator:e,trigger:"submit"}],packages:[{validator:e,trigger:"submit"}]}}},mounted:function(){this.instantiateDialog(),this.inlineSVG()},created:function(){this.inlineSVG()},updated:function(){this.inlineSVG()},methods:{instantiateDialog:function(){(null!==this.tax||null!==this.tax&&0===this.tax.id)&&(this.dialogLoading=!1)},getParsedEntity:function(){return{id:this.tax.id,name:this.tax.name,amount:this.tax.amount,type:this.tax.type,status:this.tax.status,events:this.tax.eventList.map(function(t){return t.id}),services:this.tax.serviceList.map(function(t){return t.id}),extras:this.tax.extraList.map(function(t){return t.id}),packages:this.tax.packageList.map(function(t){return t.id})}},closeDialog:function(){this.$emit("closeDialog")},getAvailableEntities:function(t){var e=this,a=[];this.taxes.forEach(function(s){e.tax.id&&e.tax.id===s.id||(a=a.concat(s[t+"List"].map(function(t){return t.id})))});var s=[];return this[t+"s"].forEach(function(t){s.push({disabled:-1!==a.indexOf(t.id),value:t})}),s},allExtrasSelection:function(){this.tax.extraList=(this.allExtrasSelected=!this.allExtrasSelected)?this.getAvailableEntities("extra").filter(function(t){return!t.disabled}).map(function(t){return t.value}):[]},allServicesSelection:function(){this.tax.serviceList=(this.allServicesSelected=!this.allServicesSelected)?this.getAvailableEntities("service").filter(function(t){return!t.disabled}).map(function(t){return t.value}):[]},allEventsSelection:function(){this.tax.eventList=(this.allEventsSelected=!this.allEventsSelected)?this.getAvailableEntities("event").filter(function(t){return!t.disabled}).map(function(t){return t.value}):[]},allPackagesSelection:function(){this.tax.packageList=(this.allPackagesSelected=!this.allPackagesSelected)?this.getAvailableEntities("package").filter(function(t){return!t.disabled}).map(function(t){return t.value}):[]},clearValidation:function(){void 0!==this.$refs.tax&&this.$refs.tax.clearValidate()}},watch:{taxFetched:function(){!0===this.taxFetched&&this.instantiateDialog()}},components:{DialogActions:i.a,Money:c.Money}}},1398:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"am-dialog-loader"},[a("div",{staticClass:"am-dialog-loader-content"},[a("img",{attrs:{src:t.$root.getUrl+"public/img/spinner.svg"}}),t._v(" "),a("p",[t._v(t._s(t.$root.labels.loader_message))])])]),t._v(" "),t.dialogLoading?t._e():a("div",{staticClass:"am-dialog-scrollable",class:{"am-edit":0!==t.tax.id}},[a("div",{staticClass:"am-dialog-header"},[a("el-row",[a("el-col",{attrs:{span:18}},[0!==t.tax.id?a("h2",[t._v(t._s(t.$root.labels.edit_tax))]):a("h2",[t._v(t._s(t.$root.labels.new_tax))])]),t._v(" "),a("el-col",{staticClass:"align-right",attrs:{span:6}},[a("el-button",{staticClass:"am-dialog-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:t.closeDialog}})],1)],1)],1),t._v(" "),a("el-form",{ref:"tax",attrs:{model:t.tax,rules:t.rules,"label-position":"top"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("el-form-item",{attrs:{label:"placeholder",prop:"name"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n          "+t._s(t.$root.labels.name)+":\n        ")]),t._v(" "),a("el-input",{attrs:{placeholder:t.$root.labels.name},on:{input:function(e){return t.clearValidation()}},model:{value:t.tax.name,callback:function(e){t.$set(t.tax,"name",e)},expression:"tax.name"}})],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.type)+":\n            ")]),t._v(" "),a("el-select",{attrs:{placeholder:""},model:{value:t.tax.type,callback:function(e){t.$set(t.tax,"type",e)},expression:"tax.type"}},t._l(t.amountTypes,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$root.labels.rate+("fixed"===t.tax.type?" ("+t.getCurrencySymbol()+")":"")+("percentage"===t.tax.type?" (%)":"")+":",prop:"amount"}},["fixed"===t.tax.type?a("div",{staticClass:"el-input"},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.tax.amount,callback:function(e){t.$set(t.tax,"amount",e)},expression:"tax.amount"}},"money",t.moneyComponentData,!1))],1):t._e(),t._v(" "),"percentage"===t.tax.type?a("el-input-number",{attrs:{min:0,max:100},model:{value:t.tax.amount,callback:function(e){t.$set(t.tax,"amount",e)},expression:"tax.amount"}}):t._e()],1)],1)],1),t._v(" "),t.services.length>0?a("el-form-item",{attrs:{label:"placeholder",prop:"services"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n          "+t._s(t.$root.labels.services)+":\n        ")]),t._v(" "),a("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_service,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.tax.serviceList,callback:function(e){t.$set(t.tax,"serviceList",e)},expression:"tax.serviceList"}},[a("div",{staticClass:"am-drop-parent",on:{click:t.allServicesSelection}},[a("span",[t._v(t._s(t.$root.labels.select_all_services))])]),t._v(" "),t._l(t.getAvailableEntities("service"),function(t){return a("el-option",{key:t.value.id,attrs:{disabled:t.disabled,label:t.value.name,value:t.value}})})],2)],1):t._e(),t._v(" "),t.extras.length>0?a("el-form-item",{attrs:{label:"placeholder",prop:"extras"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n          "+t._s(t.$root.labels.extras)+":\n        ")]),t._v(" "),a("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_extra,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.tax.extraList,callback:function(e){t.$set(t.tax,"extraList",e)},expression:"tax.extraList"}},[a("div",{staticClass:"am-drop-parent",on:{click:t.allExtrasSelection}},[a("span",[t._v(t._s(t.$root.labels.select_all_extras))])]),t._v(" "),t._l(t.getAvailableEntities("extra"),function(t){return a("el-option",{key:t.value.id,attrs:{disabled:t.disabled,label:t.value.name,value:t.value}})})],2)],1):t._e(),t._v(" "),t.events.length>0?a("el-form-item",{attrs:{label:"placeholder",prop:"events"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n          "+t._s(t.$root.labels.events)+":\n        ")]),t._v(" "),a("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_event,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.tax.eventList,callback:function(e){t.$set(t.tax,"eventList",e)},expression:"tax.eventList"}},[a("div",{staticClass:"am-drop-parent",on:{click:t.allEventsSelection}},[a("span",[t._v(t._s(t.$root.labels.select_all_events))])]),t._v(" "),t._l(t.getAvailableEntities("event"),function(e){return a("el-option",{key:e.value.id,attrs:{disabled:e.disabled,label:e.value.name+(e.value.periods&&e.value.periods.length?" ("+t.getFrontedFormattedDate(e.value.periods[0].periodStart.split(" ")[0])+")":""),value:e.value}})})],2)],1):t._e(),t._v(" "),t.packages.length>0?a("el-form-item",{attrs:{label:"placeholder",prop:"packages"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n          "+t._s(t.$root.labels.packages)+":\n        ")]),t._v(" "),a("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_package,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.tax.packageList,callback:function(e){t.$set(t.tax,"packageList",e)},expression:"tax.packageList"}},[a("div",{staticClass:"am-drop-parent",on:{click:t.allPackagesSelection}},[a("span",[t._v(t._s(t.$root.labels.select_all_packages))])]),t._v(" "),t._l(t.getAvailableEntities("package"),function(t){return a("el-option",{key:t.value.id,attrs:{disabled:t.disabled,label:t.value.name,value:t.value}})})],2)],1):t._e()],1)],1),t._v(" "),t.dialogLoading?t._e():a("dialog-actions",{attrs:{formName:"tax",urlName:"taxes",isNew:0===t.tax.id,entity:t.tax,getParsedEntity:t.getParsedEntity,hasIcons:!0,status:{on:"visible",off:"hidden"},buttonText:{confirm:{status:{yes:t.$root.labels.visibility_hide,no:t.$root.labels.visibility_show}}},action:{haveAdd:!0,haveEdit:!0,haveStatus:!0,haveRemove:!0===t.$root.settings.capabilities.canDelete,haveRemoveEffect:!1,haveDuplicate:!1},message:{success:{save:t.$root.labels.tax_saved,remove:t.$root.labels.tax_deleted,show:t.$root.labels.tax_visible,hide:t.$root.labels.tax_hidden},confirm:{remove:t.$root.labels.confirm_delete_tax,show:t.$root.labels.confirm_show_tax,hide:t.$root.labels.confirm_hide_tax,duplicate:t.$root.labels.confirm_duplicate_tax}}}})],1)},staticRenderFns:[]}},1399:function(t,e,a){var s=a(90)(a(1400),a(1401),!1,null,null,null);t.exports=s.exports},1400:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(681),i=a.n(s),n=a(654),o=a(658),l=a(657),r=a(336);e.default={mixins:[n.a,o.a,l.a,r.a],props:{coupon:null,couponFetched:!1,services:null,events:null,packages:null},data:function(){var t=this,e=function(e,a,s){0===t.coupon.discount&&0===t.coupon.deduction?s(new Error(t.$root.labels.no_coupon_amount)):s()},a=function(e,a,s){0===t.coupon.serviceList.length&&0===t.coupon.eventList.length&&(t.$root.licence.isPro||t.$root.licence.isDeveloper)&&0===t.coupon.packageList.length?s(new Error(t.$root.labels.no_entities_selected)):s()};return{couponTabs:"details",allServicesSelected:!1,allEventsSelected:!1,allPackagesSelected:!1,dialogLoading:!0,showCustomerLimitInput:!1,rules:{code:[{required:!0,message:this.$root.labels.enter_coupon_code_warning,trigger:"submit"}],discount:[{validator:e,trigger:"submit"}],deduction:[{validator:e,trigger:"submit"}],services:[{validator:a,trigger:"submit"}],events:[{validator:a,trigger:"submit"}],packages:[{validator:a,trigger:"submit"}],limit:[{validator:function(e,a,s){t.coupon.limit<=0?s(new Error(t.$root.labels.coupon_usage_limit_validation)):s()},trigger:"submit"}]}}},mounted:function(){this.instantiateDialog(),this.inlineSVG()},created:function(){this.inlineSVG()},updated:function(){this.inlineSVG()},methods:{limitChanged:function(){this.setWholeNumber(),this.coupon.limit<this.coupon.customerLimit&&(this.coupon.customerLimit=this.coupon.limit)},customerLimitChanged:function(){this.setWholeNumber()},setUnlimitedTextValue:function(){0===this.coupon.customerLimit&&this.coupon.limit>99?(setTimeout(function(){var t=document.querySelectorAll("div#limitId div input");t.length&&"value"in t[0]&&(t[0].value="")},100),this.showCustomerLimitInput=!0):this.coupon.customerLimit>0&&this.coupon.limit>99?this.showCustomerLimitInput=!0:this.showCustomerLimitInput=!1},setWholeNumber:function(){this.coupon.limit=Math.floor(this.coupon.limit),this.coupon.customerLimit=Math.floor(this.coupon.customerLimit),this.setUnlimitedTextValue()},instantiateDialog:function(){(null!==this.coupon||null!==this.coupon&&0===this.coupon.id)&&(this.dialogLoading=!1,this.setUnlimitedTextValue(),this.coupon.allServices&&this.coupon.serviceList.length!==this.services.length&&(this.coupon.serviceList=this.services),this.coupon.allEvents&&this.coupon.eventList.length!==this.services.length&&(this.coupon.eventList=this.events),this.coupon.allPackages&&this.coupon.packageList.length!==this.packages.length&&(this.coupon.packageList=this.packages))},getParsedEntity:function(){return this.coupon.expirationDate&&(this.coupon.expirationDate=this.getDatabaseFormattedDate(this.coupon.expirationDate)),{id:this.coupon.id,code:this.coupon.code,discount:this.coupon.discount,deduction:this.coupon.deduction,limit:this.coupon.limit,customerLimit:this.coupon.customerLimit,notificationInterval:this.coupon.notificationInterval,notificationRecurring:this.coupon.notificationRecurring,status:this.coupon.status,events:this.coupon.eventList.map(function(t){return t.id}),services:this.coupon.serviceList.map(function(t){return t.id}),packages:this.$root.licence.isPro||this.$root.licence.isDeveloper?this.coupon.packageList.map(function(t){return t.id}):[],expirationDate:this.coupon.expirationDate,allServices:this.services.length&&this.coupon.serviceList.length===this.services.length,allEvents:this.events.length&&this.coupon.eventList.length===this.events.length,allPackages:this.$root.licence.isPro||this.$root.licence.isDeveloper?this.packages.length&&this.coupon.packageList.length===this.packages.length:null}},closeDialog:function(){this.$emit("closeDialog")},allServicesSelection:function(){this.coupon.serviceList=(this.allServicesSelected=!this.allServicesSelected)?this.services:[],this.coupon.allServices=this.allServicesSelected},allEventsSelection:function(){this.coupon.eventList=(this.allEventsSelected=!this.allEventsSelected)?this.events:[],this.coupon.allEvents=this.allEventsSelected},allPackagesSelection:function(){this.coupon.packageList=(this.allPackagesSelected=!this.allPackagesSelected)?this.packages:[],this.coupon.allPackages=this.allPackagesSelected},clearValidation:function(){void 0!==this.$refs.coupon&&this.$refs.coupon.clearValidate()}},watch:{couponFetched:function(){!0===this.couponFetched&&this.instantiateDialog()}},components:{DialogActions:i.a}}},1401:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"am-dialog-loader"},[a("div",{staticClass:"am-dialog-loader-content"},[a("img",{attrs:{src:t.$root.getUrl+"public/img/spinner.svg"}}),t._v(" "),a("p",[t._v(t._s(t.$root.labels.loader_message))])])]),t._v(" "),t.dialogLoading?t._e():a("div",{staticClass:"am-dialog-scrollable",class:{"am-edit":0!==t.coupon.id}},[a("div",{staticClass:"am-dialog-header"},[a("el-row",[a("el-col",{attrs:{span:18}},[0!==t.coupon.id?a("h2",[t._v(t._s(t.$root.labels.edit_coupon))]):a("h2",[t._v(t._s(t.$root.labels.new_coupon))])]),t._v(" "),a("el-col",{staticClass:"align-right",attrs:{span:6}},[a("el-button",{staticClass:"am-dialog-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:t.closeDialog}})],1)],1)],1),t._v(" "),a("el-form",{ref:"coupon",attrs:{model:t.coupon,rules:t.rules,"label-position":"top"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("el-tabs",{model:{value:t.couponTabs,callback:function(e){t.couponTabs=e},expression:"couponTabs"}},[a("el-tab-pane",{attrs:{label:t.$root.labels.details,name:"details"}},[a("el-form-item",{attrs:{label:"placeholder",prop:"code"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.code)+":\n              "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.code_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-input",{attrs:{placeholder:t.$root.labels.code},on:{input:function(e){return t.clearValidation()}},model:{value:t.coupon.code,callback:function(e){t.$set(t.coupon,"code",e)},expression:"coupon.code"}})],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$root.labels.discount+":",prop:"discount"}},[a("el-input-number",{attrs:{min:0,max:100},on:{input:function(e){return t.clearValidation()}},model:{value:t.coupon.discount,callback:function(e){t.$set(t.coupon,"discount",e)},expression:"coupon.discount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$root.labels.deduction+" ("+t.getCurrencySymbol()+"):",prop:"deduction"}},[a("el-input-number",{attrs:{min:0},on:{input:function(e){return t.clearValidation()}},model:{value:t.coupon.deduction,callback:function(e){t.$set(t.coupon,"deduction",e)},expression:"coupon.deduction"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"placeholder",prop:"limit"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.usage_limit)+":\n              "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.usage_limit_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-input-number",{attrs:{min:0,max:1e13},on:{input:function(e){return t.clearValidation()},change:t.limitChanged},model:{value:t.coupon.limit,callback:function(e){t.$set(t.coupon,"limit",e)},expression:"coupon.limit"}})],1),t._v(" "),t.showCustomerLimitInput?a("el-form-item",{attrs:{label:"placeholder",prop:"customerLimit"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.usage_customer_limit)+":\n              "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.usage_customer_limit_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-input-number",{attrs:{id:"limitId",min:0,max:t.coupon.limit,placeholder:t.$root.labels.unlimited},on:{input:function(e){return t.clearValidation()},change:t.customerLimitChanged},model:{value:t.coupon.customerLimit,callback:function(e){t.$set(t.coupon,"customerLimit",e)},expression:"coupon.customerLimit"}})],1):t._e(),t._v(" "),t.showCustomerLimitInput?t._e():a("el-form-item",{attrs:{label:"placeholder"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.usage_customer_limit)+":\n              "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.usage_customer_limit_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-select",{model:{value:t.coupon.customerLimit,callback:function(e){t.$set(t.coupon,"customerLimit",e)},expression:"coupon.customerLimit"}},[a("el-option",{key:0,attrs:{label:t.$root.labels.unlimited,value:0}}),t._v(" "),t._l(t.coupon.limit,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"placeholder"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.expiration_date)+":\n            ")]),t._v(" "),a("v-date-picker",{attrs:{clearable:"",mode:"single","popover-visibility":"focus","popover-direction":"top","show-day-popover":!1,"input-props":{class:"el-input__inner",readOnly:"readonly"},disabled:!1,"is-required":!1,formats:t.vCalendarFormats},model:{value:t.coupon.expirationDate,callback:function(e){t.$set(t.coupon,"expirationDate",e)},expression:"coupon.expirationDate"}}),t._v(" "),t.coupon.expirationDate?a("span",{staticClass:"am-v-date-picker-suffix el-input__suffix-inner",attrs:{disabled:!t.coupon.expirationDate},on:{click:function(e){t.coupon.expirationDate=null}}},[a("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close"})]):t._e()],1),t._v(" "),t.services.length>0?a("el-form-item",{attrs:{label:"placeholder",prop:"services"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.services)+":\n              "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.services_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_service,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.coupon.serviceList,callback:function(e){t.$set(t.coupon,"serviceList",e)},expression:"coupon.serviceList"}},[a("div",{staticClass:"am-drop-parent",on:{click:t.allServicesSelection}},[a("span",[t._v(t._s(t.$root.labels.select_all_services))])]),t._v(" "),t._l(t.services,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})})],2)],1):t._e(),t._v(" "),t.events.length>0?a("el-form-item",{attrs:{label:"placeholder",prop:"events"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.events)+":\n              "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.events_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_event,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.coupon.eventList,callback:function(e){t.$set(t.coupon,"eventList",e)},expression:"coupon.eventList"}},[a("div",{staticClass:"am-drop-parent",on:{click:t.allEventsSelection}},[a("span",[t._v(t._s(t.$root.labels.select_all_events))])]),t._v(" "),t._l(t.events,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+(e.periods&&e.periods.length?" ("+t.getFrontedFormattedDate(e.periods[0].periodStart.split(" ")[0])+")":""),value:e}})})],2)],1):t._e(),t._v(" "),(t.$root.licence.isPro||t.$root.licence.isDeveloper)&&t.packages.length>0?a("el-form-item",{attrs:{label:"placeholder",prop:"packages"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.packages)+":\n              "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.packages_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_package,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.coupon.packageList,callback:function(e){t.$set(t.coupon,"packageList",e)},expression:"coupon.packageList"}},[a("div",{staticClass:"am-drop-parent",on:{click:t.allPackagesSelection}},[a("span",[t._v(t._s(t.$root.labels.select_all_packages))])]),t._v(" "),t._l(t.packages,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})})],2)],1):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:t.$root.labels.notifications,name:"notifications"}},[a("el-form-item",{attrs:{label:"placeholder",prop:"notificationInterval"}},[a("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.send_interval)+":\n              "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.send_interval_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-input-number",{attrs:{min:0},on:{input:function(e){return t.clearValidation()},change:function(){t.coupon.notificationInterval||(t.coupon.notificationRecurring=!1)}},model:{value:t.coupon.notificationInterval,callback:function(e){t.$set(t.coupon,"notificationInterval",e)},expression:"coupon.notificationInterval"}})],1),t._v(" "),a("div",{staticClass:"am-setting-box am-switch-box"},[a("el-row",{attrs:{type:"flex",align:"middle",gutter:24,disabled:!0}},[a("el-col",{attrs:{span:19}},[t._v("\n                "+t._s(t.$root.labels.send_recurring)+"\n                "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.send_recurring_tooltip)},slot:"content"}),t._v(" "),a("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),a("el-col",{staticClass:"align-right",attrs:{span:5}},[a("el-switch",{attrs:{"active-text":"","inactive-text":"",disabled:!t.coupon.notificationInterval},model:{value:t.coupon.notificationRecurring,callback:function(e){t.$set(t.coupon,"notificationRecurring",e)},expression:"coupon.notificationRecurring"}})],1)],1)],1)],1)],1)],1)],1),t._v(" "),t.dialogLoading?t._e():a("dialog-actions",{attrs:{formName:"coupon",urlName:"coupons",isNew:0===t.coupon.id,entity:t.coupon,getParsedEntity:t.getParsedEntity,hasIcons:!0,status:{on:"visible",off:"hidden"},buttonText:{confirm:{status:{yes:t.$root.labels.visibility_hide,no:t.$root.labels.visibility_show}}},action:{haveAdd:!0,haveEdit:!0,haveStatus:!0,haveRemove:!0===t.$root.settings.capabilities.canDelete,haveRemoveEffect:!1,haveDuplicate:!0},message:{success:{save:t.$root.labels.coupon_saved,remove:t.$root.labels.coupon_deleted,show:t.$root.labels.coupon_visible,hide:t.$root.labels.coupon_hidden},confirm:{remove:t.$root.labels.confirm_delete_coupon,show:t.$root.labels.confirm_show_coupon,hide:t.$root.labels.confirm_hide_coupon,duplicate:t.$root.labels.confirm_duplicate_coupon}}}})],1)},staticRenderFns:[]}},1402:function(t,e){t.exports={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"am-wrap"},[s("div",{staticClass:"am-body",attrs:{id:"am-finance"}},[s("page-header",{attrs:{financeTotal:e.options.fetched?e.getTotal():0,addNewTaxBtnDisplay:!!e.options.fetched&&e.addNewTaxBtnDisplay,addNewCouponBtnDisplay:!!e.options.fetched&&e.addNewCouponBtnDisplay},on:{newTaxBtnClicked:function(t){return e.showDialogNewTax()},newCouponBtnClicked:function(t){return e.showDialogNewCoupon()}}}),e._v(" "),s("div",{staticClass:"am-finances am-section"},[s("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.financeTabs,callback:function(t){e.financeTabs=t},expression:"financeTabs"}},[s("el-tab-pane",{attrs:{label:e.$root.labels.payments,name:"payments"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasPayments&&e.options.fetched,expression:"hasPayments && options.fetched"}],staticClass:"am-finance-filter"},[s("el-form",{attrs:{action:e.exportPaymentsAction,method:"POST"}},[s("el-row",{attrs:{gutter:16}},[s("el-col",{staticClass:"v-calendar-column",attrs:{md:24,lg:5}},[s("el-form-item",{staticClass:"calc-width-mobile"},[s("v-date-picker",{attrs:{"is-double-paned":!0,mode:"range","popover-visibility":"focus","popover-direction":"bottom","tint-color":"#1A84EE","show-day-popover":!1,"input-props":{class:"el-input__inner"},"is-expanded":!1,"is-required":!0,"input-class":"el-input__inner",placeholder:e.$root.labels.pick_a_date,formats:e.vCalendarFormats},on:{input:e.changeRange},model:{value:e.paymentsParams.dates,callback:function(t){e.$set(e.paymentsParams,"dates",t)},expression:"paymentsParams.dates"}}),e._v(" "),e.paymentsParams.dates?s("span",{staticClass:"am-v-date-picker-suffix el-input__suffix-inner",on:{click:e.clearDateFilter}},[s("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close"})]):e._e()],1)],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.filterPaymentsFields,expression:"filterPaymentsFields"}],staticClass:"am-filter-fields"},[s("el-col",{attrs:{md:6,lg:4}},[s("el-form-item",[s("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$root.labels.customer,remote:"","remote-method":e.searchCustomers,loading:e.loadingCustomers},on:{change:e.filterPayments},model:{value:e.paymentsParams.customerId,callback:function(t){e.$set(e.paymentsParams,"customerId",t)},expression:"paymentsParams.customerId"}},e._l(e.searchedCustomers.length?e.searchedCustomers:e.options.entities.customers,function(t,e){return s("el-option",{key:e,attrs:{label:t.firstName+" "+t.lastName,value:t.id}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{md:6,lg:4}},[s("el-form-item",[s("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$root.labels.employee},on:{change:e.filterPayments},model:{value:e.paymentsParams.providerId,callback:function(t){e.$set(e.paymentsParams,"providerId",t)},expression:"paymentsParams.providerId"}},e._l(e.visibleEmployees,function(t){return s("el-option",{key:t.id,attrs:{label:t.firstName+" "+t.lastName,value:t.id}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{md:6,lg:4}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.services,"collapse-tags":""},on:{change:e.filterPayments},model:{value:e.paymentsParams.services,callback:function(t){e.$set(e.paymentsParams,"services",t)},expression:"paymentsParams.services"}},e._l(e.options.entities.categories,function(t){return s("div",{key:t.id},[s("div",{staticClass:"am-drop-parent",on:{click:function(a){return e.selectAllInCategoryFinance(t.id)}}},[s("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.serviceList,function(t){return s("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2)}),0)],1)],1),e._v(" "),s("el-col",{attrs:{md:6,lg:4}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",clearable:"",filterable:"","remote-method":e.searchEvents,loading:e.loadingEvents,remote:"",placeholder:e.$root.labels.events},on:{change:e.filterPayments},model:{value:e.paymentsParams.events,callback:function(t){e.$set(e.paymentsParams,"events",t)},expression:"paymentsParams.events"}},e._l(e.searchedEvents,function(t){return s("el-option",{key:t.id,attrs:{label:t.name+(t.periods&&t.periods.length?" ("+e.getFrontedFormattedDate(t.periods[0].periodStart.split(" ")[0])+")":""),value:t.id}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{md:6,lg:3}},[s("el-form-item",[s("el-select",{staticClass:"calc-width",attrs:{clearable:"",placeholder:e.$root.labels.status},on:{change:e.filterPayments},model:{value:e.paymentsParams.status,callback:function(t){e.$set(e.paymentsParams,"status",t)},expression:"paymentsParams.status"}},e._l(e.statuses,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[s("span",[e._v(e._s(t.label))])])}),1)],1)],1)],1)]),e._v(" "),s("div",{},[s("el-button",{staticClass:"button-filter-toggle am-button-icon",attrs:{title:"Toggle Filters"},on:{click:function(t){e.filterPaymentsFields=!e.filterPaymentsFields}}},[s("img",{staticClass:"svg-amelia",attrs:{alt:"Toggle Filters",src:e.$root.getUrl+"public/img/filter.svg"}})]),e._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$root.labels.export_tooltip_payments)},slot:"content"}),e._v(" "),s("el-button",{staticClass:"button-export am-button-icon",on:{click:function(t){e.dialogPaymentsExport=!0}}},[s("img",{staticClass:"svg-amelia",attrs:{alt:"Export",src:e.$root.getUrl+"public/img/export.svg"}})])],1)],1)],1),e._v(" "),s("transition",{attrs:{name:"slide"}},[e.dialogPaymentsExport?s("el-dialog",{staticClass:"am-side-dialog am-dialog-export",attrs:{"close-on-click-modal":!1,visible:e.dialogPaymentsExport,"show-close":!1},on:{"update:visible":function(t){e.dialogPaymentsExport=t}}},[s("dialog-export",{attrs:{data:e.getExportData(),action:e.$root.getAjaxUrl+"/report/payments"},on:{updateAction:function(e){t.exportPaymentsAction=e},closeDialogExport:function(t){e.dialogPaymentsExport=!1}}})],1):e._e()],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isPaymentsFiltering||!e.options.fetched,expression:"isPaymentsFiltering || !options.fetched"}],staticClass:"am-spinner am-section"},[s("img",{attrs:{src:e.$root.getUrl+"public/img/spinner.svg"}})]),e._v(" "),s("EmptyState",{attrs:{visible:!e.hasPayments&&!e.isPaymentsFiltering&&e.options.fetched,title:e.$root.labels.no_payments_yet}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasPayments&&e.hasPaymentsFiltered&&!e.isPaymentsFiltering&&e.options.fetched,expression:"hasPayments && hasPaymentsFiltered && !isPaymentsFiltering && options.fetched"}],staticClass:"am-finance-list-head"},[s("el-row",[s("el-col",{attrs:{lg:14}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?s("el-col",{attrs:{lg:2}},[s("p",[s("el-checkbox",{style:{display:"none"},on:{change:function(t){e.checkPaymentData=e.handleCheckAll(e.payments,e.checkPaymentData)}},model:{value:e.checkPaymentData.allChecked,callback:function(t){e.$set(e.checkPaymentData,"allChecked",t)},expression:"checkPaymentData.allChecked"}})],1)]):e._e(),e._v(" "),s("el-col",{attrs:{lg:6}},[s("p",[e._v(e._s(e.$root.labels.payment_date)+":")])]),e._v(" "),s("el-col",{attrs:{lg:8}},[s("p",[e._v(e._s(e.$root.labels.customer)+":")])]),e._v(" "),s("el-col",{attrs:{lg:8}},[s("p",[e._v(e._s(e.$root.labels.employee)+":")])])],1)],1),e._v(" "),s("el-col",{attrs:{lg:10}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0}}),e._v(" "),s("el-col",{attrs:{lg:12}},[s("p",[e._v(e._s(e.$root.labels.service)+"/"+e._s(e.$root.labels.event)+":")])]),e._v(" "),s("el-col",{attrs:{lg:12}},[s("p",[e._v(e._s(e.$root.labels.status)+":")])])],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasPayments&&e.hasPaymentsFiltered&&!e.isPaymentsFiltering&&e.options.fetched,expression:"hasPayments && hasPaymentsFiltered && !isPaymentsFiltering && options.fetched"}],staticClass:"am-finance-list"},[s("el-collapse",e._l(e.payments,function(t,a){return s("el-collapse-item",{key:t.id,staticClass:"am-finance",attrs:{name:t.id}},[s("template",{slot:"title"},[s("div",{staticClass:"am-finance-data"},[0===t.appointmentId?s("span",{staticClass:"am-entity-color am-event-color"}):s("span",{staticClass:"am-entity-color am-appointment-color"}),e._v(" "),s("el-row",[s("el-col",{attrs:{lg:14}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?s("el-col",{attrs:{lg:2,sm:1}},[s("span",{on:{click:function(t){t.stopPropagation()}}},[s("el-checkbox",{style:{display:"none"},on:{change:function(t){e.checkPaymentData=e.handleCheckSingle(e.payments,e.checkPaymentData)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"payment.checked"}})],1)]):e._e(),e._v(" "),s("el-col",{attrs:{lg:6,sm:6}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.payment_date)+":")]),e._v(" "),s("h4",[e._v(e._s(e.getFrontedFormattedDate(t.dateTime)))])]),e._v(" "),s("el-col",{attrs:{lg:8,sm:8}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.customer)+":")]),e._v(" "),s("h3",{class:e.getNoShowClass(t.customerId,null,null,t.customerStatus)},[e._v("\n                                "+e._s(t.customerFirstName+" "+t.customerLastName)+"\n                              ")]),e._v(" "),s("span",[e._v(e._s(t.customerEmail))])]),e._v(" "),s("el-col",{attrs:{lg:8,sm:8}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.employee)+":")]),e._v(" "),1===t.providers.length?s("div",{staticClass:"am-assigned"},[s("img",{attrs:{src:e.pictureLoad(e.getProviderById(t.providers[0].id),!0)},on:{error:function(a){e.imageLoadError(e.getProviderById(t.providers[0].id),!0)}}}),e._v(" "),s("h4",[e._v(e._s(null!==(e.user=e.getProviderById(t.providers[0].id))?e.user.firstName+" "+e.user.lastName:""))])]):e._e(),e._v(" "),t.providers.length>1?s("el-tooltip",{attrs:{placement:"top-start"}},[s("div",{staticClass:"am-all-event-employees",attrs:{slot:"content"},slot:"content"},e._l(t.providers,function(t){return s("div",{key:t.id},[e._v("\n                                    "+e._s(null!==(e.user=e.getProviderById(t.id))?e.user.firstName+" "+e.user.lastName:"")+"\n                                  ")])}),0),e._v(" "),s("div",{staticClass:"am-assigned am-multiple-employees"},[e._l(t.providers,function(t,a){return a<=4?s("img",{key:t.id,attrs:{src:e.pictureLoad(e.getProviderById(t.id),!0)},on:{error:function(a){e.imageLoadError(e.getProviderById(t.id),!0)}}}):e._e()}),e._v(" "),a>4&&t.providers.length-5>0?s("h4",[e._v(" + "+e._s(t.providers.length-5))]):e._e()],2)]):e._e()],1)],1)],1),e._v(" "),s("el-col",{attrs:{lg:10}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0,sm:1}}),e._v(" "),s("el-col",{staticClass:"am-payment-service",attrs:{lg:12,sm:14}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.service)+"/"+e._s(e.$root.labels.event)+":")]),e._v(" "),t.packageId?s("img",{attrs:{src:e.$root.getUrl+"public/img/am-package-black.svg"}}):e._e(),e._v(" "),s("h4",[e._v(e._s(t.name))])]),e._v(" "),s("el-col",{staticClass:"am-finance-payment-status",attrs:{lg:6,sm:5}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.status)+":")]),e._v(" "),s("div",{staticClass:"am-payment-status"},[s("span",{class:"am-payment-status-symbol am-payment-status-symbol-"+t.fullStatus}),e._v(" "),s("h4",[e._v("\n                                  "+e._s(e.getPaymentStatusNiceName(t.fullStatus))+"\n                                ")])])]),e._v(" "),s("el-col",{staticClass:"align-right",attrs:{lg:6,sm:4}},[s("div",{on:{click:function(t){t.stopPropagation()}}},[s("el-button",{on:{click:function(a){return e.showDialogEditPayment(t)}}},[e._v("\n                                  "+e._s(e.$root.labels.details)+"\n                                ")])],1)])],1)],1)],1)],1)]),e._v(" "),s("div",{staticClass:"am-finance-details"},[s("el-row",[s("el-col",{attrs:{lg:14}},[s("el-row",{staticClass:"am-finance-flex-row-top-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:2,sm:1}}),e._v(" "),s("el-col",{attrs:{lg:22,sm:23}},[s("p",{staticClass:"am-data"},[e._v("\n                              "+e._s(t.packageId?e.$root.labels.package_purchased:t.appointmentId?e.$root.labels.appointment_date:e.$root.labels.event_date)+":\n                            ")]),e._v(" "),s("p",{staticClass:"am-value"},[e._v("\n                            "+e._s(e.getFrontedFormattedDateTime(t.packageId?t.dateTime:t.bookingStart))+"\n                            ")])])],1)],1),e._v(" "),s("el-col",{attrs:{lg:10}},[s("el-row",{staticClass:"am-finance-flex-row-top-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0,sm:1}}),e._v(" "),s("el-col",{staticClass:"am-finance-payment-gateway",attrs:{lg:8,sm:8}},[s("p",{staticClass:"am-data"},[e._v(e._s(e.$root.labels.method)+":")]),e._v(" "),s("div",{staticStyle:{"margin-bottom":"8px"}},[s("img",{style:{width:e.getPaymentIconWidth(t.gateway)},attrs:{src:e.$root.getUrl+"public/img/payments/"+e.getPaymentIconName(t)}}),e._v(" "),e.longNamePayments(t.gateway)?e._e():s("p",{staticClass:"am-value"},[e._v(e._s(e.getPaymentGatewayNiceName(t)))])]),e._v(" "),e._l(t.secondaryPayments.filter(function(t){return"pending"!==t.status&&"refunded"!==t.status}),function(t){return s("div",{staticStyle:{"margin-bottom":"8px"}},[s("img",{style:{width:e.getPaymentIconWidth(t.gateway)},attrs:{src:e.$root.getUrl+"public/img/payments/"+e.getPaymentIconName(t)}}),e._v(" "),e.longNamePayments(t.gateway)?e._e():s("p",{staticClass:"am-value"},[e._v(e._s(e.getPaymentGatewayNiceName(t)))])])})],2),e._v(" "),s("el-col",{attrs:{lg:8,sm:8}},[s("p",{staticClass:"am-data"},[e._v(e._s(e.$root.labels.amount)+":")]),e._v(" "),s("p",{staticClass:"am-value"},[e._v(e._s(e.getFormattedPrice("paid"===t.status||"partiallyPaid"===t.status?t.amount:0)))]),e._v(" "),e._l(t.secondaryPayments.filter(function(t){return"pending"!==t.status&&"refunded"!==t.status}),function(a){return s("div",[s("p",{staticClass:"am-value"},[e._v(e._s(e.getFormattedPrice("paid"===t.status||"partiallyPaid"===t.status?a.amount:0)))])])})],2),e._v(" "),s("el-col",{attrs:{lg:8,sm:8}},[s("p",{staticClass:"am-data"},[e._v(e._s(e.$root.labels.id)+":")]),e._v(" "),s("p",{staticClass:"am-value"},[e._v(e._s(t.id))]),e._v(" "),e._l(t.secondaryPayments.filter(function(t){return"pending"!==t.status&&"refunded"!==t.status}),function(t){return s("div",[s("p",{staticClass:"am-value"},[e._v(e._s(t.id))])])})],2)],1)],1)],1)],1)],2)}),1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasPayments&&!e.hasPaymentsFiltered&&!e.isPaymentsFiltering&&e.options.fetched,expression:"hasPayments && !hasPaymentsFiltered && !isPaymentsFiltering && options.fetched"}],staticClass:"am-empty-state am-section"},[s("img",{attrs:{src:e.$root.getUrl+"public/img/emptystate.svg"}}),e._v(" "),s("h2",[e._v(e._s(e.$root.labels.no_results))])]),e._v(" "),s("pagination-block",{attrs:{params:e.paymentsParams,count:e.paymentsFilteredCount,show:e.paymentsParams.show,label:e.$root.labels.payments_lower,visible:e.hasPayments&&e.hasPaymentsFiltered&&!e.isPaymentsFiltering&&e.options.fetched},on:{change:e.filterPayments}})],1),e._v(" "),!e.$root.settings.payments.coupons||e.notInLicence("starter")&&!e.licenceVisible()?e._e():s("el-tab-pane",{attrs:{label:e.$root.labels.coupons,name:"coupons"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCoupons&&e.options.fetched,expression:"hasCoupons && options.fetched"}],staticClass:"am-finance-filter"},[s("el-form",{attrs:{action:e.exportCouponsAction,method:"POST"}},[s("el-row",{attrs:{gutter:16}},[s("el-col",{attrs:{md:24,lg:8}},[s("div",{staticClass:"am-search"},[s("el-form-item",[s("el-input",{staticClass:"calc-width-mobile",attrs:{placeholder:e.searchCouponsPlaceholder},model:{value:e.couponsParams.search,callback:function(t){e.$set(e.couponsParams,"search",t)},expression:"couponsParams.search"}})],1)],1)]),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.filterCouponsFields,expression:"filterCouponsFields"}],staticClass:"am-filter-fields"},[s("el-col",{attrs:{md:24,lg:8}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.services,"collapse-tags":""},on:{change:e.filterCoupons},model:{value:e.couponsParams.services,callback:function(t){e.$set(e.couponsParams,"services",t)},expression:"couponsParams.services"}},e._l(e.options.entities.categories,function(t){return s("div",{key:t.id},[s("div",{staticClass:"am-drop-parent",on:{click:function(a){return e.selectAllInCategoryCoupons(t.id)}}},[s("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.serviceList,function(t){return s("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2)}),0)],1)],1),e._v(" "),s("el-col",{attrs:{md:24,lg:7}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.events,"collapse-tags":""},on:{change:e.filterCoupons},model:{value:e.couponsParams.events,callback:function(t){e.$set(e.couponsParams,"events",t)},expression:"couponsParams.events"}},e._l(e.options.entities.events,function(t){return s("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name+(t.periods&&t.periods.length?" ("+e.getFrontedFormattedDate(t.periods[0].periodStart.split(" ")[0])+")":""),value:t.id}})}),1)],1)],1)],1)]),e._v(" "),s("div",{},[s("el-button",{staticClass:"button-filter-toggle am-button-icon",attrs:{title:"Toggle Filters"},on:{click:function(t){e.filterCouponsFields=!e.filterCouponsFields}}},[s("img",{staticClass:"svg-amelia",attrs:{alt:"Toggle Filters",src:e.$root.getUrl+"public/img/filter.svg"}})]),e._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$root.labels.export_tooltip_coupons)},slot:"content"}),e._v(" "),s("el-button",{staticClass:"button-export am-button-icon",on:{click:function(t){e.dialogCouponsExport=!0}}},[s("img",{staticClass:"svg-amelia",attrs:{alt:"Export",src:e.$root.getUrl+"public/img/export.svg"}})])],1)],1)],1),e._v(" "),s("transition",{attrs:{name:"slide"}},[e.dialogCouponsExport?s("el-dialog",{staticClass:"am-side-dialog am-dialog-export",attrs:{"close-on-click-modal":!1,visible:e.dialogCouponsExport,"show-close":!1},on:{"update:visible":function(t){e.dialogCouponsExport=t}}},[s("dialog-export",{attrs:{data:Object.assign(e.couponsParams,e.exportParamsCoupons),action:e.$root.getAjaxUrl+"/report/coupons"},on:{updateAction:function(e){t.exportCouponsAction=e},closeDialogExport:function(t){e.dialogCouponsExport=!1}}})],1):e._e()],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCouponsFiltering||!e.options.fetched,expression:"isCouponsFiltering || !options.fetched"}],staticClass:"am-spinner am-section"},[s("img",{attrs:{src:e.$root.getUrl+"public/img/spinner.svg"}})]),e._v(" "),s("EmptyState",{attrs:{visible:!e.hasCoupons&&!e.isCouponsFiltering,licence:"starter",title:e.$root.labels.no_coupons_yet}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCoupons&&e.hasCouponsFiltered&&!e.isCouponsFiltering&&e.options.fetched,expression:"hasCoupons && hasCouponsFiltered && !isCouponsFiltering && options.fetched"}],staticClass:"am-finance-list-head"},[s("el-row",[s("el-col",{attrs:{lg:e.$root.licence.isPro||e.$root.licence.isDeveloper?7:8}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?s("el-col",{attrs:{lg:2}},[s("p",[s("el-checkbox",{on:{change:function(t){e.checkCouponData=e.handleCheckAll(e.coupons,e.checkCouponData)}},model:{value:e.checkCouponData.allChecked,callback:function(t){e.$set(e.checkCouponData,"allChecked",t)},expression:"checkCouponData.allChecked"}})],1)]):e._e(),e._v(" "),s("el-col",{attrs:{lg:6}},[s("p",[e._v(e._s(e.$root.labels.code)+":")])]),e._v(" "),s("el-col",{attrs:{lg:8}},[s("p",[e._v(e._s(e.$root.labels.discount)+":")])]),e._v(" "),s("el-col",{attrs:{lg:8}},[s("p",[e._v(e._s(e.$root.labels.deduction)+":")])])],1)],1),e._v(" "),s("el-col",{attrs:{lg:e.$root.licence.isPro||e.$root.licence.isDeveloper?17:16}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0}}),e._v(" "),s("el-col",{attrs:{lg:e.$root.licence.isPro||e.$root.licence.isDeveloper?4:6}},[s("p",[e._v(e._s(e.$root.labels.service)+":")])]),e._v(" "),e.$root.licence.isPro||e.$root.licence.isDeveloper?s("el-col",{attrs:{lg:4}},[s("p",[e._v(e._s(e.$root.labels.package)+":")])]):e._e(),e._v(" "),s("el-col",{attrs:{lg:e.$root.licence.isPro||e.$root.licence.isDeveloper?4:6}},[s("p",[e._v(e._s(e.$root.labels.event)+":")])]),e._v(" "),s("el-col",{attrs:{lg:3}},[s("p",[e._v(e._s(e.$root.labels.usage_limit)+":")])]),e._v(" "),s("el-col",{attrs:{lg:3}},[s("p",[e._v(e._s(e.$root.labels.times_used)+":")])]),e._v(" "),s("el-col",{attrs:{lg:3}},[s("p",[e._v(e._s(e.$root.labels.expiration_date)+":")])])],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCoupons&&e.hasCouponsFiltered&&!e.isCouponsFiltering&&e.options.fetched,expression:"hasCoupons && hasCouponsFiltered && !isCouponsFiltering && options.fetched"}],staticClass:"am-finance-list"},e._l(e.coupons,function(t){return s("div",{class:{"am-coupon-row am-hidden-entity":"hidden"===t.status,"am-coupon-row":"visible"===t.status}},[s("el-row",[s("el-col",{attrs:{lg:e.$root.licence.isPro||e.$root.licence.isDeveloper?7:8}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?s("el-col",{attrs:{lg:2,sm:1}},[s("span",{on:{click:function(t){t.stopPropagation()}}},[s("el-checkbox",{on:{change:function(t){e.checkCouponData=e.handleCheckSingle(e.coupons,e.checkCouponData)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"coupon.checked"}})],1)]):e._e(),e._v(" "),s("el-col",{attrs:{lg:6,sm:9}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.code)+":")]),e._v(" "),s("h4",[e._v(e._s(t.code))])]),e._v(" "),s("el-col",{attrs:{lg:8,sm:5}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.discount)+":")]),e._v(" "),s("h4",[e._v(e._s(t.discount))])]),e._v(" "),s("el-col",{attrs:{lg:8,sm:5}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.deduction)+":")]),e._v(" "),s("h4",[e._v(e._s(e.getFormattedPrice(t.deduction)))])])],1)],1),e._v(" "),s("el-col",{attrs:{lg:e.$root.licence.isPro||e.$root.licence.isDeveloper?17:16}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0,sm:1}}),e._v(" "),s("el-col",{attrs:{lg:e.$root.licence.isPro||e.$root.licence.isDeveloper?4:6,sm:9}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.service)+":")]),e._v(" "),t.allServices?s("h4",[e._v(e._s(e.$root.labels.all_services))]):s("h4",[e._v("\n                          "+e._s(t.serviceList.length>0?t.serviceList[0].name:"")+"\n                          "),s("br"),e._v(" "),s("span",[e._v("\n                            "+e._s(t.serviceList.length>1?2===t.serviceList.length?"+"+(t.serviceList.length-1)+" "+e.$root.labels.service:"+"+(t.serviceList.length-1)+" "+e.$root.labels.services:"")+"\n                          ")])])]),e._v(" "),e.$root.licence.isPro||e.$root.licence.isDeveloper?s("el-col",{attrs:{lg:4,sm:9}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.package)+":")]),e._v(" "),t.allPackages?s("h4",[e._v(e._s(e.$root.labels.all_packages))]):s("h4",[e._v("\n                          "+e._s(t.packageList.length>0?t.packageList[0].name:"")+"\n                          "),s("br"),e._v(" "),s("span",[e._v("\n                            "+e._s(t.packageList.length>1?2===t.packageList.length?"+"+(t.packageList.length-1)+" "+e.$root.labels.package:"+"+(t.packageList.length-1)+" "+e.$root.labels.packages:"")+"\n                          ")])])]):e._e(),e._v(" "),s("el-col",{attrs:{lg:e.$root.licence.isPro||e.$root.licence.isDeveloper?4:6,sm:9}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.event)+":")]),e._v(" "),t.allEvents?s("h4",[e._v(e._s(e.$root.labels.all_events))]):s("h4",[e._v("\n                          "+e._s(t.eventList.length>0?t.eventList[0].name:"")+"\n                          "),s("br"),e._v(" "),s("span",[e._v("\n                            "+e._s(t.eventList.length>1?2===t.eventList.length?"+"+(t.eventList.length-1)+" "+e.$root.labels.event:"+"+(t.eventList.length-1)+" "+e.$root.labels.events:"")+"\n                          ")])])]),e._v(" "),s("el-col",{attrs:{lg:3,sm:5}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.usage_limit)+":")]),e._v(" "),s("h4",[e._v(e._s(t.limit))])]),e._v(" "),s("el-col",{attrs:{lg:3,sm:5}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.times_used)+":")]),e._v(" "),s("h4",[e._v(e._s(t.used))])]),e._v(" "),s("el-col",{attrs:{lg:3,sm:5}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.expiration_date)+":")]),e._v(" "),s("h4",[e._v(e._s(t.expirationDate?e.getFrontedFormattedDate(t.expirationDate):"/"))])]),e._v(" "),s("el-col",{staticClass:"align-right",attrs:{lg:3,sm:4}},[s("div",{on:{click:function(t){t.stopPropagation()}}},[s("el-button",{on:{click:function(a){return e.showDialogEditCoupon(t.id)}}},[e._v(e._s(e.$root.labels.edit))])],1)])],1)],1)],1)],1)}),0),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCoupons&&!e.hasCouponsFiltered&&!e.isCouponsFiltering&&e.options.fetched,expression:"hasCoupons && !hasCouponsFiltered && !isCouponsFiltering && options.fetched"}],staticClass:"am-empty-state am-section"},[s("img",{attrs:{src:e.$root.getUrl+"public/img/emptystate.svg"}}),e._v(" "),s("h2",[e._v(e._s(e.$root.labels.no_results))])]),e._v(" "),s("pagination-block",{attrs:{params:e.couponsParams,count:e.couponsFilteredCount,label:e.$root.labels.coupons_lower,visible:e.hasCoupons&&e.hasCouponsFiltered&&!e.isCouponsFiltering&&e.options.fetched},on:{change:e.filterCoupons}})],1),e._v(" "),!e.$root.settings.payments.taxes.enabled||e.notInLicence()&&!e.licenceVisible()?e._e():s("el-tab-pane",{attrs:{label:e.$root.labels.taxes,name:"taxes"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasTaxes&&e.options.fetched,expression:"hasTaxes && options.fetched"}],staticClass:"am-finance-filter"},[s("el-form",{},[s("el-row",{attrs:{gutter:16}},[s("el-col",{attrs:{md:24,lg:4}},[s("div",{staticClass:"am-search"},[s("el-form-item",[s("el-input",{staticClass:"calc-width-mobile-tax",attrs:{placeholder:e.searchTaxesPlaceholder},model:{value:e.taxesParams.search,callback:function(t){e.$set(e.taxesParams,"search",t)},expression:"taxesParams.search"}})],1)],1)]),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.filterTaxesFields,expression:"filterTaxesFields"}],staticClass:"am-filter-fields"},[s("el-col",{attrs:{md:24,lg:5}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.services,"collapse-tags":""},on:{change:e.filterTaxes},model:{value:e.taxesParams.services,callback:function(t){e.$set(e.taxesParams,"services",t)},expression:"taxesParams.services"}},e._l(e.options.entities.categories,function(t){return s("div",{key:t.id},[s("div",{staticClass:"am-drop-parent",on:{click:function(a){return e.selectAllInCategoryTaxes(t.id)}}},[s("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.serviceList,function(t){return s("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2)}),0)],1)],1),e._v(" "),s("el-col",{attrs:{md:24,lg:5}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.extras,"collapse-tags":""},on:{change:e.filterTaxes},model:{value:e.taxesParams.extras,callback:function(t){e.$set(e.taxesParams,"extras",t)},expression:"taxesParams.extras"}},e._l(e.options.entities.services,function(t){return t.extras.length?s("div",{key:t.id},[s("div",{staticClass:"am-drop-parent",on:{click:function(a){return e.selectAllInServiceTaxes(t.id)}}},[s("span",[e._v(e._s(t.name)+" ("+e._s(e.getCategoryById(t.categoryId).name)+")")])]),e._v(" "),e._l(t.extras,function(t){return s("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2):e._e()}),0)],1)],1),e._v(" "),s("el-col",{attrs:{md:24,lg:5}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.packages,"collapse-tags":""},on:{change:e.filterTaxes},model:{value:e.taxesParams.packages,callback:function(t){e.$set(e.taxesParams,"packages",t)},expression:"taxesParams.packages"}},e._l(e.options.entities.packages,function(t){return s("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{md:24,lg:5}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.events,"collapse-tags":""},on:{change:e.filterTaxes},model:{value:e.taxesParams.events,callback:function(t){e.$set(e.taxesParams,"events",t)},expression:"taxesParams.events"}},e._l(e.options.entities.events,function(t){return s("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name+(t.periods&&t.periods.length?" ("+e.getFrontedFormattedDate(t.periods[0].periodStart.split(" ")[0])+")":""),value:t.id}})}),1)],1)],1)],1)]),e._v(" "),s("div",{},[s("el-button",{staticClass:"button-filter-toggle am-button-icon",staticStyle:{right:"8px"},attrs:{title:"Toggle Filters"},on:{click:function(t){e.filterTaxesFields=!e.filterTaxesFields}}},[s("img",{staticClass:"svg-amelia",attrs:{alt:"Toggle Filters",src:e.$root.getUrl+"public/img/filter.svg"}})])],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isTaxesFiltering||!e.options.fetched,expression:"isTaxesFiltering || !options.fetched"}],staticClass:"am-spinner am-section"},[s("img",{attrs:{src:e.$root.getUrl+"public/img/spinner.svg"}})]),e._v(" "),s("EmptyState",{attrs:{visible:!e.hasTaxes&&!e.isTaxesFiltering,licence:"basic",title:e.$root.labels.no_taxes_yet}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasTaxes&&e.hasTaxesFiltered&&!e.isTaxesFiltering&&e.options.fetched,expression:"hasTaxes && hasTaxesFiltered && !isTaxesFiltering && options.fetched"}],staticClass:"am-finance-list-head"},[s("el-row",[s("el-col",{attrs:{lg:7}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?s("el-col",{attrs:{lg:2}},[s("p",[s("el-checkbox",{on:{change:function(t){e.checkTaxData=e.handleCheckAll(e.coupons,e.checkTaxData)}},model:{value:e.checkTaxData.allChecked,callback:function(t){e.$set(e.checkTaxData,"allChecked",t)},expression:"checkTaxData.allChecked"}})],1)]):e._e(),e._v(" "),s("el-col",{attrs:{lg:11}},[s("p",[e._v(e._s(e.$root.labels.name)+":")])]),e._v(" "),s("el-col",{attrs:{lg:11}},[s("p",[e._v(e._s(e.$root.labels.rate)+":")])])],1)],1),e._v(" "),s("el-col",{attrs:{lg:17}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0}}),e._v(" "),s("el-col",{attrs:{lg:5}},[s("p",[e._v(e._s(e.$root.labels.service)+":")])]),e._v(" "),s("el-col",{attrs:{lg:5}},[s("p",[e._v(e._s(e.$root.labels.extra)+":")])]),e._v(" "),s("el-col",{attrs:{lg:5}},[s("p",[e._v(e._s(e.$root.labels.package)+":")])]),e._v(" "),s("el-col",{attrs:{lg:5}},[s("p",[e._v(e._s(e.$root.labels.event)+":")])])],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasTaxes&&e.hasTaxesFiltered&&!e.isTaxesFiltering&&e.options.fetched,expression:"hasTaxes && hasTaxesFiltered && !isTaxesFiltering && options.fetched"}],staticClass:"am-finance-list"},e._l(e.taxes,function(t){return s("div",{class:{"am-coupon-row am-hidden-entity":"hidden"===t.status,"am-coupon-row":"visible"===t.status}},[s("el-row",[s("el-col",{attrs:{lg:7}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?s("el-col",{attrs:{lg:2,sm:1}},[s("span",{on:{click:function(t){t.stopPropagation()}}},[s("el-checkbox",{on:{change:function(t){e.checkTaxData=e.handleCheckSingle(e.taxes,e.checkTaxData)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"tax.checked"}})],1)]):e._e(),e._v(" "),s("el-col",{attrs:{lg:11,sm:11}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.name)+":")]),e._v(" "),s("h4",[e._v(e._s(t.name))])]),e._v(" "),s("el-col",{attrs:{lg:11,sm:11}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.rate)+":")]),e._v(" "),s("h4",[e._v(e._s("percentage"===t.type?t.amount+"%":e.getFormattedPrice(t.amount)))])])],1)],1),e._v(" "),s("el-col",{attrs:{lg:17}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0,sm:1}}),e._v(" "),s("el-col",{attrs:{lg:5,sm:9}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.service)+":")]),e._v(" "),s("h4",[e._v("\n                          "+e._s(t.serviceList.length>0?t.serviceList[0].name:"")+"\n                          "),s("br"),e._v(" "),s("span",[e._v("\n                            "+e._s(t.serviceList.length>1?2===t.serviceList.length?"+"+(t.serviceList.length-1)+" "+e.$root.labels.service:"+"+(t.serviceList.length-1)+" "+e.$root.labels.services:"")+"\n                          ")])])]),e._v(" "),s("el-col",{attrs:{lg:5,sm:9}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.extra)+":")]),e._v(" "),s("h4",[e._v("\n                          "+e._s(t.extraList.length>0?t.extraList[0].name:"")+"\n                          "),s("br"),e._v(" "),s("span",[e._v("\n                            "+e._s(t.extraList.length>1?2===t.extraList.length?"+"+(t.extraList.length-1)+" "+e.$root.labels.extra:"+"+(t.extraList.length-1)+" "+e.$root.labels.extras:"")+"\n                          ")])])]),e._v(" "),s("el-col",{attrs:{lg:5,sm:9}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.package)+":")]),e._v(" "),s("h4",[e._v("\n                          "+e._s(t.packageList.length>0?t.packageList[0].name:"")+"\n                          "),s("br"),e._v(" "),s("span",[e._v("\n                            "+e._s(t.packageList.length>1?2===t.packageList.length?"+"+(t.packageList.length-1)+" "+e.$root.labels.package:"+"+(t.packageList.length-1)+" "+e.$root.labels.packages:"")+"\n                          ")])])]),e._v(" "),s("el-col",{attrs:{lg:5,sm:9}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.event)+":")]),e._v(" "),s("h4",[e._v("\n                          "+e._s(t.eventList.length>0?t.eventList[0].name:"")+"\n                          "),s("br"),e._v(" "),s("span",[e._v("\n                            "+e._s(t.eventList.length>1?2===t.eventList.length?"+"+(t.eventList.length-1)+" "+e.$root.labels.event:"+"+(t.eventList.length-1)+" "+e.$root.labels.events:"")+"\n                          ")])])]),e._v(" "),s("el-col",{staticClass:"align-right",attrs:{lg:4,sm:4}},[s("div",{on:{click:function(t){t.stopPropagation()}}},[s("el-button",{on:{click:function(a){return e.showDialogEditTax(t.id)}}},[e._v(e._s(e.$root.labels.edit))])],1)])],1)],1)],1)],1)}),0),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasTaxes&&!e.hasTaxesFiltered&&!e.isTaxesFiltering&&e.options.fetched,expression:"hasTaxes && !hasTaxesFiltered && !isTaxesFiltering && options.fetched"}],staticClass:"am-empty-state am-section"},[s("img",{attrs:{src:e.$root.getUrl+"public/img/emptystate.svg"}}),e._v(" "),s("h2",[e._v(e._s(e.$root.labels.no_results))])]),e._v(" "),s("pagination-block",{attrs:{params:e.taxesParams,count:e.taxesFilteredCount,label:e.$root.labels.taxes_lower,visible:e.hasTaxes&&e.hasTaxesFiltered&&!e.isTaxesFiltering&&e.options.fetched},on:{change:e.filterTaxes}})],1),e._v(" "),!e.notInLicence()||e.licenceVisible()?s("el-tab-pane",{attrs:{label:e.$root.labels.invoices,name:"invoices"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasInvoices&&e.options.fetched,expression:"hasInvoices && options.fetched"}],staticClass:"am-finance-filter"},[s("el-form",{},[s("el-row",{attrs:{gutter:16}},[s("el-col",{staticClass:"v-calendar-column",attrs:{md:24,lg:6}},[s("el-form-item",{staticClass:"calc-width-mobile-invoice"},[s("v-date-picker",{attrs:{"is-double-paned":!0,mode:"range","popover-visibility":"focus","popover-direction":"bottom","tint-color":"#1A84EE","show-day-popover":!1,"input-props":{class:"el-input__inner"},"is-expanded":!1,"is-required":!0,"input-class":"el-input__inner",placeholder:e.$root.labels.pick_a_date,formats:e.vCalendarFormats},on:{input:e.changeRangeInvoices},model:{value:e.invoiceParams.dates,callback:function(t){e.$set(e.invoiceParams,"dates",t)},expression:"invoiceParams.dates"}}),e._v(" "),e.invoiceParams.dates?s("span",{staticClass:"am-v-date-picker-suffix el-input__suffix-inner",on:{click:function(t){return e.clearInvoiceDateFilter()}}},[s("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close"})]):e._e()],1)],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.filterInvoicesFields,expression:"filterInvoicesFields"}],staticClass:"am-filter-fields"},[s("el-col",{attrs:{md:6,lg:3}},[s("el-form-item",[s("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$root.labels.customer,remote:"","remote-method":e.searchCustomers,loading:e.loadingCustomers},on:{change:e.filterInvoices},model:{value:e.invoiceParams.customerId,callback:function(t){e.$set(e.invoiceParams,"customerId",t)},expression:"invoiceParams.customerId"}},e._l(e.searchedCustomers.length?e.searchedCustomers:e.options.entities.customers,function(t,e){return s("el-option",{key:e,attrs:{label:t.firstName+" "+t.lastName,value:t.id}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{md:6,lg:3}},[s("el-form-item",[s("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$root.labels.employee},on:{change:e.filterInvoices},model:{value:e.invoiceParams.providerId,callback:function(t){e.$set(e.invoiceParams,"providerId",t)},expression:"invoiceParams.providerId"}},e._l(e.visibleEmployees,function(t){return s("el-option",{key:t.id,attrs:{label:t.firstName+" "+t.lastName,value:t.id}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{md:6,lg:4}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.services,"collapse-tags":""},on:{change:e.filterInvoices},model:{value:e.invoiceParams.services,callback:function(t){e.$set(e.invoiceParams,"services",t)},expression:"invoiceParams.services"}},e._l(e.options.entities.categories,function(t){return s("div",{key:t.id},[s("div",{staticClass:"am-drop-parent",on:{click:function(a){return e.selectAllInCategoryFinance(t.id)}}},[s("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.serviceList,function(t){return s("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2)}),0)],1)],1),e._v(" "),s("el-col",{attrs:{md:6,lg:4}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",clearable:"",placeholder:e.$root.labels.events},on:{change:e.filterInvoices},model:{value:e.invoiceParams.events,callback:function(t){e.$set(e.invoiceParams,"events",t)},expression:"invoiceParams.events"}},e._l(e.options.entities.events,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{md:6,lg:4}},[s("el-form-item",[s("el-select",{attrs:{multiple:"",clearable:"",placeholder:e.$root.labels.packages},on:{change:e.filterInvoices},model:{value:e.invoiceParams.packages,callback:function(t){e.$set(e.invoiceParams,"packages",t)},expression:"invoiceParams.packages"}},e._l(e.options.entities.packages,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1)]),e._v(" "),s("div",{},[s("el-button",{staticClass:"button-filter-toggle button-filter-toggle-invoice am-button-icon",attrs:{title:"Toggle Filters"},on:{click:function(t){e.filterInvoicesFields=!e.filterInvoicesFields}}},[s("img",{staticClass:"svg-amelia",attrs:{alt:"Toggle Filters",src:e.$root.getUrl+"public/img/filter.svg"}})])],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isInvoicesFiltering,expression:"isInvoicesFiltering"}],staticClass:"am-spinner am-section"},[s("img",{attrs:{src:e.$root.getUrl+"public/img/spinner.svg"}})]),e._v(" "),s("EmptyState",{attrs:{visible:0===e.invoicesTotalCount&&!e.isInvoicesFiltering,licence:"basic",title:e.$root.labels.no_payments_yet}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.invoicesTotalCount&&0!==e.invoices.length&&!e.isInvoicesFiltering,expression:"invoicesTotalCount !== 0 && invoices.length !== 0 && !isInvoicesFiltering"}],staticClass:"am-finance-list-head"},[s("el-row",[s("el-col",{attrs:{lg:14}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{attrs:{lg:1}},[s("p")]),e._v(" "),s("el-col",{attrs:{lg:8}},[s("p",[e._v(e._s(e.$root.labels.issue_date)+":")])]),e._v(" "),s("el-col",{attrs:{lg:3}},[s("p",[e._v(e._s(e.$root.labels.invoice)+":")])]),e._v(" "),s("el-col",{attrs:{lg:4}},[s("p",[e._v(e._s(e.$root.labels.total)+":")])]),e._v(" "),s("el-col",{attrs:{lg:8}},[s("p",[e._v(e._s(e.$root.labels.customer)+":")])])],1)],1),e._v(" "),s("el-col",{attrs:{lg:10}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0}}),e._v(" "),s("el-col",{attrs:{lg:12}},[s("p",[e._v(e._s(e.$root.labels.service)+"/"+e._s(e.$root.labels.event)+":")])]),e._v(" "),s("el-col",{attrs:{lg:12}},[s("p",[e._v(e._s(e.$root.labels.status)+":")])])],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.invoicesTotalCount&&0!==e.invoices.length&&!e.isInvoicesFiltering,expression:"invoicesTotalCount !== 0 && invoices.length !== 0 && !isInvoicesFiltering"}],staticClass:"am-finance-list"},e._l(e.invoices,function(t,a){return s("div",{key:t.id,staticClass:"am-finance",attrs:{name:t.id}},[s("div",{staticClass:"am-finance-data am-finance-data-invoices"},[0===t.appointmentId?s("span",{staticClass:"am-entity-color am-event-color"}):s("span",{staticClass:"am-entity-color am-appointment-color"}),e._v(" "),s("el-row",[s("el-col",{attrs:{lg:14}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{attrs:{lg:1,sm:1}},[s("span")]),e._v(" "),s("el-col",{attrs:{lg:8,sm:8}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.issue_date)+":")]),e._v(" "),s("h4",[e._v(e._s(e.getFrontedFormattedDate(t.created)))])]),e._v(" "),s("el-col",{attrs:{lg:3,sm:3}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.invoice)+":")]),e._v(" "),s("h4",[e._v(e._s(t.invoiceNumber?"#"+t.invoiceNumber:""))])]),e._v(" "),s("el-col",{attrs:{lg:4,sm:4}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.total)+":")]),e._v(" "),s("h4",[e._v(e._s(e.getFormattedPrice(t.total)))])]),e._v(" "),s("el-col",{attrs:{lg:8,sm:8}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.customer)+":")]),e._v(" "),s("h3",{class:e.getNoShowClass(t.customerId)},[e._v("\n                                "+e._s(t.customerFirstName+" "+t.customerLastName)+"\n                              ")]),e._v(" "),s("span",[e._v(e._s(t.customerEmail))])])],1)],1),e._v(" "),s("el-col",{attrs:{lg:10}},[s("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[s("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0,sm:1}}),e._v(" "),s("el-col",{staticClass:"am-payment-service",attrs:{lg:12,sm:14}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.service)+"/"+e._s(e.$root.labels.event)+":")]),e._v(" "),t.packageId?s("img",{attrs:{src:e.$root.getUrl+"public/img/am-package-black.svg"}}):e._e(),e._v(" "),s("h4",[e._v(e._s(e.getBookableName(t)))])]),e._v(" "),s("el-col",{staticClass:"am-finance-payment-status",attrs:{lg:6,sm:5}},[s("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.status)+":")]),e._v(" "),s("div",{staticClass:"am-payment-status"},[s("span",{class:"am-payment-status-symbol am-payment-status-symbol-"+t.fullStatus}),e._v(" "),s("h4",[e._v("\n                                  "+e._s(e.getPaymentStatusNiceName(t.fullStatus))+"\n                                ")])])]),e._v(" "),s("el-col",{staticClass:"align-right",attrs:{lg:6,sm:4}},[s("div",{on:{click:function(t){t.stopPropagation()}}},[s("el-button",{on:{click:function(a){return e.showDialogEditPayment(t,!0)}}},[e._v("\n                                  "+e._s(e.$root.labels.details)+"\n                                ")])],1)])],1)],1)],1)],1)])}),0),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.invoicesTotalCount&&0===e.invoices.length&&!e.isInvoicesFiltering,expression:"invoicesTotalCount !== 0 && invoices.length === 0 && !isInvoicesFiltering"}],staticClass:"am-empty-state am-section"},[s("img",{attrs:{src:e.$root.getUrl+"public/img/emptystate.svg"}}),e._v(" "),s("h2",[e._v(e._s(e.$root.labels.no_results))])]),e._v(" "),s("pagination-block",{attrs:{params:e.invoiceParams,count:e.invoicesFilteredCount,show:e.invoiceParams.show,label:e.$root.labels.payments_lower,visible:0!==e.invoicesTotalCount&&0!==e.invoices.length&&!e.isInvoicesFiltering},on:{change:e.filterInvoices}})],1):e._e()],1)],1),e._v(" "),s("group-delete",{attrs:{name:"payments",entities:e.payments,checkGroupData:e.checkPaymentData,confirmDeleteMessage:e.$root.labels.confirm_delete_payment,successMessage:{single:e.$root.labels.payment_deleted,multiple:e.$root.labels.payments_deleted},errorMessage:{single:e.$root.labels.payment_not_deleted,multiple:e.$root.labels.payments_not_deleted}},on:{groupDeleteCallback:e.paymentGroupDeleteCallback}}),e._v(" "),s("group-delete",{attrs:{name:"taxes",entities:e.taxes,checkGroupData:e.checkTaxData,confirmDeleteMessage:e.$root.labels.confirm_delete_tax,successMessage:{single:e.$root.labels.tax_deleted,multiple:e.$root.labels.taxes_deleted},errorMessage:{single:e.$root.labels.tax_not_deleted,multiple:e.$root.labels.taxes_not_deleted}},on:{groupDeleteCallback:e.taxGroupDeleteCallback}}),e._v(" "),s("group-delete",{attrs:{name:"coupons",entities:e.coupons,checkGroupData:e.checkCouponData,confirmDeleteMessage:e.$root.labels.confirm_delete_coupon,successMessage:{single:e.$root.labels.coupon_deleted,multiple:e.$root.labels.coupons_deleted},errorMessage:{single:e.$root.labels.coupon_not_deleted,multiple:e.$root.labels.coupons_not_deleted}},on:{groupDeleteCallback:e.couponGroupDeleteCallback}}),e._v(" "),e.$root.settings.payments.taxes.enabled?s("transition",{attrs:{name:"slide"}},[e.dialogTax?s("el-dialog",{staticClass:"am-side-dialog am-dialog-coupon",attrs:{"close-on-click-modal":!1,visible:e.dialogTax,"show-close":!1},on:{"update:visible":function(t){e.dialogTax=t}}},[s("dialog-tax",{attrs:{tax:e.tax,taxes:e.taxes,services:e.options.entities.services,extras:e.options.entities.extras,events:e.options.entities.events,packages:e.options.entities.packages,taxFetched:e.taxFetched},on:{closeDialog:function(t){return e.closeDialogTax()},saveCallback:e.savedTax,duplicateCallback:e.duplicateTaxCallback}})],1):e._e()],1):e._e(),e._v(" "),e.$root.settings.payments.coupons?s("transition",{attrs:{name:"slide"}},[e.dialogCoupon?s("el-dialog",{staticClass:"am-side-dialog am-dialog-coupon",attrs:{"close-on-click-modal":!1,visible:e.dialogCoupon,"show-close":!1},on:{"update:visible":function(t){e.dialogCoupon=t}}},[s("dialog-coupon",{attrs:{coupon:e.coupon,services:e.options.entities.services,events:e.options.entities.events,packages:e.options.entities.packages,couponFetched:e.couponFetched},on:{closeDialog:function(t){return e.closeDialogCoupon()},saveCallback:e.savedCoupon,duplicateCallback:e.duplicateCouponCallback}})],1):e._e()],1):e._e(),e._v(" "),s("transition",{attrs:{name:"slide"}},[e.dialogPayment?s("el-dialog",{staticClass:"am-side-dialog am-dialog-coupon",attrs:{"close-on-click-modal":!1,visible:e.dialogPayment,"show-close":!1},on:{"update:visible":function(t){e.dialogPayment=t}}},[s("dialog-payment",{attrs:{modalData:e.selectedPaymentModalData,bookingFetched:e.bookingFetched,customersNoShowCount:e.customersNoShowCount,"invoice-in-dialog":e.invoiceInDialog},on:{updatePaymentCallback:e.updatePaymentCallback,deletePaymentCallback:e.updatePaymentCallback,closeDialogPayment:function(t){return e.closeDialogPayment()}}})],1):e._e()],1),e._v(" "),s("el-col",{attrs:{md:6}},[s("a",{staticClass:"am-help-button",attrs:{href:"https://wpamelia.com/admin-finances/",target:"_blank",rel:"nofollow"}},[s("i",{staticClass:"el-icon-question"}),e._v(" "+e._s(e.$root.labels.need_help)+"?\n        ")])])],1)])},staticRenderFns:[]}},1647:function(t,e,a){var s=a(90)(a(1395),a(1402),!1,null,null,null);t.exports=s.exports},654:function(t,e,a){"use strict";e.a={data:function(){return{colors:["1788FB","4BBEC6","FBC22D","FA3C52","D696B8","689BCA","26CC2B","FD7E35","E38587","774DFB","31CDF3","6AB76C","FD5FA1","A697C5"],usedColors:[]}},methods:{deleteImage:function(t){t.pictureThumbPath="",t.pictureFullPath=""},getAppropriateUrlParams:function(t){if("disableUrlParams"in this.$root.settings.activation&&!this.$root.settings.activation.disableUrlParams)return t;var e=JSON.parse(JSON.stringify(t));return["categories","services","packages","employees","providers","providerIds","extras","locations","events","types","dates"].forEach(function(t){if("extras"===t&&t in e){e.extras=JSON.parse(e.extras);var a=[];e.extras.forEach(function(t){a.push(t.id+"-"+t.quantity)}),e.extras=a.length?a:null}t in e&&Array.isArray(e[t])&&e[t].length&&(e[t]=e[t].join(","))}),e},inlineSVG:function(){var t=a(661);t.init({svgSelector:"img.svg-amelia",initClass:"js-inlinesvg"})},inlineSVGCabinet:function(){setTimeout(function(){a(661).init({svgSelector:"img.svg-cabinet",initClass:"js-inlinesvg"})},100)},imageFromText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.getNameInitials(t),i=Math.floor(Math.random()*this.colors.length),n=this.colors[i];return this.usedColors.push(this.colors[i]),this.colors.splice(i,1),0===this.colors.length&&(this.colors=this.usedColors,this.usedColors=[]),a?e.firstName?this.$root.getUrl+"public/img/default-employee.svg":e.latitude?this.$root.getUrl+"public/img/default-location.svg":this.$root.getUrl+"public/img/default-service.svg":location.protocol+"//via.placeholder.com/120/"+n+"/fff?text="+s},pictureLoad:function(t,e){if(null!==t){var a=!0===e?t.firstName+" "+t.lastName:t.name;if(void 0!==a)return t.pictureThumbPath=t.pictureThumbPath||this.imageFromText(a),t.pictureThumbPath}},imageLoadError:function(t,e){var a=!0===e?t.firstName+" "+t.lastName:t.name;void 0!==a&&(t.pictureThumbPath=this.imageFromText(a,t,!0))},getNameInitials:function(t){return t.split(" ").map(function(t){return t.charAt(0)}).join("").toUpperCase().substring(0,3).replace(/[^\w\s]/g,"")}}}},655:function(t,e,a){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a={data:function(){return{}},methods:{replaceExistingObjectProperties:function(t,e){var a=this;Object.keys(t).forEach(function(i){null!==t[i]&&"object"===s(t[i])&&i in e?a.replaceExistingObjectProperties(t[i],e[i]):i in e&&(t[i]=e[i])})},addMissingObjectProperties:function(t,e){var a=this;Object.keys(e).forEach(function(i){var n=!1;i in t||("object"===s(e[i])?(t[i]={},n=!0):(t[i]=null,n=!0)),null===e[i]||"object"!==s(e[i])?n&&(t[i]=e[i]):a.addMissingObjectProperties(t[i],e[i])})},scrollView:function(t,e,a){"undefined"!=typeof jQuery&&(void 0!==a&&a||jQuery(window).width()<=600)&&setTimeout(function(){var a=document.getElementById(t);void 0!==a&&null!==a&&a.scrollIntoView({behavior:"smooth",block:e,inline:"end"})},200)},scrollViewInModal:function(t){this.$nextTick(function(){var e=document.getElementById(t),a=document.querySelectorAll(".am-dialog-scrollable");if(e&&a&&a.length){var s=e,i=e.offsetTop;do{i+=(s=s.offsetParent).offsetTop}while(s===a[0]);a[0].scrollTop=i}})},getUrlQueryParams:function(t){var e=t.indexOf("#")>0?t.substring(0,t.indexOf("#")).split("?")[1]:t.split("?")[1];if(e){var a=[],s={};return e.split("&").forEach(function(t){a=t.split("="),s[a[0]]=decodeURIComponent(a[1]).replace(/\+/g," ")}),s}},getUrlParams:function(t){var e={};if(-1!==t.indexOf("?")){var a=[];t.split("?")[1].split("&").forEach(function(t){a=t.split("="),e[a[0]]=decodeURIComponent(a[1]).replace(/\+/g," ")})}return e},removeURLParameter:function(t,e){var a=t.split("?");if(a.length>=2){for(var s=encodeURIComponent(e)+"=",i=a[1].split(/[&;]/g),n=i.length;n-- >0;)-1!==i[n].lastIndexOf(s,0)&&i.splice(n,1);return t=a[0]+(i.length>0?"?"+i.join("&"):"")}return t},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},trimProperty:function(t,e){t[e]=t[e].trim()}}}},656:function(t,e,a){"use strict";var s=a(683),i=a(344),n=Object.prototype.toString;function o(t){return"[object Array]"===n.call(t)}function l(t){return null!==t&&"object"==typeof t}function r(t){return"[object Function]"===n.call(t)}function c(t,e){if(null!==t&&void 0!==t)if("object"==typeof t||o(t)||(t=[t]),o(t))for(var a=0,s=t.length;a<s;a++)e.call(null,t[a],a,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===n.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:l,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===n.call(t)},isFile:function(t){return"[object File]"===n.call(t)},isBlob:function(t){return"[object Blob]"===n.call(t)},isFunction:r,isStream:function(t){return l(t)&&r(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function a(a,s){"object"==typeof e[s]&&"object"==typeof a?e[s]=t(e[s],a):e[s]=a}for(var s=0,i=arguments.length;s<i;s++)c(arguments[s],a);return e},extend:function(t,e,a){return c(e,function(e,i){t[i]=a&&"function"==typeof e?s(e,a):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},657:function(t,e,a){"use strict";e.a={data:function(){return{currencies:[{symbol:"$",name:"US Dollar",symbol_native:"$",code:"USD",iso:"us"},{symbol:"",name:"Euro",symbol_native:"",code:"EUR",iso:"eu"},{symbol:"",name:"British Pound Sterling",symbol_native:"",code:"GBP",iso:"gb"},{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",code:"CAD",iso:"ca"},{symbol:"FCFP",name:"CFP Franc",symbol_native:"FCFP",code:"XPF",iso:"fr"},{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",code:"CHF",iso:"ch"},{symbol:"RUB",name:"Russian Ruble",symbol_native:".",code:"RUB",iso:"ru"},{symbol:"",name:"Japanese Yen",symbol_native:"",code:"JPY",iso:"jp"},{symbol:"Af",name:"Afghan Afghani",symbol_native:"",code:"AFN",iso:"af"},{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",code:"ALL",iso:"al"},{symbol:"DA",name:"Algerian Dinar",symbol_native:"..",code:"DZD",iso:"dz"},{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",code:"ARS",iso:"ar"},{symbol:"AMD",name:"Armenian Dram",symbol_native:".",code:"AMD",iso:"am"},{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",code:"AUD",iso:"au"},{symbol:"man.",name:"Azerbaijani Manat",symbol_native:".",code:"AZN",iso:"az"},{symbol:"BD",name:"Bahraini Dinar",symbol_native:"..",code:"BHD",iso:"bh"},{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"",code:"BDT",iso:"bd"},{symbol:"BYR",name:"Belarusian Ruble",symbol_native:"BYR",code:"BYR",iso:"by"},{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",code:"BZD",iso:"bz"},{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",code:"BOB",iso:"bo"},{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",code:"BAM",iso:"ba"},{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",code:"BWP",iso:"bw"},{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",code:"BRL",iso:"br"},{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",code:"BND",iso:"bn"},{symbol:"BGN",name:"Bulgarian Lev",symbol_native:".",code:"BGN",iso:"bg"},{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",code:"BIF",iso:"bi"},{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",code:"XOF",iso:"auto"},{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",code:"XAF",iso:"auto"},{symbol:"KHR",name:"Cambodian Riel",symbol_native:"",code:"KHR",iso:"kh"},{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",code:"CVE",iso:"cv"},{symbol:"CLP",name:"Chilean Peso",symbol_native:"$",code:"CLP",iso:"cl"},{symbol:"CN",name:"Chinese Yuan",symbol_native:"CN",code:"CNY",iso:"cn"},{symbol:"COP",name:"Colombian Peso",symbol_native:"$",code:"COP",iso:"co"},{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",code:"KMF",iso:"km"},{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",code:"CDF",iso:"cd"},{symbol:"",name:"Costa Rican Coln",symbol_native:"",code:"CRC",iso:"cr"},{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",code:"HRK",iso:"hr"},{symbol:"K",name:"Czech Republic Koruna",symbol_native:"K",code:"CZK",iso:"cz"},{symbol:"Dkk",name:"Danish Krone",symbol_native:"kr",code:"DKK",iso:"dk"},{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",code:"DJF",iso:"dj"},{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",code:"DOP",iso:"do"},{symbol:"EGP",name:"Egyptian Pound",symbol_native:"..",code:"EGP",iso:"eg"},{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",code:"ERN",iso:"er"},{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",code:"EEK",iso:"ee"},{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",code:"ETB",iso:"et"},{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",code:"GEL",iso:"ge"},{symbol:"GH",name:"Ghanaian Cedi",symbol_native:"GH",code:"GHS",iso:"gh"},{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",code:"GTQ",iso:"gt"},{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",code:"GNF",iso:"gn"},{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",code:"HNL",iso:"hn"},{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",code:"HKD",iso:"hk"},{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",code:"HUF",iso:"hu"},{symbol:"kr",name:"Icelandic Krna",symbol_native:"kr",code:"ISK",iso:"is"},{symbol:"INR",name:"Indian Rupee",symbol_native:"",code:"INR",iso:"in"},{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",code:"IDR",iso:"id"},{symbol:"IRR",name:"Iranian Rial",symbol_native:"",code:"IRR",iso:"ir"},{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"..",code:"IQD",iso:"iq"},{symbol:"",name:"Israeli New Sheqel",symbol_native:"",code:"ILS",iso:"il"},{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",code:"JMD",iso:"jm"},{symbol:"JD",name:"Jordanian Dinar",symbol_native:"..",code:"JOD",iso:"jo"},{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:".",code:"KZT",iso:"kz"},{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",code:"KES",iso:"ke"},{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"..",code:"KWD",iso:"kw"},{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",code:"LVL",iso:"lv"},{symbol:"LB",name:"Lebanese Pound",symbol_native:"..",code:"LBP",iso:"lb"},{symbol:"LD",name:"Libyan Dinar",symbol_native:"..",code:"LYD",iso:"ly"},{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",code:"LTL",iso:"lt"},{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",code:"MOP",iso:"mo"},{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",code:"MKD",iso:"mk"},{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",code:"MGA",iso:"mg"},{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",code:"MYR",iso:"my"},{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",code:"MUR",iso:"mu"},{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",code:"MXN",iso:"mx"},{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",code:"MDL",iso:"md"},{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"..",code:"MAD",iso:"ma"},{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",code:"MZN",iso:"mz"},{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",code:"MMK",iso:"mm"},{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",code:"NAD",iso:"na"},{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"",code:"NPR",iso:"np"},{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",code:"TWD",iso:"tw"},{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",code:"NZD",iso:"nz"},{symbol:"C$",name:"Nicaraguan Crdoba",symbol_native:"C$",code:"NIO",iso:"ni"},{symbol:"",name:"Nigerian Naira",symbol_native:"",code:"NGN",iso:"ng"},{symbol:"kr",name:"Norwegian Krone",symbol_native:"kr",code:"NOK",iso:"no"},{symbol:"OMR",name:"Omani Rial",symbol_native:"..",code:"OMR",iso:"om"},{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"",code:"PKR",iso:"pk"},{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",code:"PAB",iso:"pa"},{symbol:"",name:"Paraguayan Guarani",symbol_native:"",code:"PYG",iso:"py"},{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",code:"PEN",iso:"pe"},{symbol:"",name:"Philippine Peso",symbol_native:"",code:"PHP",iso:"ph"},{symbol:"z",name:"Polish Zloty",symbol_native:"z",code:"PLN",iso:"pl"},{symbol:"QR",name:"Qatari Rial",symbol_native:"..",code:"QAR",iso:"qa"},{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",code:"RON",iso:"ro"},{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",code:"RWF",iso:"rw"},{symbol:"SR",name:"Saudi Riyal",symbol_native:"..",code:"SAR",iso:"sa"},{symbol:"rsd.",name:"Serbian Dinar",symbol_native:".",code:"RSD",iso:"rs"},{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",code:"SGD",iso:"sg"},{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",code:"SOS",iso:"so"},{symbol:"R",name:"South African Rand",symbol_native:"R",code:"ZAR",iso:"za"},{symbol:"",name:"South Korean Won",symbol_native:"",code:"KRW",iso:"kr"},{symbol:"",name:"Lao kip",symbol_native:"",code:"LAK",iso:"la"},{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",code:"LKR",iso:"lk"},{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",code:"SDG",iso:"sd"},{symbol:"kr",name:"Swedish Krona",symbol_native:"kr",code:"SEK",iso:"se"},{symbol:"SY",name:"Syrian Pound",symbol_native:"..",code:"SYP",iso:"sy"},{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",code:"TZS",iso:"tz"},{symbol:"",name:"Thai Baht",symbol_native:"",code:"THB",iso:"th"},{symbol:"T$",name:"Tongan Paanga",symbol_native:"T$",code:"TOP",iso:"to"},{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",code:"TTD",iso:"tt"},{symbol:"DT",name:"Tunisian Dinar",symbol_native:"..",code:"TND",iso:"tn"},{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",code:"TRY",iso:"tr"},{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",code:"UGX",iso:"ug"},{symbol:"",name:"Ukrainian Hryvnia",symbol_native:"",code:"UAH",iso:"ua"},{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"..",code:"AED",iso:"ae"},{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",code:"UYU",iso:"uy"},{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",code:"UZS",iso:"uz"},{symbol:"Bs.S.",name:"Venezuelan Bolvar",symbol_native:"Bs.S.",code:"VES",iso:"ve"},{symbol:"",name:"Vietnamese Dong",symbol_native:"",code:"VND",iso:"vn"},{symbol:"YR",name:"Yemeni Rial",symbol_native:"..",code:"YER",iso:"ye"},{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",code:"ZMK",iso:"zm"}],thousandSeparatorMap:{1:",",2:".",3:" ",4:" "},decimalSeparatorMap:{1:".",2:",",3:".",4:","}}},methods:{getCurrencySymbol:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.currencies.find(function(e){return e.code===t.$root.settings.payments.currencyCode});return a&&e&&"INR"!==a.code?a.symbol_native:e&&"INR"===a.code?a.code:this.$root.settings.payments.currency},getPriceThousandSeparator:function(){return this.thousandSeparatorMap[this.$root.settings.payments.priceSeparator]},getPriceDecimalSeparator:function(){return this.decimalSeparatorMap[this.$root.settings.payments.priceSeparator]},getPriceNumberOfDecimalPlaces:function(){return this.$root.settings.payments.priceNumberOfDecimals},getPricePrefix:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"after"===this.$root.settings.payments.priceSymbolPosition||"afterWithSpace"===this.$root.settings.payments.priceSymbolPosition?"":"before"===this.$root.settings.payments.priceSymbolPosition?this.getCurrencySymbol(t):this.getCurrencySymbol(t)+" "},getPriceSuffix:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"before"===this.$root.settings.payments.priceSymbolPosition||"beforeWithSpace"===this.$root.settings.payments.priceSymbolPosition?"":"after"===this.$root.settings.payments.priceSymbolPosition?this.getCurrencySymbol(t):" "+this.getCurrencySymbol(t)},getFormattedPrice:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.getPriceNumberOfDecimalPlaces(),s=this.getPriceThousandSeparator(),i=this.getPriceDecimalSeparator(),n=this.getPricePrefix(),o=this.getPriceSuffix(),l=parseInt(t=Math.abs(+t||0).toFixed(a))+"",r=l.length>3?l.length%3:0;return(e?n:"")+(r?l.substr(0,r)+s:"")+l.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?i+Math.abs(t-l).toFixed(a).slice(2):"")+(e?o:"")},getPercentage:function(t,e){return t*e/100}},computed:{moneyComponentData:function(){return{decimal:this.getPriceDecimalSeparator(),thousands:this.getPriceThousandSeparator(),prefix:this.getPricePrefix(!0),suffix:this.getPriceSuffix(!0),precision:this.getPriceNumberOfDecimalPlaces(),masked:!1}}}}},658:function(t,e,a){"use strict";e.a={methods:{notify:function(t,e,a,s,i){var n=this;void 0===s&&(s=""),setTimeout(function(){var o={customClass:s,title:t,message:e,type:a,offset:50};void 0!==i&&(o.duration=i),n.$notify(o)},700)}}}},660:function(t,e,a){"use strict";var s=a(678),i=a(672),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a={mixins:[s.a,i.a],data:function(){return{}},methods:{getLocationById:function(t){return this.options.entities.locations.find(function(e){return e.id===t})||null},getCustomerById:function(t){return this.options.entities.customers.find(function(e){return e.id===t})||null},getProviderById:function(t){return this.options.entities.employees.find(function(e){return e.id===t})||null},getServiceById:function(t){return this.options.entities.services.find(function(e){return e.id===t})||null},getCategoryById:function(t){return this.options.entities.categories.find(function(e){return e.id===t})||null},getPackageById:function(t){return this.options.entities.packages.find(function(e){return e.id===t})||null},getProviderService:function(t,e){var a=this.getProviderById(t).serviceList.find(function(t){return t.id===parseInt(e)});return a?Object.assign(JSON.parse(JSON.stringify(this.getServiceById(e))),a):null},getProviderBadge:function(t,e){var a=this.$root.settings.roles.providerBadges.badges.map(function(t){return t.id}),s=null;if(!t.badgeId||!a.includes(t.badgeId))return null;switch(s=this.$root.settings.roles.providerBadges.badges.find(function(e){return e.id===t.badgeId}),e){case"":return!0;case"color":return s.color;case"content":return s.content;default:return!0}},getServiceProviders:function(t,e){var a=this;return void 0!==e&&e?this.options.entities.employees.filter(function(e){return-1!==e.serviceList.map(function(t){return t.id}).indexOf(t)}):this.options.entities.employees.filter(function(e){return-1!==e.serviceList.filter(function(t){return a.isEmployeeService(e.id,t.id)}).map(function(t){return t.id}).indexOf(t)})},getServiceLocations:function(t,e){var a=this,s=[];return this.options.entities.employees.filter(function(e){return-1!==e.serviceList.map(function(t){return t.id}).indexOf(t)}).forEach(function(t){s=a.getProviderLocations(t.id,e).map(function(t){return t.id}).concat(s)}),this.options.entities.locations.filter(function(t){return-1!==s.indexOf(t.id)})},getProviderLocations:function(t,e){var a=this,s=[this.getProviderById(t).locationId];if(t in this.options.entitiesRelations)for(var i in this.options.entitiesRelations[t])this.options.entitiesRelations[t].hasOwnProperty(i)&&(s=s.concat(this.options.entitiesRelations[t][i]));return s=s.filter(function(t,e,a){return a.indexOf(t)===e}),(void 0!==e&&e?this.options.entities.locations:this.options.entities.locations.filter(function(e){return a.isEmployeeLocation(t,e.id)})).filter(function(t){return-1!==s.indexOf(t.id)})},getLocationProviders:function(t,e){var a=this,s=[];return this.options.entities.employees.forEach(function(i){-1!==(void 0!==e&&e?a.getProviderLocations(i.id).filter(function(t){return a.isEmployeeLocation(i.id,t.id)}):a.getProviderLocations(i.id)).map(function(t){return t.id}).indexOf(t)&&s.push(i.id)}),s=s.filter(function(t,e,a){return a.indexOf(t)===e}),this.options.entities.employees.filter(function(t){return-1!==s.indexOf(t.id)})},getServicesFromCategories:function(t){var e=[];return t.map(function(t){return t.serviceList}).forEach(function(t){e=e.concat(t)}),e.sort(this.sortWithNull)},getCategoryServices:function(t){return this.options.entities.categories.find(function(e){return e.id===t}).serviceList},getCustomerInfo:function(t){var e=null;return"info"in t&&t.info?Object.assign({id:"customer"in t?t.customer.id:null},JSON.parse(t.info)):("customerId"in t?e=this.getCustomerById(t.customerId):"customer"in t&&(e=this.getCustomerById(t.customer.id)),null!==e?e:"customer"in t?t.customer:null)},isEmployeeServiceLocation:function(t,e,a){return t in this.options.entitiesRelations&&e in this.options.entitiesRelations[t]&&-1!==this.options.entitiesRelations[t][e].indexOf(a)},isEmployeeService:function(t,e){return t in this.options.entitiesRelations&&e in this.options.entitiesRelations[t]},isEmployeeLocation:function(t,e){var a=!1;if(t in this.options.entitiesRelations)for(var s in this.options.entitiesRelations[t])this.options.entitiesRelations[t].hasOwnProperty(s)&&-1!==this.options.entitiesRelations[t][s].indexOf(e)&&(a=!0);return a},getAvailableEntitiesIds:function(t,e){var a=this,s=[],i=[],n=[],o=null!==e.categoryId?t.categories.find(function(t){return t.id===e.categoryId}):null,l=o?o.serviceList.map(function(t){return t.id}):[];if(null!==e.categoryId&&0===l.length||null!==e.serviceId&&null!==e.employeeId&&!this.isEmployeeService(e.employeeId,e.serviceId)||null!==e.serviceId&&null!==e.employeeId&&null!==e.locationId&&!this.isEmployeeServiceLocation(e.employeeId,e.serviceId,e.locationId))return{services:[],locations:[],employees:[],categories:[]};var r=function(t){if(!a.options.entitiesRelations.hasOwnProperty(t))return"continue";var o=parseInt(t);if(null!==e.employeeId&&e.employeeId!==o||null!==e.locationId&&!a.isEmployeeLocation(o,e.locationId)||null!==e.serviceId&&!a.isEmployeeService(o,e.serviceId)||null!==e.categoryId&&0===l.filter(function(t){return a.isEmployeeService(o,t)}).length||null!==e.categoryId&&null!==e.locationId&&0===l.filter(function(t){return a.isEmployeeServiceLocation(o,t,e.locationId)}).length||null!==e.serviceId&&null!==e.locationId&&!a.isEmployeeServiceLocation(o,e.serviceId,e.locationId))return"continue";for(var r in-1===i.indexOf(o)&&i.push(o),a.options.entitiesRelations[o])if(a.options.entitiesRelations[o].hasOwnProperty(r)){var c=parseInt(r);null!==e.serviceId&&e.serviceId!==c||null!==e.categoryId&&-1===l.indexOf(c)||null!==e.locationId&&!a.isEmployeeServiceLocation(o,c,e.locationId)||(-1===s.indexOf(c)&&s.push(c),a.options.entitiesRelations[o][c].length&&a.options.entitiesRelations[o][c].forEach(function(t){null!==e.locationId&&e.locationId!==t||-1===n.indexOf(t)&&n.push(t)}))}};for(var c in this.options.entitiesRelations)r(c);return{services:s,locations:n,employees:i,categories:t.categories.filter(function(t){return t.serviceList.map(function(t){return t.id}).filter(function(t){return-1!==s.indexOf(t)}).length>0}).map(function(t){return t.id})}},getParsedCustomPricing:function(t){return null===t.customPricing?t.customPricing={enabled:!1,durations:[]}:"object"!==n(t.customPricing)&&(t.customPricing=this.getArrayCustomPricing(t.customPricing)),t.customPricing},filterEntities:function(t,e){var a=this,s=this.getAvailableEntitiesIds(t,e);this.options.entities.employees=t.employees.filter(function(t){return-1!==s.employees.indexOf(t.id)&&t.serviceList.filter(function(t){return-1!==s.services.indexOf(t.id)}).length>0}),this.options.entities.employees.forEach(function(t){t.fullName=t.firstName+" "+t.lastName,t.serviceList.forEach(function(t){t.customPricing=a.getParsedCustomPricing(t)})}),this.options.entities.categories=t.categories,this.options.entities.services=this.getServicesFromCategories(this.options.entities.categories).filter(function(t){return t.show&&-1!==s.services.indexOf(t.id)}),this.options.entities.services.forEach(function(t){t.extras.forEach(function(t){t.extraId=t.id}),t.customPricing=a.getParsedCustomPricing(t)}),this.options.entities.locations=t.locations.filter(function(t){return-1!==s.locations.indexOf(t.id)}),this.options.entities.customFields=t.customFields;var i=this.options.entities.services.map(function(t){return t.id});if("packages"in t&&(!("show"in e)||"services"!==e.show)){t.packages.forEach(function(t){"bookableIds"in t||(t.bookableIds=t.bookable.map(function(t){return t.service.id}))});var n=t.packages.filter(function(t){return"visible"===t.status}).filter(function(t){return t.bookableIds.filter(function(t){return-1!==i.indexOf(t)}).length}),o=this.options.entities.locations.map(function(t){return t.id}),l=this.options.entities.employees.map(function(t){return t.id}),r=[];if(n.forEach(function(e){var s=!1;"availableBookableInfo"in e||(e.availableBookableInfo=[]),e.bookable.forEach(function(i){var n=!1;(0===i.minimumScheduled&&i.maximumScheduled>0||i.minimumScheduled>0&&0===i.maximumScheduled||i.minimumScheduled>0&&i.maximumScheduled>0)&&(s=!0,n=!0),i.hasSlots=n;var c=i.providers.length;if(!t.locations.length||a.options.entities.locations.length){var u=i.locations.length;!c||(i.providers=i.providers.filter(function(t){return-1!==l.indexOf(t.id)&&u?i.locations.filter(function(e){return a.isEmployeeServiceLocation(t.id,i.service.id,e.id)}).length:!a.options.entities.locations.length||a.options.entities.locations.filter(function(e){return a.isEmployeeServiceLocation(t.id,i.service.id,e.id)}).length}),i.providers.length)?(u&&(i.locations=i.locations.filter(function(t){return-1!==o.indexOf(t.id)&&(c?i.providers.filter(function(e){return a.isEmployeeServiceLocation(e.id,i.service.id,t.id)}).length:a.options.entities.employees.filter(function(e){return a.isEmployeeServiceLocation(e.id,i.service.id,t.id)}).length)}),i.locations.length||r.push(e.id)),-1===e.availableBookableInfo.map(function(t){return t.serviceId}).indexOf(i.service.id)&&e.availableBookableInfo.push({serviceId:i.service.id,serviceName:a.getNameTranslated(i.service),serviceQuantity:i.quantity,providersCount:i.providers.length})):r.push(e.id)}else r.push(e.id)}),e.bookable=e.bookable.filter(function(t){return t.hasSlots}),e.hasSlots=s}),this.options.entities.packages=n.filter(function(t){return-1===r.indexOf(t.id)}),"show"in e&&"packages"===e.show){var c=[];this.options.entities.packages.forEach(function(t){t.bookable.forEach(function(t){c.push(t.service.categoryId)})}),this.options.entities.categories=this.options.entities.categories.filter(function(t){return-1!==c.indexOf(t.id)})}this.options.entities.taxes=t.taxes}},processEntities:function(t){var e=this;this.options.entitiesRelations=t.entitiesRelations,this.options.isFrontEnd?("packages"in t&&t.packages.length&&(this.responseEntities.employees=t.employees,this.responseEntities.categories=t.categories,this.responseEntities.locations=t.locations,this.responseEntities.customFields=t.customFields,this.responseEntities.services=this.getServicesFromCategories(this.responseEntities.categories),this.responseEntities.packages=t.packages?t.packages.filter(function(t){return t.available}):[],this.responseEntities.daysOff=t.settings?t.settings.daysOff:[],this.responseEntities.taxes=t.taxes?t.taxes:[],t.packages=t.packages.filter(function(t){return t.available}),this.params&&this.params.sort||(t.packages=t.packages.sort(function(t,e){return t.position-e.position}))),this.filterEntities(t,this.getShortCodeEntityIds())):(this.options.entities.employees=t.employees,this.options.entities.categories=t.categories,this.options.entities.locations=t.locations,"customers"in t&&t.customers.length&&(this.options.entities.customers=t.customers),this.options.entities.services=this.getServicesFromCategories(this.options.entities.categories),this.options.entities.resources=t.resources,this.options.entities.packages=t.packages,this.options.entities.customFields=t.customFields,this.options.entities.coupons=t.coupons,this.options.entities.spaces=t.spaces,this.options.entities.services.forEach(function(t){t.extras.forEach(function(t){t.extraId=t.id})}),this.options.availableEntitiesIds=this.getAvailableEntitiesIds(t,{categoryId:null,serviceId:null,employeeId:null,locationId:null})),this.options.entities.employees.forEach(function(t){t.serviceList.forEach(function(t){t.customPricing=e.getParsedCustomPricing(t)})}),this.options.entities.services.forEach(function(t){t.customPricing=e.getParsedCustomPricing(t)}),"settings"in t&&(this.options.entities.settings=t.settings),this.options.entities.tags="tags"in t?t.tags:[],this.options.entities.taxes="taxes"in t?t.taxes:[]},getShortCodeEntityIds:function(){return this.$root.shortcodeData.booking?{categoryId:"category"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.category:null,serviceId:"service"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.service:null,employeeId:"employee"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.employee:null,locationId:"location"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.location:null,show:"show"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.show:null}:{categoryId:null,serviceId:null,employeeId:null,locationId:null,show:null}},entitiesLoaded:function(){return"ameliaAppointmentEntities"in window||"ameliaEntities"in window},fillCachedEntities:function(t){var e=this.getServicesFromCategories(t.categories);t.employees.forEach(function(t){t.serviceList.forEach(function(t){Object.assign(t,e.find(function(e){return e.id===t.id}),{price:t.price,customPricing:t.customPricing,minCapacity:t.minCapacity,maxCapacity:t.maxCapacity})})}),"packages"in t&&t.packages.forEach(function(t){t.bookable.forEach(function(t){var a=e.find(function(e){return e.id===t.service.id});a&&(t.service=JSON.parse(JSON.stringify(a)))})})},fetchEntities:function(t,e){var a=this,s={params:this.getAppropriateUrlParams({lite:!0,types:e.types})};if(e.page?s.params.page=e.page:"isFrontEnd"in e&&e.isFrontEnd&&(s.params.page="booking"),void 0!==this.$store&&void 0!==this.$store.state.cabinet&&"provider"===this.$store.state.cabinet.cabinetType&&(s=Object.assign(s,this.getAuthorizationHeaderObject()),Object.assign(s.params,{source:"cabinet-"+this.$store.state.cabinet.cabinetType})),e.isPanel||"calendar"===s.params.page||this.$root.hasApiCall&&!this.entitiesLoaded())this.$http.get(this.$root.getAjaxUrl+"/entities",s).then(function(s){a.options.isFrontEnd=e.isFrontEnd,window.ameliaAppointmentEntities=s.data.data;var i=JSON.parse(JSON.stringify(window.ameliaAppointmentEntities));a.fillCachedEntities(i),a.processEntities(i),a.$root.useTranslations&&a.translateEntities(i);t(!0)}).catch(function(e){console.log(e);t(!1)});else var i=setInterval(function(){if(a.entitiesLoaded()){clearInterval(i),a.options.isFrontEnd=e.isFrontEnd;var s="ameliaEntities"in window?JSON.parse(JSON.stringify(window.ameliaEntities)):JSON.parse(JSON.stringify(window.ameliaAppointmentEntities));a.fillCachedEntities(s),a.processEntities(s),a.$root.useTranslations&&a.translateEntities(s);t(!0)}},1e3)},setMissingServices:function(t){var e=this,a=this.options.entities.services.map(function(t){return parseInt(t.id)});Object.keys(t).forEach(function(s){t[s].appointments.forEach(function(t){t.service&&-1===a.indexOf(parseInt(t.serviceId))&&(e.options.entities.services.push(t.service),a.push(parseInt(t.serviceId)))})})},getFilteredEntities:function(t,e,a){var s=this,i=this.appointment&&this.appointment.id&&this.appointment[a]?this.appointment[a]:null;return this.options.entities[e].forEach(function(e){e.disabled=-1===t.indexOf(e.id)}),this.options.entities[e].filter(function(t){return-1!==s.options.availableEntitiesIds[e].indexOf(t.id)||null!==i&&i===t.id})}},computed:{visibleLocations:function(){return this.options.entities.locations.filter(function(t){return"visible"===t.status})},visibleEmployees:function(){return this.options.entities.employees.filter(function(t){return"visible"===t.status})},visibleCustomers:function(){return this.options.entities.customers.filter(function(t){return"visible"===t.status})},visibleServices:function(){return this.options.entities.services.filter(function(t){return"visible"===t.status}).sort(this.sortWithNull)},employeesFiltered:function(){var t=this,e=void 0!==this.appointment&&"bookings"in this.appointment&&this.appointment.bookings.length?this.appointment.bookings[0].persons:null,a=this.$root.settings.roles.providerBadges.badges.map(function(t){return t.id});this.visibleEmployees.forEach(function(e){e.badgeId&&a.includes(e.badgeId)?e.badge=t.$root.settings.roles.providerBadges.badges.find(function(t){return t.id===e.badgeId}):e.badge=null});var s=this.visibleEmployees.filter(function(a){return a.serviceList.filter(function(s){return"visible"===s.status&&(null===e||s.maxCapacity>=e)&&(!t.appointment.serviceId||t.isEmployeeService(a.id,s.id)&&s.id===t.appointment.serviceId)&&(!t.appointment.locationId||t.isEmployeeServiceLocation(a.id,s.id,t.appointment.locationId))&&(!t.appointment.categoryId||a.serviceList.filter(function(e){return"visible"===e.status&&e.categoryId===t.appointment.categoryId}).length>0)}).length>0});return this.options.isFrontEnd?s:this.getFilteredEntities(s.map(function(t){return t.id}),"employees","providerId").sort(function(t,e){return t.disabled-e.disabled})},servicesFiltered:function(){var t=this,e=[];if(this.appointment.providerId){var a=this.employeesFiltered.find(function(e){return e.id===t.appointment.providerId});e=void 0!==a?a.serviceList.filter(function(t){return"visible"===t.status}).map(function(t){return t.id}):[]}var s=this.visibleServices.filter(function(a){return!(t.appointment.providerId&&-1===e.indexOf(a.id)||t.appointment.locationId&&!(t.employeesFiltered.filter(function(e){return t.isEmployeeServiceLocation(e.id,a.id,t.appointment.locationId)}).length>0)||t.appointment.categoryId&&a.categoryId!==t.appointment.categoryId)});return this.options.isFrontEnd?s:this.getFilteredEntities(s.map(function(t){return t.id}),"services","serviceId")},sortWithNull:function(){return function(t,e){return t.position===e.position?0:null===t.position?1:null===e.position?-1:t.position<e.position?-1:1}},sortNotifications:function(){return function(t,e){return t.customName===e.customName?0:null===t.customName?1:null===e.customName?-1:t.id>e.id?-1:1}},locationsFiltered:function(){var t=this,e=[];if(this.appointment.providerId){var a=this.employeesFiltered.find(function(e){return e.id===t.appointment.providerId});e=void 0!==a?a.serviceList.filter(function(t){return"visible"===t.status}):[]}var s=null;this.appointment.categoryId&&(s=this.categoriesFiltered.find(function(e){return e.id===t.appointment.categoryId}));var i=this.visibleLocations.filter(function(a){return(!t.appointment.providerId||e.filter(function(e){return t.isEmployeeServiceLocation(t.appointment.providerId,e.id,a.id)}).length>0)&&(!t.appointment.serviceId||t.employeesFiltered.filter(function(e){return t.isEmployeeServiceLocation(e.id,t.appointment.serviceId,a.id)}).length>0)&&(!t.appointment.categoryId||void 0!==s&&t.employeesFiltered.filter(function(e){return e.serviceList.filter(function(i){return"visible"===i.status&&i.categoryId===s.id&&t.isEmployeeServiceLocation(e.id,i.id,a.id)}).length>0}).length>0)});return this.options.isFrontEnd?i:this.getFilteredEntities(i.map(function(t){return t.id}),"locations","locationId").sort(function(t,e){return t.disabled-e.disabled})},couponsFilteredService:function(){var t=this,e=[];return this.options.entities.coupons&&(e=this.options.entities.coupons.filter(function(t){return t.serviceList.length>0}),this.appointment.serviceId)?e.filter(function(e){return e.serviceList.find(function(e){return e.id===t.appointment.serviceId})}):e},couponsFilteredEvent:function(){var t=this,e=[];return this.options.entities.coupons&&(e=this.options.entities.coupons.filter(function(t){return t.eventList.length>0}),this.eventId)?e.filter(function(e){return e.eventList.find(function(e){return e.id===t.eventId})}):e},categoriesFiltered:function(){var t=this,e=null;this.appointment.providerId&&(e=this.employeesFiltered.find(function(e){return e.id===t.appointment.providerId}));var a=null;this.appointment.serviceId&&(a=this.servicesFiltered.find(function(e){return e.id===t.appointment.serviceId}));var s=this.options.entities.categories.filter(function(s){return(!t.appointment.serviceId||void 0!==a&&a.categoryId===s.id)&&(!t.appointment.locationId||s.serviceList.filter(function(e){return"visible"===e.status&&t.employeesFiltered.filter(function(a){return t.isEmployeeServiceLocation(a.id,e.id,t.appointment.locationId)}).length>0}).length>0)&&(!t.appointment.providerId||void 0!==e&&-1!==e.serviceList.filter(function(e){return"visible"===e.status&&t.isEmployeeService(t.appointment.providerId,e.id)}).map(function(t){return t.categoryId}).indexOf(s.id))});return this.options.isFrontEnd?s:this.getFilteredEntities(s.map(function(t){return t.id}),"categories","categoryId").sort(function(t,e){return t.disabled-e.disabled})}}}},661:function(t,e,a){(function(a){var s,i,n,o;o=void 0!==a?a:this.window||this.global,i=[],s=function(t){var e,a={},s=!!document.querySelector&&!!t.addEventListener,i={initClass:"js-inlinesvg",svgSelector:"img.svg"},n=function(){var t={},e=!1,a=0,s=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],a++);for(var i=function(a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e&&"[object Object]"===Object.prototype.toString.call(a[s])?t[s]=n(!0,t[s],a[s]):t[s]=a[s])};s>a;a++){i(arguments[a])}return t},o=function(t){var a=document.querySelectorAll(e.svgSelector),s=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}}(a.length,t);Array.prototype.forEach.call(a,function(t,a){var i=t.src||t.getAttribute("data-src"),n=t.attributes,o=new XMLHttpRequest;o.open("GET",i,!0),o.onload=function(){if(o.status>=200&&o.status<400){var a=(new DOMParser).parseFromString(o.responseText,"text/xml").getElementsByTagName("svg")[0];if(a.removeAttribute("xmlns:a"),a.removeAttribute("width"),a.removeAttribute("height"),a.removeAttribute("x"),a.removeAttribute("y"),a.removeAttribute("enable-background"),a.removeAttribute("xmlns:xlink"),a.removeAttribute("xml:space"),a.removeAttribute("version"),Array.prototype.slice.call(n).forEach(function(t){"src"!==t.name&&"alt"!==t.name&&a.setAttribute(t.name,t.value)}),a.classList?a.classList.add("inlined-svg"):a.className+=" inlined-svg",a.setAttribute("role","img"),n.longdesc){var i=document.createElementNS("http://www.w3.org/2000/svg","desc"),l=document.createTextNode(n.longdesc.value);i.appendChild(l),a.insertBefore(i,a.firstChild)}if(n.alt){a.setAttribute("aria-labelledby","title");var r=document.createElementNS("http://www.w3.org/2000/svg","title"),c=document.createTextNode(n.alt.value);r.appendChild(c),a.insertBefore(r,a.firstChild)}t.parentNode.replaceChild(a,t),s(e.svgSelector)}else console.error("There was an error retrieving the source of the SVG.")},o.onerror=function(){console.error("There was an error connecting to the origin server.")},o.send()})};return a.init=function(t,a){s&&(e=n(i,t||{}),o(a||function(){}),document.documentElement.className+=" "+e.initClass)},a}(o),void 0===(n="function"==typeof s?s.apply(e,i):s)||(t.exports=n)}).call(e,a(37))},665:function(t,e,a){"use strict";var s=a(0),i=a.n(s);e.a={data:function(){return{payBtnLoader:null,timeZone:"",statusesCabinet:[{value:"approved",label:this.$root.labels.approved},{value:"pending",label:this.$root.labels.pending},{value:"canceled",label:this.$root.labels.canceled},{value:"rejected",label:this.$root.labels.rejected},{value:"no-show",label:this.$root.labels["no-show"]},{value:"waiting",label:this.$root.labels.waiting_list}]}},methods:{isPanelActive:function(t){return!this.$root.shortcodeData.cabinet||!(this.$root.shortcodeData.cabinet.appointments||this.$root.shortcodeData.cabinet.events||this.$root.shortcodeData.cabinet.profile)||(!("appointments"!==t||!this.$root.shortcodeData.cabinet||!this.$root.shortcodeData.cabinet.appointments)||(!("events"!==t||!this.$root.shortcodeData.cabinet||!this.$root.shortcodeData.cabinet.events)||"profile"===t&&this.$root.shortcodeData.cabinet&&this.$root.shortcodeData.cabinet.profile))},changeRange:function(t){this.$store.commit("cabinet/setParams",{dates:t}),this.setDatePickerSelectedDaysCount(this.$store.state.cabinet.params.dates.start,this.$store.state.cabinet.params.dates.end),this.$emit("refreshReservations")},isBookingCancelable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.cancelable&&!("canceled"===t.bookings[e].status||"rejected"===t.bookings[e].status||"no-show"===t.bookings[e].status)},isBookingReschedulable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.reschedulable&&!("canceled"===t.bookings[e].status||"rejected"===t.bookings[e].status||"no-show"===t.bookings[e].status)},disableAuthorizationHeader:function(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader},getAuthorizationHeaderObject:function(){return this.$store.state.cabinet.ameliaToken&&!this.disableAuthorizationHeader()?{headers:{Authorization:"Bearer "+this.$store.state.cabinet.ameliaToken}}:{}},getPaymentLink:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.payBtnLoader=e.bookings?e.bookings[0].id:e.id;var i=JSON.parse(JSON.stringify(e));i[i.type]=e;var n=JSON.parse(JSON.stringify(this.$store.state.cabinet.profile));if(n.birthday=null,i.customer=n,"package"===i.type){var o=s||Object.keys(i.payments)[0],l=i.payments[o].payments.sort(function(t,e){return t.id>e.id?1:-1});i.paymentId=l[0].id,i.packageCustomerId=o,i.packageReservations=[],i.bookable.forEach(function(t){i.packageReservations=i.packageReservations.concat(t.service.bookedAppointments.filter(function(t){return t.bookings[0].packageCustomerService.packageCustomer.id===parseInt(o)}))}),i.booking=i.packageReservations&&i.packageReservations.length>0?i.packageReservations[0].bookings[0]:null}else i.booking=e.bookings[0],i.paymentId=e.bookings[0].payments[0].id;this.$http.post(this.$root.getAjaxUrl+"/payments/link",{data:i,paymentMethod:t}).then(function(t){a.payBtnLoader=null,!t.data.data.error&&t.data.data.paymentLink?window.location.href=t.data.data.paymentLink:a.notify(a.$root.labels.error,a.$root.labels.payment_link_error,"error")}).catch(function(t){a.payBtnLoader=null,a.notify(a.$root.labels.error,t.message,"error"),console.log(t)})},paymentFromCustomerPanel:function(t,e){if("package"!==t.type&&(!t.bookings||0===t.bookings.length))return!1;var a=this.$root.settings;e&&e.payments&&e.payments.paymentLinks&&(a=JSON.parse(e));var s=a.payments.paymentLinks,n="package"===t.type?Object.values(t.purchases).filter(function(t){return"approved"===t.status}).length>0:"approved"===t.bookings[0].status||"pending"===t.bookings[0].status,o="package"===t.type?t.price:t.bookings[0].price,l=!1;switch(t.type){case"package":l=!t.expireDateString||i()(t.expireDateString,"YYYY-MM-DD HH:mm:ss").isAfter(i()());break;case"appointment":l=i()(t.bookingStart,"YYYY-MM-DD HH:mm:ss").isAfter(i()())&&t.bookings[0].payments.length>0;break;case"event":l=i()(t.periods[t.periods.length-1].periodEnd,"YYYY-MM-DD HH:mm:ss").isAfter(i()())&&t.bookings[0].payments.length>0}return this.paymentMethods(a).length&&s&&s.enabled&&n&&o>0&&l},paymentMethods:function(t){"string"==typeof t&&(t=JSON.parse(t));var e=[];return t=t.payments,this.$root.settings.payments.wc.enabled?e.push({value:"wc",label:this.$root.labels.wc}):!this.$root.settings.payments.mollie.enabled||"mollie"in t&&!t.mollie.enabled?!this.$root.settings.payments.square.enabled||"square"in t&&!t.square.enabled?(!this.$root.settings.payments.payPal.enabled||"payPal"in t&&!t.payPal.enabled||e.push({value:"payPal",label:this.$root.labels.pay_pal}),!this.$root.settings.payments.stripe.enabled||"stripe"in t&&!t.stripe.enabled||e.push({value:"stripe",label:this.$root.labels.credit_card}),!this.$root.settings.payments.razorpay.enabled||"razorpay"in t&&!t.razorpay.enabled||e.push({value:"razorpay",label:this.$root.labels.razorpay})):e.push({value:"square",label:this.$root.labels.on_line}):e.push({value:"mollie",label:this.$root.labels.on_line}),e}}}},666:function(t,e,a){"use strict";e.a={methods:{getEntityTax:function(t,e){var a=[];"taxes"in this&&this.taxes&&this.taxes.length?a=this.taxes:"options"in this&&"entities"in this.options&&"taxes"in this.options.entities&&this.options.entities.taxes&&this.options.entities.taxes.length&&(a=this.options.entities.taxes);var s=a.find(function(a){return a[e+"List"].find(function(e){return e.id===t})});return!s||void 0===s||"status"in s&&"visible"!==s.status?null:s},getEntityTaxAmount:function(t,e){switch(t.type){case"percentage":return this.getPercentage(e,t.amount);case"fixed":return t.amount}},getAmountData:function(t,e,a){t&&!t.excluded&&(e=this.getBaseAmount(e,t));var s=a?e/100*a.discount+a.deduction:0,i=0;return t&&(i=this.getEntityTaxAmount(t,e-s)),{total:e,discount:s,tax:i}},getEventBookingPriceAmount:function(t){var e=0;return t.ticketsData&&t.ticketsData.length?t.ticketsData.forEach(function(a){e+=a.price*(t.aggregatedPrice?a.persons:1)}):e=t.price*(t.aggregatedPrice?t.persons:1),this.getAmountData(t.tax&&t.tax.length?t.tax[0]:null,e,t.coupon)},getAppointmentPriceAmount:function(t,e,a,s,i){var n=this,o=null,l=this.$root.settings.payments.taxes.excluded,r=this.$root.settings.payments.taxes.enabled;"tax"in t?(l=(o=t.tax&&t.tax.length?t.tax[0]:null)?o.excluded:l,r=null!==o):r&&(o=this.getEntityTax(t.id,"service"));var c=(t.aggregatedPrice?a:1)*t.price,u=0,d=0,m=0,p=0;if(s){u=c,d=c,r&&o&&!l&&(c=this.getBaseAmount(c,o));var h=s.discount?this.getPercentage(c,s.discount):0,v=c-h;c=v;var g=s.deduction,f=0;if(v>0&&g>0&&(c=v-(f=v>=g?g:v),g=v>=g?0:g-v),r&&o&&l)p=this.getEntityTaxAmount(o,c);else if(r&&o&&!l){c=this.getBaseAmount((t.aggregatedPrice?a:1)*t.price,o);var b=this.getEntityTaxAmount(o,c-h-f);i?u=c+b:(u=c,d=c,p=b)}m=h+f,e.forEach(function(e){var o=null,l=n.$root.settings.payments.taxes.excluded,r=n.$root.settings.payments.taxes.enabled;"tax"in e?(e.tax&&!Array.isArray(e.tax)&&(e.tax=JSON.parse(e.tax)),l=(o=e.tax&&e.tax.length?e.tax[0]:null)?o.excluded:l,r=null!==o):r&&(o=n.getEntityTax(e.extraId,"extra"));var c=null===e.aggregatedPrice?t.aggregatedPrice:e.aggregatedPrice,d=e.price*e.quantity*(c?a:1),h=d;r&&o&&!l&&(d=n.getBaseAmount(d,o));var v=s.discount?n.getPercentage(d,s.discount):0,f=d-v;d=f;var b=0;if(f>0&&g>0&&(d=f-(b=f>=g?g:f),g=f>=g?0:g-f),r&&o&&l)p+=n.getEntityTaxAmount(o,d);else if(r&&o&&!l){d=n.getBaseAmount(e.price*e.quantity*(c?a:1),o);var y=n.getEntityTaxAmount(o,d-v-b);i?h=d+y:(h=d,p+=y)}else!r||o||l||(h=e.price*e.quantity*(c?a:1));u+=h,m+=v+b})}else r&&o&&l?p=this.getEntityTaxAmount(o,c):r&&o&&!l&&!i&&(c=this.getBaseAmount((t.aggregatedPrice?a:1)*t.price,o),p=this.getEntityTaxAmount(o,c)),u=c,d=c,e.forEach(function(e){var s=null===e.aggregatedPrice?t.aggregatedPrice:e.aggregatedPrice,o=e.price*e.quantity*(s?a:1),l=null,r=n.$root.settings.payments.taxes.excluded,c=n.$root.settings.payments.taxes.enabled;"tax"in e?(e.tax&&!Array.isArray(e.tax)&&(e.tax=JSON.parse(e.tax)),r=(l=e.tax&&e.tax.length?e.tax[0]:null)?l.excluded:r,c=null!==l):c&&(l=n.getEntityTax(e.extraId,"extra")),c&&l&&r?p+=n.getEntityTaxAmount(l,o):c&&l&&!r&&!i&&(o=n.getBaseAmount(e.price*e.quantity*(s?a:1),l),p+=n.getEntityTaxAmount(l,o)),u+=o});return{total:u,totalBookable:d,discount:m,tax:p}},getBaseAmount:function(t,e){switch(e.type){case"percentage":return t/(1+e.amount/100);case"fixed":return t-e.amount}},getPercentage:function(t,e){return t*e/100},getRound:function(t){return Math.round(100*t)/100}}}},668:function(t,e,a){"use strict";(function(e){var s=a(656),i=a(711),n={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!s.isUndefined(t)&&s.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var l,r={adapter:("undefined"!=typeof XMLHttpRequest?l=a(684):void 0!==e&&(l=a(684)),l),transformRequest:[function(t,e){return i(e,"Content-Type"),s.isFormData(t)||s.isArrayBuffer(t)||s.isBuffer(t)||s.isStream(t)||s.isFile(t)||s.isBlob(t)?t:s.isArrayBufferView(t)?t.buffer:s.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):s.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};r.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],function(t){r.headers[t]={}}),s.forEach(["post","put","patch"],function(t){r.headers[t]=s.merge(n)}),t.exports=r}).call(e,a(142))},672:function(t,e,a){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a={methods:{getArrayCustomPricing:function(t){var e=null;if(void 0===t||null===t||""===t)e={enabled:!1,durations:{}};else if("object"===(void 0===t?"undefined":s(t))){if(Array.isArray(t.durations))return t;e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(t);var a=[];return Object.keys(e.durations).forEach(function(t){a.push({duration:parseInt(t),price:e.durations[t].price,rules:e.durations[t].rules})}),{enabled:e.enabled,durations:a}},getJsonCustomPricing:function(t){var e={};return t&&t.durations.filter(function(t){return t.duration}).length>0?(t.durations.forEach(function(t){e[t.duration]={price:t.price,rules:t.rules}}),JSON.stringify({enabled:t.enabled,durations:e})):JSON.stringify({enabled:!1,durations:{}})}}}},673:function(t,e,a){"use strict";var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=l(a(708)),n=l(a(726)),o=l(a(727));function l(t){return t&&t.__esModule?t:{default:t}}var r=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.progress=0,this.isPending=!1,this.errors=new n.default,["post","patch","put","delete"].forEach(function(t){e[t]=function(a,s){return e.submit(t,a,s)}})}return s(t,[{key:"submit",value:function(e,a){var s=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.toLowerCase(),this.hasFiles(i)&&(i=(0,o.default)(i),"post"!==e&&(i.append("_method",e.toUpperCase()),e="post")),this.progress=0,this.errors.clear(),this.isPending=!0,new Promise(function(n,o){t.defaults.axios[e](a,i,s.config()).then(function(t){n(t.data)}).catch(function(t){s.handleError(t),o(t)}).then(function(){return s.isPending=!1})})}},{key:"hasFiles",value:function(t){for(var e in t)if(this.fileIsPresent(t[e]))return!0;return!1}},{key:"fileIsPresent",value:function(t){return t instanceof File||t instanceof Array&&t.some(function(t){return t instanceof File})}},{key:"save",value:function(t,e){var a="post";return e.hasOwnProperty("id")&&(a="patch",t=this.urlToPatchResource(t,e)),this[a](t,e)}},{key:"urlToPatchResource",value:function(t,e){return t.replace(/\/+$/,"")+"/"+e.id}},{key:"config",value:function(){var t=this;return{onUploadProgress:function(e){t.progress=Math.round(100*e.loaded/e.total)}}}},{key:"handleError",value:function(t){if(t.response&&422===t.response.status){var e=t.response.data.hasOwnProperty("errors")?t.response.data.errors:t.response.data;this.errors.set(e)}}}]),t}();r.defaults={axios:i.default},t.exports=r},674:function(t,e,a){"use strict";var s=a(655);e.a={mixins:[s.a],data:function(){return{}},methods:{getInitEntitySettings:function(t){var e={payments:{paymentLinks:{enabled:this.$root.settings.payments.paymentLinks.enabled,changeBookingStatus:this.$root.settings.payments.paymentLinks.changeBookingStatus,redirectUrl:null},onSite:this.$root.settings.payments.onSite,wc:{enabled:this.$root.settings.payments.wc.enabled,productId:this.$root.settings.payments.wc.productId},payPal:{enabled:this.$root.settings.payments.payPal.enabled},stripe:{enabled:this.$root.settings.payments.stripe.enabled},mollie:{enabled:this.$root.settings.payments.mollie.enabled},square:{enabled:this.$root.settings.payments.square.enabled},razorpay:{enabled:this.$root.settings.payments.razorpay.enabled}}};switch(t){case"service":e.general={minimumTimeRequirementPriorToCanceling:null,minimumTimeRequirementPriorToRescheduling:null,redirectUrlAfterAppointment:null},e.general.defaultAppointmentStatus=null,e.general.numberOfDaysAvailableForBooking=0,e.general.minimumTimeRequirementPriorToBooking=null,e.zoom={enabled:this.$root.settings.zoom.enabled},e.lessonSpace={enabled:this.$root.settings.lessonSpace.enabled},e.googleMeet={enabled:this.$root.settings.googleCalendar.enabled&&this.$root.settings.googleCalendar.googleMeetEnabled};break;case"event":e.general={minimumTimeRequirementPriorToCanceling:null,redirectUrlAfterAppointment:null},e.zoom={enabled:this.$root.settings.zoom.enabled},e.lessonSpace={enabled:this.$root.settings.lessonSpace.enabled},e.googleMeet={enabled:this.$root.settings.googleCalendar.enabled&&this.$root.settings.googleCalendar.googleMeetEnabled},e.waitingList={enabled:!1,addingMethod:this.$root.settings.appointments.waitingListEvents.addingMethod,maxCapacity:1,maxExtraPeopleEnabled:!1,maxExtraPeople:0};break;case"package":e.general={redirectUrlAfterAppointment:null}}return e},setEntitySettings:function(t,e){t.settings=null!==t.settings?JSON.parse(t.settings):this.getInitEntitySettings(e),this.addMissingObjectProperties(t.settings,this.getInitEntitySettings(e))},updateSettings:function(t){var e=this;if(!this.$root.clonedSettings.payments.onSite||this.$root.clonedSettings.payments.stripe.enabled||this.$root.clonedSettings.payments.payPal.enabled||this.$root.clonedSettings.payments.wc.enabled||this.$root.clonedSettings.payments.mollie.enabled||this.$root.clonedSettings.payments.square.enabled||this.$root.clonedSettings.payments.razorpay.enabled){if(!1===this.$root.clonedSettings.payments.wc.enabled&&!1===this.$root.clonedSettings.payments.mollie.enabled&&null!==t){var a=JSON.parse(t);"payments"in a||(a.payments={}),["onSite","stripe","payPal","wc","mollie","razorpay","square"].forEach(function(t){t in a.payments||(a.payments[t]=e.$root.clonedSettings.payments[t])}),a.payments.wc=this.$root.clonedSettings.payments.wc,a.payments.mollie=this.$root.clonedSettings.payments.mollie,this.$root.clonedSettings.payments.onSite||(a.payments.onSite=this.$root.clonedSettings.payments.onSite),this.$root.clonedSettings.payments.square||(a.payments.square=this.$root.clonedSettings.payments.square),this.$root.clonedSettings.payments.payPal.enabled||(a.payments.payPal=this.$root.clonedSettings.payments.payPal),this.$root.clonedSettings.payments.stripe.enabled||(a.payments.stripe=this.$root.clonedSettings.payments.stripe),this.$root.clonedSettings.payments.razorpay.enabled&&a.payments.razorpay||(a.payments.razorpay=this.$root.clonedSettings.payments.razorpay),("onSite"in a.payments?a.payments.onSite&&this.$root.clonedSettings.payments.onSite:this.$root.clonedSettings.payments.onSite)&&("payPal"in a.payments?a.payments.payPal.enabled&&this.$root.clonedSettings.payments.payPal.enabled:this.$root.clonedSettings.payments.payPal.enabled)&&("stripe"in a.payments?a.payments.stripe.enabled&&this.$root.clonedSettings.payments.stripe.enabled:this.$root.clonedSettings.payments.stripe.enabled)&&("mollie"in a.payments?a.payments.mollie.enabled&&this.$root.clonedSettings.payments.mollie.enabled:this.$root.clonedSettings.payments.mollie.enabled)&&("razorpay"in a.payments?a.payments.razorpay.enabled&&this.$root.clonedSettings.payments.razorpay.enabled:this.$root.clonedSettings.payments.razorpay.enabled)&&("square"in a.payments?a.payments.square.enabled&&this.$root.clonedSettings.payments.square.enabled:this.$root.clonedSettings.payments.square.enabled)&&(a.payments=this.$root.clonedSettings.payments),t=JSON.stringify(a)}if(!0===this.$root.clonedSettings.payments.wc.enabled&&null!==t){var s=JSON.parse(t);"payments"in s||(s.payments={}),s.payments.onSite=this.$root.clonedSettings.payments.onSite,s.payments.stripe=this.$root.clonedSettings.payments.stripe,s.payments.payPal=this.$root.clonedSettings.payments.payPal,s.payments.mollie=this.$root.clonedSettings.payments.mollie,s.payments.square=this.$root.clonedSettings.payments.square,s.payments.razorpay=this.$root.clonedSettings.payments.razorpay,t=JSON.stringify(s)}if(!0===this.$root.clonedSettings.payments.mollie.enabled&&null!==t){var i=JSON.parse(t);"payments"in i||(i.payments={}),this.$root.clonedSettings.payments.onSite||(i.payments.onSite=this.$root.clonedSettings.payments.onSite,i.payments.mollie=this.$root.clonedSettings.payments.mollie),i.payments.stripe=this.$root.clonedSettings.payments.stripe,i.payments.payPal=this.$root.clonedSettings.payments.payPal,i.payments.razorpay=this.$root.clonedSettings.payments.razorpay,t=JSON.stringify(i)}if(!0===this.$root.clonedSettings.payments.square.enabled&&null!==t){var n=JSON.parse(t);"payments"in n||(n.payments={}),this.$root.clonedSettings.payments.onSite||(n.payments.onSite=this.$root.clonedSettings.payments.onSite,n.payments.square=this.$root.clonedSettings.payments.square),n.payments.stripe=this.$root.clonedSettings.payments.stripe,n.payments.payPal=this.$root.clonedSettings.payments.payPal,n.payments.razorpay=this.$root.clonedSettings.payments.razorpay,t=JSON.stringify(n)}"oliverPos"in this.$root.shortcodeData&&this.$root.shortcodeData.oliverPos&&((t=JSON.parse(t)).payments.onSite=!0,t.payments.stripe.enabled=!1,t.payments.payPal.enabled=!1,t.payments.razorpay.enabled=!1,t=JSON.stringify(t)),this.replaceExistingObjectProperties(this.$root.settings,null!==t?JSON.parse(t):this.$root.clonedSettings)}},prepareBookableEntityPaymentsForSave:function(t){var e=this,a={};return t&&"payments"in t&&("onSite"in t.payments&&t.payments.onSite!==this.$root.settings.payments.onSite&&(a.onSite=t.payments.onSite),["stripe","payPal","razorpay","mollie","square"].forEach(function(s){s in t.payments&&t.payments[s].enabled!==e.$root.settings.payments[s].enabled&&(a[s]=t.payments[s])}),"wc"in t.payments&&(t.payments.wc.enabled!==this.$root.settings.payments.wc.enabled||"productId"in t.payments.wc&&t.payments.wc.productId!==this.$root.settings.payments.wc.productId)&&(a.wc=t.payments.wc),a.paymentLinks=t.payments.paymentLinks),t.payments=a,t},prepareServiceSettingsForSave:function(t){var e=JSON.parse(JSON.stringify(t.settings));return"general"in e&&(e.general.redirectUrlAfterAppointment||delete e.general.redirectUrlAfterAppointment,e.general.defaultAppointmentStatus||delete e.general.defaultAppointmentStatus,(e.general.minimumTimeRequirementPriorToBooking||this.$root.settings.general.minimumTimeRequirementPriorToBooking)&&""!==e.general.minimumTimeRequirementPriorToBooking||delete e.general.minimumTimeRequirementPriorToBooking,(e.general.minimumTimeRequirementPriorToCanceling||this.$root.settings.general.minimumTimeRequirementPriorToCanceling)&&""!==e.general.minimumTimeRequirementPriorToCanceling||delete e.general.minimumTimeRequirementPriorToCanceling,(e.general.minimumTimeRequirementPriorToRescheduling||this.$root.settings.general.minimumTimeRequirementPriorToRescheduling)&&""!==e.general.minimumTimeRequirementPriorToRescheduling||delete e.general.minimumTimeRequirementPriorToRescheduling,e.general.numberOfDaysAvailableForBooking||delete e.general.numberOfDaysAvailableForBooking,0===Object.keys(e.general).length&&delete e.general),0===Object.keys(e).length&&(e=null),e}},computed:{}}},676:function(t,e,a){"use strict";e.a={data:function(){return{searchCounter:0,loadingCustomers:!1,searchCustomersTimer:null,searchedCustomers:[],dialogCustomer:!1}},methods:{setCustomerFromUrl:function(t){var e=null;this.options.entities.customers.length&&(e=this.options.entities.customers.find(function(e){return e.id==t})),e&&(this.params.customerId=e.id)},getInitCustomerObject:function(){return{id:0,firstName:"",lastName:"",externalId:"",phone:"",countryPhoneIso:null,email:"",gender:"",birthday:null,note:"",status:"visible",type:"customer",countPendingAppointments:0}},setInitialCustomers:function(){var t=this;"customer"!==this.$root.settings.role&&this.searchCustomers("",function(){var e=t.options&&"entities"in t.options&&"customers"in t.options.entities?t.options.entities.customers:[],a=e.map(function(t){return parseInt(t.id)}),s=e;t.searchedCustomers.forEach(function(t){-1===a.indexOf(parseInt(t.id))&&(a.push(t.id),s.push(t))}),t.$nextTick(function(){t.options.entities.customers=Object.values(s.sort(function(t,e){return t.firstName.toLowerCase()>e.firstName.toLowerCase()?1:-1})),t.params&&t.params.customerId&&t.setCustomerFromUrl(t.params.customerId)})})},searchCustomers:function(t,e){var a=this;clearTimeout(this.searchCustomersTimer),this.loadingCustomers=!0,this.searchCounter++,this.searchCustomersTimer=setTimeout(function(){var s=a.searchCounter,i={search:t,page:1,limit:a.$root.settings.general.customersFilterLimit,skipCount:1};a.params&&a.params.customerId&&(i.customers=[a.params.customerId]),a.$http.get(a.$root.getAjaxUrl+"/users/customers",{params:i}).then(function(t){s>=a.searchCounter&&(a.searchedCustomers=t.data.data.users.sort(function(t,e){return t.firstName.toLowerCase()>e.firstName.toLowerCase()?1:-1})),a.loadingCustomers=!1,e()}).catch(function(t){a.loadingCustomers=!1})},500)},getNoShowClass:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(s&&"blocked"===s)return"am-customer-name am-customer-blocked";if(!this.$root.settings.roles.enableNoShowTag)return"";var i=null,n=this.searchedCustomers.map(function(t){return t.id}),o=this.options&&this.options.entities?this.options.entities.customers.map(function(t){return t.id}):[];if(a)i=a.noShowCount;else if(null!==e&&0!==e.length&&null!==t){var l=e.find(function(e){return e.id===t});i=l?l.count:0}else n.includes(t)&&this.searchedCustomers.length&&0!==t?i=this.searchedCustomers.find(function(e){return e.id===t}).noShowCount:o.includes(t)&&this.options.entities.customers&&0!==t&&(i=this.options.entities.customers.find(function(e){return e.id===t}).noShowCount);var r="";if(i)switch(r="am-customer-name",!0){case 1===i:r+=" am-no-show-gray";break;case 2===i:r+=" am-no-show-yellow";break;case i>=3:r+=" am-no-show-red"}return r},getOptionClass:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=t.customer?t.customer:t,i=this.getNoShowClass(s.id,e,s.noShowCount?s:null,a)||"";return i+=s.email?" am-drop-item-name":""}}}},678:function(t,e,a){"use strict";e.a={data:function(){return{}},methods:{checkTranslations:function(t,e){var a=""!==e?JSON.parse(t.translations)[e]:JSON.parse(t.translations);if(window.localeLanguage[0]in a)return a[window.localeLanguage[0]];for(var s=Object.keys(a),i=Object.keys(a).map(function(t){return t.length>2?t.slice(0,2):t}),n=window.localeLanguage[0].length>2?window.localeLanguage[0].slice(0,2):window.localeLanguage[0],o="",l=0;l<i.length;l++)if(i[l]===n){o=a[s[l]];break}return o},getTranslated:function(t,e){return t.translations&&JSON.parse(t.translations)[e]&&this.checkTranslations(t,e)?this.checkTranslations(t,e):t[e]},getNameTranslated:function(t){return t.translations&&JSON.parse(t.translations).name&&this.checkTranslations(t,"name")?this.checkTranslations(t,"name"):t.name},getTicketTranslated:function(t){return t.translations&&this.checkTranslations(t,"")?this.checkTranslations(t,""):t.name},getCfLabelTranslated:function(t){return t.translations&&this.checkTranslations(t,"name")?this.checkTranslations(t,"name"):t.label},getCfOptionTranslated:function(t){return t.translations&&this.checkTranslations(t,"")?this.checkTranslations(t,""):t.label},getDescriptionTranslated:function(t){return t.translations&&JSON.parse(t.translations).description&&this.checkTranslations(t,"description")?this.checkTranslations(t,"description"):t.description},translateEntities:function(t){var e=this;t.services&&t.services.length&&t.services.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})}),t.locations&&t.locations.length&&t.locations.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)}),t.packages&&t.packages.length&&t.packages.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.bookable.forEach(function(t){t.service.name=e.getNameTranslated(t.service),t.service.description=e.getDescriptionTranslated(t.service),"extras"in t.service&&t.service.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})})}),t.categories&&t.categories.length&&t.categories.forEach(function(t){t.name=e.getNameTranslated(t),t.serviceList.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})})}),t.events&&t.events.length&&t.events.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})}),t.customFields&&t.customFields.length&&t.customFields.forEach(function(t){t.label=e.getCfLabelTranslated(t),t.options.forEach(function(t){t.label=e.getCfOptionTranslated(t)})}),t.employees&&t.employees.length&&t.employees.forEach(function(t){t.firstName=e.getTranslated(t,"firstName"),t.lastName=e.getTranslated(t,"lastName"),t.serviceList.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})})})}},computed:{}}},681:function(t,e,a){var s=a(90)(a(731),a(732),!1,null,null,null);t.exports=s.exports},683:function(t,e,a){"use strict";t.exports=function(t,e){return function(){for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];return t.apply(e,a)}}},684:function(t,e,a){"use strict";var s=a(656),i=a(712),n=a(714),o=a(715),l=a(716),r=a(685),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||a(717);t.exports=function(t){return new Promise(function(e,u){var d=t.data,m=t.headers;s.isFormData(d)&&delete m["Content-Type"];var p=new XMLHttpRequest,h="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||l(t.url)||(p=new window.XDomainRequest,h="onload",v=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var g=t.auth.username||"",f=t.auth.password||"";m.Authorization="Basic "+c(g+":"+f)}if(p.open(t.method.toUpperCase(),n(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[h]=function(){if(p&&(4===p.readyState||v)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var a="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,s={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:a,config:t,request:p};i(e,u,s),p=null}},p.onerror=function(){u(r("Network Error",t,null,p)),p=null},p.ontimeout=function(){u(r("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},s.isStandardBrowserEnv()){var b=a(718),y=(t.withCredentials||l(t.url))&&t.xsrfCookieName?b.read(t.xsrfCookieName):void 0;y&&(m[t.xsrfHeaderName]=y)}if("setRequestHeader"in p&&s.forEach(m,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete m[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),u(t),p=null)}),void 0===d&&(d=null),p.send(d)})}},685:function(t,e,a){"use strict";var s=a(713);t.exports=function(t,e,a,i,n){var o=new Error(t);return s(o,e,a,i,n)}},686:function(t,e,a){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},687:function(t,e,a){"use strict";function s(t){this.message=t}s.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},s.prototype.__CANCEL__=!0,t.exports=s},693:function(t,e,a){"use strict";var s=a(666);e.a={mixins:[s.a],data:function(){return{}},methods:{getPaymentType:function(t){return t.gateway&&"onSite"!==t.gateway?"partiallyPaid"===t.status?"deposit":"online":"onsite"},longNamePayments:function(t){return["mollie","razorpay","square"].includes(t)},getPaymentData:function(t,e,a,s){var i=this,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o={};if(o.paymentId=t.id,e){o.bookableType="appointment";var l=this.getProviderById(e.providerId);l.fullName=l.firstName+" "+l.lastName,o.appointment=[{bookable:this.getServiceById(e.serviceId),bookingStart:e.bookingStart,providers:[l]}],e.bookings.forEach(function(e){e.payments.forEach(function(a){a.id===t.id&&(o.appointment[0].booking=e)})}),n.forEach(function(t){var e=i.getProviderById(t.providerId);e.fullName=e.firstName+" "+e.lastName,o.appointment.push({bookable:i.getServiceById(t.serviceId),bookingStart:t.bookingStart,providers:[e],booking:t.bookings[0]})})}return a&&(o.bookableType="event",o.event=[{bookable:a,bookingStart:a.periods[0].periodStart,providers:a.providers}],a.bookings.forEach(function(e){e.payments.forEach(function(a){a.id===t.id&&(o.event[0].booking=e)})})),s&&(o.bookableType="package",o.package=[{bookable:s.package,bookingStart:null,providers:[],booking:s.booking}]),o.customer={email:t.customerEmail,firstName:t.customerFirstName,lastName:t.customerLastName,id:t.customerId},o},getPaymentStatusNiceName:function(t){switch(t){case"paid":return this.$root.labels.paid;case"pending":return this.$root.labels.pending;case"partiallyPaid":return this.$root.labels.partially_paid;case"refunded":return this.$root.labels.refunded}},getPaymentClassName:function(t){var e=t.gateway;return"oliver"===t.gatewayTitle&&(e="oliver"),"am-appointment-payment am-appointment-payment-"+e},getPaymentIconName:function(t){return"onSite"!==t.gateway&&"stripe"!==t.gateway||"oliver"!==t.gatewayTitle?t.gateway+".svg":"oliver.png"},getPaymentGatewayNiceName:function(t){return"stripe"===t.gateway&&"oliver"===t.gatewayTitle?this.$root.labels.oliver_on_line:"onSite"===t.gateway&&"oliver"===t.gatewayTitle?this.$root.labels.oliver_on_site:"onSite"===t.gateway?this.$root.labels.on_site:"wc"===t.gateway?t.gatewayTitle:t.gateway?t.gateway.charAt(0).toUpperCase()+t.gateway.slice(1):void 0},getPaymentIconWidth:function(t){switch(t){case"razorpay":return"76px";case"square":return"70px";case"mollie":return"38px";default:return"16px"}},getPaymentAmountData:function(t,e){var a={bookablePriceTotal:0,extrasPriceTotal:0,tax:0,wcTax:0,discountTotal:0,paidDeposit:0,paidRemaining:0,paid:0,refunded:0,subtotal:0,total:0,due:0},s=this;return t.forEach(function(t){var i=t.booking;switch(i.tax&&!Array.isArray(i.tax)&&(i.tax=JSON.parse(i.tax)),e){case"appointment":var n=s.getAppointmentPriceAmount({price:i.price,aggregatedPrice:i.aggregatedPrice,tax:i.tax,id:null},i.extras,i.persons,i.coupon,!1);a.bookablePriceTotal+=n.totalBookable,a.extrasPriceTotal+=n.total-n.totalBookable,a.tax+=n.tax,a.discountTotal+=n.discount;break;case"event":var o=s.getEventBookingPriceAmount(i);a.bookablePriceTotal+=o.total,a.extrasPriceTotal+=0,a.tax+=o.tax,a.discountTotal+=o.discount;break;case"package":var l=null;i.payments.forEach(function(t){l=t.coupon?t.coupon:l});var r=i.price*(i.aggregatedPrice?i.persons:1),c=s.getAmountData(i.tax&&i.tax.length?i.tax[0]:null,r,l);a.bookablePriceTotal+=c.total,a.extrasPriceTotal+=0,a.tax+=c.tax,a.discountTotal+=c.discount}var u=0,d=0;i.payments.forEach(function(t){a.discountTotal+=t.wcOrderId?t.wcItemCouponValue:0,"paid"===t.status?d+=t.amount:"partiallyPaid"===t.status&&(u+=t.amount),t.wcOrderId&&t.wcItemTaxValue&&(a.wcTax+=t.wcItemTaxValue)}),a.paidDeposit+=u,a.paidRemaining+=d,a.refunded+=i.payments.filter(function(t){return"refunded"===t.status}).reduce(function(t,e){return t+e.amount},0)}),a.subTotal=a.bookablePriceTotal+a.extrasPriceTotal,a.total=a.subTotal+a.tax+a.wcTax,a.total-=a.discountTotal,a.paid=a.paidDeposit+a.paidRemaining,a.total=a.total>=0?a.total:0,a.due=a.total-a.paid>0?a.total-a.paid:0,a}}}},694:function(t,e,a){var s=a(90)(a(697),a(698),!1,null,null,null);t.exports=s.exports},697:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(91),i=a(336),n=a(654);e.default={mixins:[s.a,i.a,n.a],props:["oldCustomize","appointmentsApproved","appointmentsPending","employeesTotal","customersTotal","locationsTotal","packagesTotal","resourcesTotal","servicesTotal","categoriesTotal","financeTotal","addNewTaxBtnDisplay","addNewCouponBtnDisplay","addNewCustomFieldBtnDisplay","locations","categories","bookableType","params","fetched"],methods:{showMainCustomize:function(){this.$emit("showMainCustomize",null)},showDialogCustomer:function(){this.$emit("newCustomerBtnClicked",null)},showDialogAppointment:function(){this.$emit("newAppointmentBtnClicked",null)},showDialogEvent:function(){this.$emit("newEventBtnClicked",null)},showDialogEmployee:function(){this.$emit("newEmployeeBtnClicked")},showDialogLocation:function(){this.$emit("newLocationBtnClicked")},showDialogService:function(){this.$emit("newServiceBtnClicked")},showDialogPackage:function(){this.$emit("newPackageBtnClicked")},showDialogPackageBooking:function(){this.$emit("newPackageBookingBtnClicked")},showDialogResource:function(){this.$emit("newResourceBtnClicked")},showDialogTax:function(){this.$emit("newTaxBtnClicked")},showDialogCoupon:function(){this.$emit("newCouponBtnClicked")},showDialogCustomFields:function(){this.$emit("newCustomFieldBtnClicked")},selectAllInCategory:function(t){this.$emit("selectAllInCategory",t)},changeFilter:function(){this.$emit("changeFilter")}}}},698:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"am-page-header am-section"},[a("el-row",{attrs:{type:"wpamelia-calendar"===t.$router.currentRoute.name?"":"flex",align:"middle"}},[a("el-col",{attrs:{span:"wpamelia-calendar"===t.$router.currentRoute.name?6:18}},[a("div",{staticClass:"am-logo"},[a("img",{staticClass:"logo-big",attrs:{width:"92",src:t.$root.getUrl+"public/img/amelia-logo-horizontal-1.svg"}}),t._v(" "),a("img",{staticClass:"logo-small",attrs:{width:"28",src:t.$root.getUrl+"public/img/amelia-logo-horizontal-1.svg"}})]),t._v(" "),a("h1",{staticClass:"am-page-title"},[t._v("\n        "+t._s(t.bookableType?t.$root.labels[t.bookableType]:t.$router.currentRoute.meta.title)+"\n\n        "),t._v(" "),t.appointmentsApproved>=0?a("span",{staticClass:"am-appointments-number approved"},[t._v("\n          "+t._s(t.appointmentsApproved)+"\n        ")]):t._e(),t._v(" "),t.appointmentsPending>=0?a("span",{staticClass:"am-appointments-number pending"},[t._v("\n          "+t._s(t.appointmentsPending)+"\n        ")]):t._e(),t._v(" "),t.employeesTotal>=0&&!0===t.$root.settings.capabilities.canReadOthers?a("span",[a("span",{staticClass:"total-number"},[t._v(t._s(t.employeesTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.customersTotal>=0?a("span",[a("span",{staticClass:"total-number"},[t._v(t._s(t.customersTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.locationsTotal>=0?a("span",[a("span",{staticClass:"total-number"},[t._v(t._s(t.locationsTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.servicesTotal>=0&&"services"===t.bookableType?a("span",[a("span",{staticClass:"total-number"},[t._v(t._s(t.servicesTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.packagesTotal>=0&&"packages"===t.bookableType?a("span",[a("span",{staticClass:"total-number"},[t._v(t._s(t.packagesTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.resourcesTotal>=0&&"resources"===t.bookableType?a("span",[a("span",{staticClass:"total-number"},[t._v(t._s(t.resourcesTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.financeTotal>=0?a("span",[a("span",{staticClass:"total-number"},[t._v(t._s(t.financeTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e()])]),t._v(" "),a("el-col",{staticClass:"align-right v-calendar-column",attrs:{span:"wpamelia-calendar"===t.$router.currentRoute.name?18:6}},["wpamelia-appointments"===t.$router.currentRoute.name&&(!0===t.$root.settings.capabilities.canWriteOthers||"provider"===this.$root.settings.role&&this.$root.settings.roles.allowWriteAppointments)?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogAppointment}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_appointment))])]):t._e(),t._v(" "),"wpamelia-events"===t.$router.currentRoute.name&&(!0===t.$root.settings.capabilities.canWriteOthers||"provider"===this.$root.settings.role&&this.$root.settings.roles.allowWriteEvents)?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogEvent}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_event))])]):t._e(),t._v(" "),"wpamelia-employees"===t.$router.currentRoute.name&&!0===t.$root.settings.capabilities.canWrite&&!0===t.$root.settings.capabilities.canWriteOthers?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogEmployee}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_employee))])]):t._e(),t._v(" "),"wpamelia-customers"===t.$router.currentRoute.name&&!0===t.$root.settings.capabilities.canWrite?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogCustomer}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_customer))])]):t._e(),t._v(" "),"wpamelia-locations"===t.$router.currentRoute.name&&!0===t.$root.settings.capabilities.canWrite?a("el-button",{staticClass:"am-dialog-create",class:t.licenceClassDisabled(),attrs:{type:"primary",disabled:t.notInLicence()},on:{click:t.showDialogLocation}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_location))])]):t._e(),t._v(" "),"wpamelia-services"===t.$router.currentRoute.name&&t.categoriesTotal>0&&!0===t.$root.settings.capabilities.canWrite&&"services"===t.bookableType?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogService}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_service))])]):t._e(),t._v(" "),"wpamelia-services"===t.$router.currentRoute.name&&!0===t.$root.settings.capabilities.canWrite&&"packages"===t.bookableType?a("el-button",{staticClass:"am-dialog-create",class:t.licenceClassDisabled("pro"),attrs:{type:"primary",disabled:t.notInLicence("pro")},on:{click:function(e){t.packagesTotal>=0?t.showDialogPackage():t.showDialogPackageBooking()}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.packagesTotal>=0?t.$root.labels.add_package:t.$root.labels.book_package))])]):t._e(),t._v(" "),"wpamelia-services"===t.$router.currentRoute.name&&!0===t.$root.settings.capabilities.canWrite&&"resources"===t.bookableType?a("el-button",{staticClass:"am-dialog-create",class:t.licenceClassDisabled("pro"),attrs:{type:"primary",disabled:t.notInLicence("pro")},on:{click:function(e){return t.showDialogResource()}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_resource))])]):t._e(),t._v(" "),"wpamelia-finance"===t.$router.currentRoute.name&&t.addNewTaxBtnDisplay&&!0===t.$root.settings.capabilities.canWrite?a("el-button",{staticClass:"am-dialog-create",class:t.licenceClassDisabled(),attrs:{type:"primary",disabled:t.notInLicence()},on:{click:t.showDialogTax}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_tax))])]):t._e(),t._v(" "),"wpamelia-finance"===t.$router.currentRoute.name&&t.addNewCouponBtnDisplay&&!0===t.$root.settings.capabilities.canWrite?a("el-button",{staticClass:"am-dialog-create",class:t.licenceClassDisabled("starter"),attrs:{type:"primary",disabled:t.notInLicence("starter")},on:{click:t.showDialogCoupon}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_coupon))])]):t._e(),t._v(" "),a("transition",{attrs:{name:"fade"}},["wpamelia-cf"===t.$router.currentRoute.name&&t.addNewCustomFieldBtnDisplay?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogCustomFields}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_custom_field))])]):t._e()],1),t._v(" "),"wpamelia-dashboard"===t.$router.currentRoute.name?a("div",{staticClass:"v-calendar-column"},[a("div",{staticClass:"el-form-item__content"},[a("v-date-picker",{attrs:{mode:"range","popover-visibility":"focus","popover-direction":"bottom","popover-align":"right","tint-color":"#1A84EE","show-day-popover":!1,"input-props":{class:"el-input__inner"},"is-expanded":!1,"is-required":!0,"input-class":"el-input__inner",formats:t.vCalendarFormats,"is-double-paned":!0},on:{input:t.changeFilter},model:{value:t.params.dates,callback:function(e){t.$set(t.params,"dates",e)},expression:"params.dates"}})],1)]):t._e(),t._v(" "),"wpamelia-calendar"===t.$router.currentRoute.name?a("div",{staticClass:"am-calendar-header-filters"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:t.$root.labels.services+":"}},[a("el-select",{attrs:{multiple:"",filterable:"","collapse-tags":"",loading:!t.fetched,placeholder:t.$root.labels.all_services},on:{change:t.changeFilter},model:{value:t.params.services,callback:function(e){t.$set(t.params,"services",e)},expression:"params.services"}},t._l(t.categories,function(e){return a("div",{key:e.id},[a("div",{staticClass:"am-drop-parent",on:{click:function(a){return t.selectAllInCategory(e.id)}}},[a("span",[t._v(t._s(e.name))])]),t._v(" "),t._l(e.serviceList,function(t){return a("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2)}),0)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.locations.length,expression:"locations.length"}],attrs:{label:t.$root.labels.locations+":"}},[a("el-select",{attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:t.$root.labels.all_locations,loading:!t.fetched},on:{change:t.changeFilter},model:{value:t.params.locations,callback:function(e){t.$set(t.params,"locations",e)},expression:"params.locations"}},t._l(t.locations,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),"wpamelia-calendar"===t.$router.currentRoute.name&&("admin"===t.$root.settings.role||"manager"===t.$root.settings.role||"provider"===t.$root.settings.role&&t.$root.settings.roles.allowWriteAppointments)?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogAppointment}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_appointment))])]):t._e()],1):t._e(),t._v(" "),t.oldCustomize&&"wpamelia-customize"===t.$router.currentRoute.name?a("div",{staticClass:"am-calendar-header-filters"},[a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showMainCustomize}},[a("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.go_back))])])],1):t._e()],1)],1)],1)},staticRenderFns:[]}},699:function(t,e,a){var s;s=function(){return function(t){function e(s){if(a[s])return a[s].exports;var i=a[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,s){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=".",e(e.s=9)}([function(t,e,a){"use strict";e.a={prefix:"",suffix:"",thousands:",",decimal:".",precision:2}},function(t,e,a){"use strict";var s=a(2),i=a(5),n=a(0);e.a=function(t,e){if(e.value){var o=a.i(i.a)(n.a,e.value);if("INPUT"!==t.tagName.toLocaleUpperCase()){var l=t.getElementsByTagName("input");1!==l.length||(t=l[0])}t.oninput=function(){var e=t.value.length-t.selectionEnd;t.value=a.i(s.a)(t.value,o),e=Math.max(e,o.suffix.length),e=t.value.length-e,e=Math.max(e,o.prefix.length+1),a.i(s.b)(t,e),t.dispatchEvent(a.i(s.c)("change"))},t.onfocus=function(){a.i(s.b)(t,t.value.length-o.suffix.length)},t.oninput(),t.dispatchEvent(a.i(s.c)("input"))}}},function(t,e,a){"use strict";function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.a;"number"==typeof t&&(t=t.toFixed(o(e.precision)));var a=t.indexOf("-")>=0?"-":"",s=r(l(n(t),e.precision)).split("."),i=s[0],c=s[1];return i=function(t,e){return t.replace(/(\d)(?=(?:\d{3})+\b)/gm,"$1"+e)}(i,e.thousands),e.prefix+a+function(t,e,a){return e?t+a+e:t}(i,c,e.decimal)+e.suffix}function i(t,e){var a=t.indexOf("-")>=0?-1:1,s=l(n(t),e);return parseFloat(s)*a}function n(t){return r(t).replace(/\D+/g,"")||"0"}function o(t){return function(t,e,a){return Math.max(t,Math.min(e,a))}(0,t,20)}function l(t,e){var a=Math.pow(10,e);return(parseFloat(t)/a).toFixed(o(e))}function r(t){return t?t.toString():""}function c(t,e){var a=function(){t.setSelectionRange(e,e)};t===document.activeElement&&(a(),setTimeout(a,1))}function u(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}var d=a(0);a.d(e,"a",function(){return s}),a.d(e,"d",function(){return i}),a.d(e,"b",function(){return c}),a.d(e,"c",function(){return u})},function(t,e,a){"use strict";function s(t,e){e&&Object.keys(e).map(function(t){l.a[t]=e[t]}),t.directive("money",o.a),t.component("money",n.a)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),n=a.n(i),o=a(1),l=a(0);a.d(e,"Money",function(){return n.a}),a.d(e,"VMoney",function(){return o.a}),a.d(e,"options",function(){return l.a}),a.d(e,"VERSION",function(){return r});var r="0.8.1";e.default=s,"undefined"!=typeof window&&window.Vue&&window.Vue.use(s)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(1),i=a(0),n=a(2);e.default={name:"Money",props:{value:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:function(){return i.a.precision}},decimal:{type:String,default:function(){return i.a.decimal}},thousands:{type:String,default:function(){return i.a.thousands}},prefix:{type:String,default:function(){return i.a.prefix}},suffix:{type:String,default:function(){return i.a.suffix}}},directives:{money:s.a},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(t,e){var s=a.i(n.a)(t,this.$props);s!==this.formattedValue&&(this.formattedValue=s)}}},methods:{change:function(t){this.$emit("input",this.masked?t.target.value:a.i(n.d)(t.target.value,this.precision))}}}},function(t,e,a){"use strict";e.a=function(t,e){return t=t||{},e=e||{},Object.keys(t).concat(Object.keys(e)).reduce(function(a,s){return a[s]=void 0===e[s]?t[s]:e[s],a},{})}},function(t,e,a){var s=a(7)(a(4),a(8),null,null);t.exports=s.exports},function(t,e){t.exports=function(t,e,a,s){var i,n=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(i=t,n=t.default);var l="function"==typeof n?n.options:n;if(e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns),a&&(l._scopeId=a),s){var r=l.computed||(l.computed={});Object.keys(s).forEach(function(t){var e=s[t];r[t]=function(){return e}})}return{esModule:i,exports:n,options:l}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"money",rawName:"v-money",value:{precision:t.precision,decimal:t.decimal,thousands:t.thousands,prefix:t.prefix,suffix:t.suffix},expression:"{precision, decimal, thousands, prefix, suffix}"}],staticClass:"v-money",attrs:{type:"tel"},domProps:{value:t.formattedValue},on:{change:t.change}})},staticRenderFns:[]}},function(t,e,a){t.exports=a(3)}])},t.exports=s()},702:function(t,e,a){"use strict";e.a={data:function(){return{}},methods:{updateStashEntities:function(t){this.$root.settings.activation.stash&&this.$http.post(this.$root.getAjaxUrl+"/stash",t).then(function(t){})}}}},708:function(t,e,a){t.exports=a(709)},709:function(t,e,a){"use strict";var s=a(656),i=a(683),n=a(710),o=a(668);function l(t){var e=new n(t),a=i(n.prototype.request,e);return s.extend(a,n.prototype,e),s.extend(a,e),a}var r=l(o);r.Axios=n,r.create=function(t){return l(s.merge(o,t))},r.Cancel=a(687),r.CancelToken=a(724),r.isCancel=a(686),r.all=function(t){return Promise.all(t)},r.spread=a(725),t.exports=r,t.exports.default=r},710:function(t,e,a){"use strict";var s=a(668),i=a(656),n=a(719),o=a(720),l=a(722),r=a(723);function c(t){this.defaults=t,this.interceptors={request:new n,response:new n}}c.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(s,this.defaults,{method:"get"},t)).method=t.method.toLowerCase(),t.baseURL&&!l(t.url)&&(t.url=r(t.baseURL,t.url));var e=[o,void 0],a=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)a=a.then(e.shift(),e.shift());return a},i.forEach(["delete","get","head","options"],function(t){c.prototype[t]=function(e,a){return this.request(i.merge(a||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){c.prototype[t]=function(e,a,s){return this.request(i.merge(s||{},{method:t,url:e,data:a}))}}),t.exports=c},711:function(t,e,a){"use strict";var s=a(656);t.exports=function(t,e){s.forEach(t,function(a,s){s!==e&&s.toUpperCase()===e.toUpperCase()&&(t[e]=a,delete t[s])})}},712:function(t,e,a){"use strict";var s=a(685);t.exports=function(t,e,a){var i=a.config.validateStatus;a.status&&i&&!i(a.status)?e(s("Request failed with status code "+a.status,a.config,null,a.request,a)):t(a)}},713:function(t,e,a){"use strict";t.exports=function(t,e,a,s,i){return t.config=e,a&&(t.code=a),t.request=s,t.response=i,t}},714:function(t,e,a){"use strict";var s=a(656);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,a){if(!e)return t;var n;if(a)n=a(e);else if(s.isURLSearchParams(e))n=e.toString();else{var o=[];s.forEach(e,function(t,e){null!==t&&void 0!==t&&(s.isArray(t)&&(e+="[]"),s.isArray(t)||(t=[t]),s.forEach(t,function(t){s.isDate(t)?t=t.toISOString():s.isObject(t)&&(t=JSON.stringify(t)),o.push(i(e)+"="+i(t))}))}),n=o.join("&")}return n&&(t+=(-1===t.indexOf("?")?"?":"&")+n),t}},715:function(t,e,a){"use strict";var s=a(656);t.exports=function(t){var e,a,i,n={};return t?(s.forEach(t.split("\n"),function(t){i=t.indexOf(":"),e=s.trim(t.substr(0,i)).toLowerCase(),a=s.trim(t.substr(i+1)),e&&(n[e]=n[e]?n[e]+", "+a:a)}),n):n}},716:function(t,e,a){"use strict";var s=a(656);t.exports=s.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");function i(t){var s=t;return e&&(a.setAttribute("href",s),s=a.href),a.setAttribute("href",s),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}return t=i(window.location.href),function(e){var a=s.isString(e)?i(e):e;return a.protocol===t.protocol&&a.host===t.host}}():function(){return!0}},717:function(t,e,a){"use strict";var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(){this.message="String contains an invalid character"}i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,a,n=String(t),o="",l=0,r=s;n.charAt(0|l)||(r="=",l%1);o+=r.charAt(63&e>>8-l%1*8)){if((a=n.charCodeAt(l+=.75))>255)throw new i;e=e<<8|a}return o}},718:function(t,e,a){"use strict";var s=a(656);t.exports=s.isStandardBrowserEnv()?{write:function(t,e,a,i,n,o){var l=[];l.push(t+"="+encodeURIComponent(e)),s.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),s.isString(i)&&l.push("path="+i),s.isString(n)&&l.push("domain="+n),!0===o&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},719:function(t,e,a){"use strict";var s=a(656);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){s.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},720:function(t,e,a){"use strict";var s=a(656),i=a(721),n=a(686),o=a(668);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=s.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),s.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return l(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return n(e)||(l(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},721:function(t,e,a){"use strict";var s=a(656);t.exports=function(t,e,a){return s.forEach(a,function(a){t=a(t,e)}),t}},722:function(t,e,a){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},723:function(t,e,a){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},724:function(t,e,a){"use strict";var s=a(687);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var a=this;t(function(t){a.reason||(a.reason=new s(t),e(a.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},725:function(t,e,a){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},726:function(t,e,a){"use strict";var s,i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=a(11),o=(s=n)&&s.__esModule?s:{default:s};t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}return i(t,[{key:"set",value:function(t){this.errors=t}},{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"get",value:function(t){if(this.has(t))return this.errors[t][0]}},{key:"getAll",value:function(t){if(this.has(t))return this.errors[t]}},{key:"clear",value:function(t){t?o.default.delete(this.errors,t):this.errors={}}},{key:"any",value:function(){return Object.keys(this.errors).length>0}}]),t}()},727:function(t,e,a){"use strict";function s(t){return void 0===t}function i(t){return Array.isArray(t)}function n(t){return t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.slice}t.exports=function t(e,a,o,l){if(a instanceof FormData&&(l=o,o=a,a=null),(a=a||{}).indices=!s(a.indices)&&a.indices,a.nulls=!!s(a.nulls)||a.nulls,o=o||new FormData,s(e))return o;if(function(t){return null===t}(e))a.nulls&&o.append(l,"");else if(i(e))if(e.length)e.forEach(function(e,s){var i=l+"["+(a.indices?s:"")+"]";t(e,a,o,i)});else{var r=l+"[]";o.append(r,"")}else!function(t){return t instanceof Date}(e)?!function(t){return t===Object(t)}(e)||function(t){return n(t)&&("object"==typeof t.lastModifiedDate||"number"==typeof t.lastModified)&&"string"==typeof t.name}(e)||n(e)?o.append(l,e):Object.keys(e).forEach(function(s){var n=e[s];if(i(n))for(;s.length>2&&s.lastIndexOf("[]")===s.length-2;)s=s.substring(0,s.length-2);t(n,a,o,l?l+"["+s+"]":s)}):o.append(l,e.toISOString());return o}},730:function(t,e,a){"use strict";var s=a(666);e.a={mixins:[s.a],data:function(){return{}},methods:{getAppointmentService:function(t){return this.getProviderById(t.providerId).serviceList.find(function(e){return e.id===t.serviceId})||this.getServiceById(t.serviceId)},getBookingServicePrice:function(t,e){return t.customPricing&&t.customPricing.enabled&&e.duration&&t.customPricing.durations.filter(function(t){return t.duration===e.duration}).length?t.customPricing.durations.find(function(t){return t.duration===e.duration}).price:t.price},getAppointmentPrice:function(t,e,a,s){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=0,o=this,l=parseInt(t)!==parseInt(e.id);return a.filter(function(t){return null===t.packageCustomerService}).forEach(function(t){var a=(null===t.duration?e.duration:t.duration)!==e.duration,i=o.getBookingServicePrice(e,t);t.payments.length>0?["approved","pending"].includes(t.status)&&(n+=o.getBookingPrice(t,l,l||a?i:t.price,t.aggregatedPrice,e.id)):s||(n+=o.getBookingPrice(t,!0,i,e.aggregatedPrice,e.id))}),i?this.getFormattedPrice(n>=0?n:0,!this.$root.settings.payments.hideCurrencySymbolFrontend):n>=0?n:0},getBookingPrice:function(t,e,a,s){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n={price:e?a:t.price,aggregatedPrice:s,id:e?null:i};e||(n.tax=t.tax);var o=this.getAppointmentPriceAmount(n,t.extras.filter(function(t){return!("selected"in t)||t.selected}),t.persons,t.coupon,!1);return o.discount>o.total?0:o.total-o.discount+o.tax},getPackagePrice:function(t,e){var a=t.bookings[e].packageCustomerService.packageCustomer.coupon,s=t.bookings[e].packageCustomerService.packageCustomer.price,i=s/100*(a?a.discount:0)+(a?a.deduction:0);return i>s?0:s-i}}}},731:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(673),i=a.n(s),n=a(658),o=a(336),l=a(665),r=a(702);e.default={mixins:[n.a,o.a,l.a,r.a],props:{formName:"",urlName:null,isNew:null,entity:null,getParsedEntity:null,updateStash:!1,haveSaveConfirmation:null,hasApplyGloballyVisibility:!1,hasApplyGloballyDeletion:!1,loadSaveButton:!1,calendarConflict:{enable:!1},getCalendarEvents:null,hasIcons:!0,status:null,buttonType:{status:"primary",remove:"danger"},action:{haveAdd:!1,haveEdit:!1,haveStatus:!1,haveBlock:!1,haveRemove:!1,haveRemoveEffect:!1,ignoreDeleteEffect:!1,haveDuplicate:!1,haveSaveWarning:!1},message:{success:{save:null,remove:null,show:null,hide:null},confirm:{remove:null,show:null,hide:null,duplicate:null,save:null,saveDetails:null}},buttonText:null},data:function(){return{form:new i.a,allowedDelete:!0,showDeleteConfirmation:!1,showVisibilityConfirmation:!1,showDuplicateConfirmation:!1,showSaveConfirmation:!1,showAddHoursDialog:!1,confirmCalendarConflict:!1,showBlockConfirmation:!1,deleteEffectMessage:null,dialogLoading:!1}},created:function(){i.a.defaults.axios=this.$http},methods:{getButtonType:function(t){switch(t){case"status":return this.hasIcons?null:this.buttonType.status;case"remove":return this.hasIcons?null:this.buttonType.remove;case"block":case"duplicate":return this.hasIcons?null:this.buttonType.duplicate}},closeDialog:function(){this.$parent.$emit("closeDialog")},onSubmit:function(t){var e=this,a=this.$root;this.$parent.$refs[this.formName].validate(function(s,i){if(!s)return"appointment"===e.formName&&e.handleDialogTabChange(i,"bookings."),"service"===e.formName&&e.handleDialogTabChange(i,"duration"),e.$emit("validationFailCallback"),!1;e.calendarConflict&&e.calendarConflict.enabled?(e.handleSaveConfirmation(),t&&(e.$emit("confirmCalendarConflict"),e.confirmCalendarConflict=!0,e.handleSaveClick(t))):(e.dialogLoading=!0,e.isNew?e.addEntity(t):e.editEntity(t)),e.$root=a})},onSuccess:function(t,e,a){var s=this;this.$parent.$emit("saveCallback",a),setTimeout(function(){s.dialogLoading=!1,s.$parent.$emit("closeDialog")},300),this.notify(t,e,"success")},onError:function(t,e){this.dialogLoading=!1,this.$emit("errorCallback",e)},errorEntityMissing:function(t){return!!("data"in t.response&&"data"in t.response.data&&"object"===t.response.data.data&&"entityMissing"in t.response.data.data&&t.response.data.data.entityMissing)&&(this.dialogLoading=!1,this.notify(this.$root.labels.error,t.response.data.message,"error"),!0)},addEntity:function(t){var e=this,a=null;void 0!==this.$store&&void 0!==this.$store.state.cabinet&&"provider"===this.$store.state.cabinet.cabinetType&&(a=Object.assign(this.getAuthorizationHeaderObject(),{params:{source:"cabinet-"+this.$store.state.cabinet.cabinetType}})),this.$http.post(this.$root.getAjaxUrl+"/"+this.urlName,this.getParsedEntity(t),a).then(function(t){e.onSuccess(e.$root.labels.success,e.message.success.save,t.data.data),e.updateStash&&e.updateStashEntities({})}).catch(function(t){if(t.response){if(e.errorEntityMissing(t))return;e.onError("",t.response.data.data)}})},editEntity:function(t){var e=this,a=null;void 0!==this.$store&&void 0!==this.$store.state.cabinet&&"provider"===this.$store.state.cabinet.cabinetType&&(a=Object.assign(this.getAuthorizationHeaderObject(),{params:{source:"cabinet-"+this.$store.state.cabinet.cabinetType}})),this.$http.post(this.$root.getAjaxUrl+"/"+this.urlName+"/"+this.entity.id,this.getParsedEntity(t),a).then(function(t){e.onSuccess(e.$root.labels.success,e.message.success.save,t.data.data),e.updateStash&&e.updateStashEntities({})}).catch(function(t){if(t.response){if(e.errorEntityMissing(t))return;e.onError("",t.response.data.data)}})},deleteEntity:function(t){var e=this;this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/"+this.urlName+"/delete/"+this.entity.id,{status:this.status.on,applyGlobally:t}).then(function(t){e.onSuccess(e.$root.labels.success,e.message.success.remove,t.data.data),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data.message)})},showEntity:function(t){var e=this;this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/"+this.urlName+"/status/"+this.entity.id,{status:this.status.on,applyGlobally:t}).then(function(t){e.onSuccess(e.$root.labels.success,e.message.success.show,null),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data.message)})},hideEntity:function(t){var e=this;this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/"+this.urlName+"/status/"+this.entity.id,{status:this.status.off,applyGlobally:t}).then(function(){e.onSuccess(e.$root.labels.success,e.message.success.hide,null),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data.message)})},blockEntity:function(t){var e=this;this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/"+this.urlName+"/status/"+this.entity.id,{status:"visible"===this.entity.status?this.status.block:this.status.on,applyGlobally:t}).then(function(){e.onSuccess(e.$root.labels.success,e.message.success.block,null),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data.message)})},duplicateEntity:function(){var t=this;this.dialogLoading=!0,this.$parent.$emit("closeDialog",!0),this.$parent.$emit("duplicateCallback",this.entity),setTimeout(function(){t.showDuplicateConfirmation=!1,t.dialogLoading=!1},600)},handleSaveConfirmation:function(){this.showSaveConfirmation=!this.showSaveConfirmation,this.showVisibilityConfirmation=!1,this.showDeleteConfirmation=!1,this.showDuplicateConfirmation=!1,this.showBlockConfirmation=!1},handleDuplicateConfirmation:function(){this.showDuplicateConfirmation=!this.showDuplicateConfirmation,this.showSaveConfirmation=!1,this.showDeleteConfirmation=!1,this.showVisibilityConfirmation=!1,this.showBlockConfirmation=!1},handleVisibilityConfirmation:function(){this.showVisibilityConfirmation=!this.showVisibilityConfirmation,this.showSaveConfirmation=!1,this.showDeleteConfirmation=!1,this.showDuplicateConfirmation=!1,this.showBlockConfirmation=!1},handleBlockConfirmation:function(){this.showBlockConfirmation=!this.showBlockConfirmation,this.showSaveConfirmation=!1,this.showDeleteConfirmation=!1,this.showDuplicateConfirmation=!1,this.showVisibilityConfirmation=!1},handleDeleteConfirmation:function(){var t=this;this.showVisibilityConfirmation=!1,this.showDuplicateConfirmation=!1,this.showSaveConfirmation=!1,this.showBlockConfirmation=!1,this.action.haveRemoveEffect?!1===this.showDeleteConfirmation&&this.$http.get(this.$root.getAjaxUrl+"/"+this.urlName+"/effect/"+this.entity.id).then(function(e){t.allowedDelete=e.data.data.valid||t.ignoreDeleteEffect,t.deleteEffectMessage=e.data.data.message,t.showDeleteConfirmation=!t.showDeleteConfirmation}).catch(function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation,t.deleteEffectMessage=""}):this.showDeleteConfirmation=!this.showDeleteConfirmation},handleSaveClick:function(){var t=this;this.getCalendarEvents&&!this.confirmCalendarConflict?this.getCalendarEvents().then(function(){t.haveSaveConfirmation&&t.haveSaveConfirmation()?t.handleSaveConfirmation():t.onSubmit(!1)}):this.haveSaveConfirmation&&this.haveSaveConfirmation()?this.handleSaveConfirmation():this.onSubmit(!1)},getConfirmSaveButtonText:function(){return null!==this.buttonText&&this.buttonText.confirm&&this.buttonText.confirm.save?{yes:this.buttonText.confirm.save.yes,no:this.buttonText.confirm.save.no}:{yes:this.$root.labels.yes,no:this.$root.labels.no}},getConfirmDeleteButtonText:function(){return null!==this.buttonText&&this.buttonText.confirm&&this.buttonText.confirm.remove?{yes:this.buttonText.confirm.remove.yes,no:this.buttonText.confirm.remove.no}:{yes:this.$root.labels.yes,no:this.$root.labels.no}},getConfirmBlockButtonText:function(){return null!==this.buttonText&&this.buttonText.confirm&&this.buttonText.confirm.status?{yes:this.buttonText.confirm.status.block,no:this.buttonText.confirm.status.no}:{yes:this.$root.labels.yes,no:this.$root.labels.no}},getConfirmStatusButtonText:function(){return null!==this.buttonText&&this.buttonText.confirm&&this.buttonText.confirm.status?{yes:this.buttonText.confirm.status.yes,no:this.buttonText.confirm.status.no}:{yes:this.$root.labels.yes,no:this.$root.labels.no}},getActionStatusButtonText:function(){return null!==this.buttonText&&this.buttonText.action?this.buttonText.action.status:""},getActionRemoveButtonText:function(){return null!==this.buttonText&&this.buttonText.action?this.buttonText.action.remove:""},getActionDuplicateButtonText:function(){return null!==this.buttonText&&this.buttonText.action?this.buttonText.action.duplicate:""},handleDialogTabChange:function(t,e){for(var a=Object.keys(t),s=0,i=0;i<a.length;i++)s=a[i].startsWith(e)?s+1:s;s===a.length&&this.$emit("validationTabFailCallback")},isStatusOn:function(){return this.entity.status===this.status.on},isStatusOff:function(){return this.entity.status===this.status.off},isStatusBlocked:function(){return this.entity.status===this.status.block}},computed:{},components:{}}},732:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"am-dialog-footer"},[a("div",{staticClass:"am-dialog-footer-actions"},[a("transition",{attrs:{name:"slide-vertical"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteConfirmation,expression:"showDeleteConfirmation"}],staticClass:"am-dialog-confirmation"},[a("h3",{directives:[{name:"show",rawName:"v-show",value:t.allowedDelete,expression:"allowedDelete"}]},[t._v("\n            "+t._s(t.message.confirm.remove)+"\n          ")]),t._v(" "),t.action.haveRemoveEffect&&t.deleteEffectMessage?a("el-alert",{attrs:{title:"",type:"warning",description:t.deleteEffectMessage,"show-icon":"",closable:!1}}):t._e(),t._v(" "),t.hasApplyGloballyDeletion?a("div",{staticClass:"align-left"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deleteEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmDeleteButtonText().no)+"\n            ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deleteEntity(!0)}}},[t._v("\n              "+t._s(t.getConfirmDeleteButtonText().yes)+"\n            ")])],1):a("div",{staticClass:"align-left"},[t.allowedDelete?a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]):t._e(),t._v(" "),t.allowedDelete?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deleteEntity(!1)}}},[t._v("\n              "+t._s(t.$root.labels.delete)+"\n            ")]):t._e(),t._v(" "),t.allowedDelete?t._e():a("el-button",{staticClass:"am-dialog-action-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}})],1)],1)]),t._v(" "),a("transition",{attrs:{name:"slide-vertical"}},[t.status?a("div",{directives:[{name:"show",rawName:"v-show",value:t.showVisibilityConfirmation,expression:"showVisibilityConfirmation"}],staticClass:"am-dialog-confirmation"},[t.isStatusOn()?a("h3",[t._v(t._s(t.message.confirm.hide))]):t.isStatusOff()?a("h3",[t._v(t._s(t.message.confirm.show))]):t._e(),t._v(" "),t.hasApplyGloballyVisibility?a("div",{staticClass:"align-left"},[t.isStatusOn()?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.hideEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().no)+"\n            ")]):t._e(),t._v(" "),t.isStatusOn()?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.hideEntity(!0)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().yes)+"\n            ")]):t._e(),t._v(" "),t.isStatusOff()?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.showEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().no)+"\n            ")]):t._e(),t._v(" "),t.isStatusOff()?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.showEntity(!0)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().yes)+"\n            ")]):t._e()],1):a("div",{staticClass:"align-left"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showVisibilityConfirmation=!t.showVisibilityConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),t.isStatusOn()?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.hideEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().yes)+"\n            ")]):t._e(),t._v(" "),t.isStatusOff()?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.showEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().no)+"\n            ")]):t._e()],1)]):t._e()]),t._v(" "),a("transition",{attrs:{name:"slide-vertical"}},[t.status?a("div",{directives:[{name:"show",rawName:"v-show",value:t.showBlockConfirmation,expression:"showBlockConfirmation"}],staticClass:"am-dialog-confirmation"},[a("h3",[t._v(t._s(t.message.confirm.block))]),t._v(" "),a("div",{staticClass:"align-left"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showBlockConfirmation=!t.showBlockConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.blockEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmBlockButtonText().yes)+"\n            ")])],1)]):t._e()]),t._v(" "),a("transition",{attrs:{name:"slide-vertical"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDuplicateConfirmation,expression:"showDuplicateConfirmation"}],staticClass:"am-dialog-confirmation"},[a("h3",[t._v(t._s(t.message.confirm.duplicate))]),t._v(" "),a("div",{staticClass:"align-left"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDuplicateConfirmation=!t.showDuplicateConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.duplicateEntity}},[t._v("\n              "+t._s(t.$root.labels.duplicate)+"\n            ")])],1)])]),t._v(" "),a("transition",{attrs:{name:"slide-vertical"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSaveConfirmation,expression:"showSaveConfirmation"}],staticClass:"am-dialog-confirmation"},[t.buttonText?a("h3",{staticStyle:{display:"block"}},[t._v(t._s(t.message.confirm.save)+"\n            "),t.message.confirm.saveDetails?a("span",[t._v(t._s(t.message.confirm.saveDetails))]):t._e()]):t._e(),t._v(" "),t.buttonText?a("div",{staticClass:"align-left",staticStyle:{display:"block"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onSubmit(!1)}}},[t._v("\n              "+t._s(t.getConfirmSaveButtonText().no)+"\n            ")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onSubmit(!0)}}},[t._v("\n              "+t._s(t.getConfirmSaveButtonText().yes)+"\n            ")])],1):t._e(),t._v(" "),a("el-col",{attrs:{span:22}},[t.action.haveSaveWarning?a("el-alert",{staticStyle:{"word-break":"break-word"},attrs:{title:"",type:"warning",description:t.message.confirm.save,"show-icon":"",closable:!1}}):t._e()],1),t._v(" "),a("el-col",{attrs:{span:2}},[t.showSaveConfirmation?a("el-button",{staticClass:"am-dialog-action-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:function(e){t.showSaveConfirmation=!1}}}):t._e()],1)],1)]),t._v(" "),t.isNew?a("el-row",[a("el-col",{staticClass:"align-right",attrs:{sm:24}},[a("el-button",{attrs:{type:""},on:{click:t.closeDialog}},[t._v("\n            "+t._s(t.$root.labels.cancel)+"\n          ")]),t._v(" "),t.action.haveAdd&&t.action.haveEdit?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary",loading:t.loadSaveButton},on:{click:t.handleSaveClick}},[t._v("\n            "+t._s(t.$root.labels.save)+"\n          ")]):t._e()],1)],1):a("el-row",[a("el-col",{staticClass:"align-left",attrs:{sm:16}},[t.action.haveDuplicate?a("el-button",{class:{"am-button-icon":t.hasIcons,"am-dialog-create":!t.hasIcons},attrs:{type:t.getButtonType("duplicate")},on:{click:t.handleDuplicateConfirmation}},[t.hasIcons?a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.duplicate,src:t.$root.getUrl+"public/img/copy.svg"}}):a("span",[t._v(t._s(t.getActionDuplicateButtonText()))])]):t._e(),t._v(" "),t.action.haveStatus?a("el-button",{class:{"am-button-icon":t.hasIcons,"am-dialog-create":!t.hasIcons},attrs:{type:t.getButtonType("status")},on:{click:t.handleVisibilityConfirmation}},[t.hasIcons?a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.hide,src:t.$root.getUrl+(t.isStatusOff()?"public/img/unhide.svg":"public/img/hide.svg")}}):a("span",[t._v("\n              "+t._s(t.getActionStatusButtonText())+"\n            ")])]):t._e(),t._v(" "),t.action.haveRemove?a("el-button",{class:{"am-button-icon":t.hasIcons,"am-dialog-create":!t.hasIcons},attrs:{type:t.getButtonType("remove")},on:{click:t.handleDeleteConfirmation}},[t.hasIcons?a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.delete,src:t.$root.getUrl+"public/img/delete.svg"}}):a("span",[t._v("\n              "+t._s(t.getActionRemoveButtonText())+"\n            ")])]):t._e(),t._v(" "),t.action.haveBlock?a("el-button",{staticClass:"am-button-block",attrs:{type:t.getButtonType("block")},on:{click:t.handleBlockConfirmation}},[a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.block,src:t.$root.getUrl+(t.isStatusBlocked()?"public/img/unblock.svg":"public/img/block.svg")}}),t._v(" "),a("span",[t._v("\n              "+t._s(t.getConfirmBlockButtonText().yes)+"\n            ")])]):t._e()],1),t._v(" "),a("el-col",{staticClass:"align-right",attrs:{sm:!1===t.action.haveRemove&&!1===t.action.haveStatus&&!1===t.action.haveDuplicate?24:8}},[t.action.haveAdd&&t.action.haveEdit?a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary",loading:t.loadSaveButton},on:{click:t.handleSaveClick}},[t._v("\n            "+t._s(t.$root.labels.save)+"\n          ")]):t._e()],1)],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"am-dialog-loader"},[a("div",{staticClass:"am-dialog-loader-content"},[a("img",{attrs:{src:t.$root.getUrl+"public/img/spinner.svg"}}),t._v(" "),a("p",[t._v(t._s(t.$root.labels.loader_message))])])])])},staticRenderFns:[]}},745:function(t,e,a){var s=a(90)(a(748),a(749),!1,null,null,null);t.exports=s.exports},748:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mixins:[],props:{params:null,visible:!1,label:"",count:0,show:null},data:function(){return{currentPage:null}},methods:{change:function(){this.$emit("change")}},computed:{paginationMessage:function(){return this.$root.labels.showing+" "+(this.params.page*this.getItemsPerPage-this.getItemsPerPage+1)+" "+this.$root.labels.to+" "+(this.params.page*this.getItemsPerPage>this.count?this.count:this.params.page*this.getItemsPerPage)+" "+this.$root.labels.of+" "+this.count+" "+this.label},getItemsPerPage:function(){return void 0===this.show||null===this.show?this.$root.settings.general.itemsPerPage:this.show}}}},749:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"am-pagination am-section"},[a("el-row",[a("el-col",{attrs:{sm:8}},[a("p",[t._v(t._s(t.paginationMessage))])]),t._v(" "),a("el-col",{attrs:{sm:16}},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.getItemsPerPage,total:t.count,"current-page":t.params.page},on:{"update:currentPage":function(e){return t.$set(t.params,"page",e)},"update:current-page":function(e){return t.$set(t.params,"page",e)},"current-change":t.change}})],1)],1)],1)},staticRenderFns:[]}},798:function(t,e,a){"use strict";var s=a(665),i=a(0),n=a.n(i),o=a(674),l=a(336);e.a={mixins:[o.a,s.a,l.a],data:function(){return{event:null,bookingCreatedCount:0,attributes:[{highlight:{backgroundColor:"#ddd"},dates:[]}],selectedRecurringDate:null,recurringDates:null,updateStatusDisabled:!1,recurringPeriods:[{label:this.$root.labels.recurring_type_weekly,value:"weekly"},{label:this.$root.labels.recurring_type_monthly,value:"monthly"},{label:this.$root.labels.recurring_type_yearly,value:"yearly"}],colors:["#1788FB","#4BBEC6","#FBC22D","#FA3C52","#D696B8","#689BCA","#26CC2B","#FD7E35","#E38587","#774DFB"],options:{fetched:!1,entities:{settings:{payments:{wc:null},general:{usedLanguages:[]}},employees:[],locations:[],tags:[]}},searchCounter:0,loadingEvents:!1,searchEventsTimer:null,searchedEvents:[],searchEventsQuery:""}},methods:{showDialogEditEvent:function(t){this.dialogEvent=!0,this.event=null,this.getEvent(t)},closeDialogEvent:function(){this.dialogEvent=!1},getInitEventObject:function(){return{id:0,parentId:null,name:"",periods:[{id:null,eventId:null,range:null,startTime:null,endTime:null,bookings:[]}],bookingStartsNow:!0,bookingStartsDate:null,bookingStartsTime:null,bookingEndsAfter:!0,bookingEndsDate:null,bookingEndsTime:null,bookingOpensRec:"same",bookingClosesRec:"same",ticketRangeRec:"calculate",isRecurring:!1,recurring:{cycle:null,order:null,until:null,cycleInterval:null},bringingAnyone:!0,bookMultipleTimes:!0,maxCapacity:null,maxCustomCapacity:null,maxExtraPeople:null,price:0,locationId:null,customLocation:null,providers:this.getInitEventProviders(),tags:[],description:null,gallery:[],colorType:2,selectedColor:"#1788FB",customColor:"#1788FB",show:!0,places:0,addToCalendarData:null,showAddToCalendar:!1,showEventDetails:!1,showEventBooking:!1,translations:null,canceling:!1,deleting:!1,bookable:!0,deposit:0,depositPayment:"disabled",depositPerPerson:1,customTickets:[],settings:this.getInitEntitySettings("event"),closeAfterMin:null,closeAfterMinBookings:!1,aggregatedPrice:!0}},showDialogNewEvent:function(){this.event=this.getInitEventObject(),this.dialogEvent=!0},getEvent:function(t){var e=this,a=null,s="";void 0!==this.$store&&void 0!==this.$store.state.cabinet&&"provider"===this.$store.state.cabinet.cabinetType&&(s=""===this.$store.state.cabinet.timeZone?"UTC":this.$store.state.cabinet.timeZone,a=Object.assign(this.getAuthorizationHeaderObject(),{params:{source:"cabinet-"+this.$store.state.cabinet.cabinetType,timeZone:s}})),void 0===this.$store&&"provider"===this.$root.settings.role&&1===this.options.entities.employees.length&&this.options.entities.employees[0].timeZone&&(a=Object.assign({params:{timeZone:this.options.entities.employees[0].timeZone}})),this.$http.get(this.$root.getAjaxUrl+"/events/"+t,a).then(function(t){var a=Object.assign(e.getInitEventObject(),t.data.data.event),i=[],o=e;t.data.data.event.periods.forEach(function(t){"UTC"===s&&(t.periodStart=o.getConvertedUtcToLocalDateTime(t.periodStart),t.periodEnd=o.getConvertedUtcToLocalDateTime(t.periodEnd));var e=n()(t.periodStart,"YYYY-MM-DD HH:mm:ss"),a=n()(t.periodEnd,"YYYY-MM-DD HH:mm:ss"),l=t.periodStart.split(" ")[1].substring(0,5),r=t.periodEnd.split(" ")[1].substring(0,5);"00:00"===r&&(a.subtract(1,"days"),r="24:00"),i.push({id:t.id?t.id:null,eventId:t.eventId?t.eventId:null,range:{start:e.toDate(),end:a.toDate()},startTime:l,endTime:r,bookings:t.bookings,zoomMeeting:t.zoomMeeting,lessonSpace:t.lessonSpace,googleCalendarEventId:t.googleCalendarEventId,googleMeetUrl:t.googleMeetUrl,outlookCalendarEventId:t.outlookCalendarEventId,appleCalendarEventId:t.appleCalendarEventId})}),a.periods=i;var l=[];a.tags.forEach(function(t){l.push(t.name)}),a.tags=l,null===a.recurring?a.recurring={cycle:null,until:null,order:null}:(a.isRecurring=!0,a.recurring.cycleInterval=null===t.data.data.event.recurring.cycleInterval?1:t.data.data.event.recurring.cycleInterval,a.recurring.until=t.data.data.event.recurring.until?n()(t.data.data.event.recurring.until).toDate():null),a.bookingStartsNow=null===t.data.data.event.bookingOpens,a.bookingStartsDate=t.data.data.event.bookingOpens?n()(t.data.data.event.bookingOpens).toDate():null,a.bookingStartsTime=t.data.data.event.bookingOpens?t.data.data.event.bookingOpens.split(" ")[1].substring(0,5):null,a.bookingEndsAfter=null===t.data.data.event.bookingCloses,a.bookingEndsDate=t.data.data.event.bookingCloses?n()(t.data.data.event.bookingCloses).toDate():null,a.bookingEndsTime=t.data.data.event.bookingCloses?t.data.data.event.bookingCloses.split(" ")[1].substring(0,5):null,a.zoomUserId=t.data.data.event.zoomUserId,a.organizerId=t.data.data.event.organizerId,a.closeAfterMin=t.data.data.event.closeAfterMin,a.closeAfterMinBookings=t.data.data.event.closeAfterMinBookings,a.aggregatedPrice=t.data.data.event.aggregatedPrice;var r=a.bookings;r.forEach(function(t){if(t.info){var e=JSON.parse(t.info);t.customer.firstName=e.firstName,t.customer.lastName=e.lastName,t.customer.phone=e.phone}else{var a=o.getCustomerById(t.customerId);t.customer.firstName=a?a.firstName:o.$root.labels.customer+" "+t.customerId,t.customer.lastName=a?a.lastName:"",t.customer.phone=a?a.phone:""}t.show=!0,t.removing=!1,t.checked=!1,"[]"!==t.customFields&&null!==t.customFields||(t.customFields="{}"),t.payments=t.payments.sort(function(t,e){return new Date(t.dateTime)-new Date(e.dateTime)}),t.customFields=JSON.parse(t.customFields)});var c=!1;e.colors.forEach(function(t){t===a.color&&(a.colorType=1,a.selectedColor=t,a.customColor=t,c=!0)}),c||(a.colorType=2,a.selectedColor=null,a.customColor=a.color),a.gallery=a.gallery.sort(function(t,e){return t.position>e.position?1:-1}),e.eventBookings=r,e.setEntitySettings(a,"event"),null===a.deposit&&(a.deposit=0),e.event=a,e.bookingCreatedCount++}).catch(function(t){console.log(t.message)})},getInitEventProviders:function(){return"provider"===this.$root.settings.role&&this.$root.settings.roles.allowWriteEvents?this.options.entities.employees:[]},handleDateTimeFormat:function(t){return[this.getFrontedFormattedDate(t.split(" ")[0]),this.getFrontedFormattedTime(t.split(" ")[1])]},showDialogAttendees:function(t){this.eventBookings=null,this.dialogAttendees=!0,this.getEvent(t)},searchEvents:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.searchEventsQuery=t,clearTimeout(this.searchEventsTimer),this.loadingEvents=!0,this.searchCounter++,this.searchEventsTimer=setTimeout(function(){var s=e.searchCounter;e.$http.get(e.$root.getAjaxUrl+"/events",{params:{search:t,page:1,limit:1e4,skipCount:1,dates:[n()().format("YYYY-MM-DD")]}}).then(function(t){s>=e.searchCounter&&(e.searchedEvents=a?e.groupRecurringEvents(t.data.data.events):t.data.data.events),e.loadingEvents=!1}).catch(function(t){e.loadingEvents=!1})},500)},groupRecurringEvents:function(t){var e=this,a=[];if(t)for(var s=function(s){var i=t[s];if("approved"!==i.status)return"continue";if(a.find(function(t){return(t.id===i.parentId||t.parentId===i.parentId)&&null!==i.parentId}))return"continue";var n=a.find(function(t){return t.name===i.name&&t.id!==i.id});n?(i.displayName=i.name+" ("+e.getFrontedFormattedDateTime(i.periods[0].periodStart)+")",n.displayName=n.name+" ("+e.getFrontedFormattedDateTime(n.periods[0].periodStart)+")",a.push(i)):a.push(i)},i=0;i<t.length;i++)s(i);return a}},watch:{}}},810:function(t,e,a){var s=a(90)(a(811),a(812),!1,null,null,null);t.exports=s.exports},811:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(91),i=a(654),n=a(336);e.default={mixins:[s.a,i.a,n.a],props:{data:null,action:null},data:function(){return{delimiter:",",delimiters:[{label:this.$root.labels.csv_delimiter_comma,value:","},{label:this.$root.labels.csv_delimiter_semicolon,value:";"}],separateBookings:!1,hasSeparateBookingOption:!1}},updated:function(){this.inlineSVG()},mounted:function(){this.hasSeparateBookingOption=this.action===this.$root.getAjaxUrl+"/report/appointments"||this.action===this.$root.getAjaxUrl+"/report/event/attendees",this.separateBookings=this.action===this.$root.getAjaxUrl+"/report/event/attendees",this.$emit("updateAction",this.getAction()),this.inlineSVG()},methods:{changeFields:function(){this.$emit("updateAction",this.getAction())},closeDialog:function(){this.$emit("closeDialogExport")},getAction:function(){var t=this,e=this.$root.settings.activation.disableUrlParams?{}:[],a=function(a){if(t.data.hasOwnProperty(a))if(t.data[a]instanceof Array||t.data[a]instanceof Object){var s=Object.keys(t.data[a]).map(function(e){return t.data[a][e]});for(var i in s)if(""!==s[i]){var n="";""!==(n=s[i]instanceof Date?s[i]instanceof Date?t.getDatabaseFormattedDate(s[i]):s[i]:s[i]instanceof Object&&!0===s[i].checked?s[i].value:s[i])&&(t.$root.settings.activation.disableUrlParams?(a in e||(e[a]=[]),e[a].push(encodeURIComponent(n))):e.push(a+"["+i+"]="+encodeURIComponent(n)))}}else""!==t.data[a]&&(t.$root.settings.activation.disableUrlParams?(a in e||(e[a]=[]),e[a].push(encodeURIComponent(t.data[a]))):e.push(a+"="+encodeURIComponent(t.data[a])))};for(var s in this.data)a(s);if(this.$root.settings.activation.disableUrlParams){var i=[];for(var s in e)i.push(s+"="+e[s].join(","));e=i}return this.action+"&"+e.join("&")+"&delimiter="+this.delimiter+(this.hasSeparateBookingOption?"&separate="+this.separateBookings:"")+"&wpAmeliaNonce="+window.wpAmeliaNonce}},components:{}}},812:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"am-dialog-scrollable"},[a("div",{staticClass:"am-dialog-header"},[a("el-row",[a("el-col",{attrs:{span:14}},[a("h2",[t._v(t._s(t.$root.labels.export))])]),t._v(" "),a("el-col",{staticClass:"align-right",attrs:{span:10}},[a("el-button",{staticClass:"am-dialog-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:t.closeDialog}})],1)],1)],1),t._v(" "),a("LicenceBlockHeader",{attrs:{licence:"starter"}}),t._v(" "),a("el-form",{class:t.licenceClassDisabled("starter"),attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:t.$root.labels.csv_delimiter+":"}},[a("el-select",{attrs:{placeholder:t.$root.labels.csv_delimiter},on:{change:t.changeFields},model:{value:t.delimiter,callback:function(e){t.delimiter=e},expression:"delimiter"}},t._l(t.delimiters,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),t.hasSeparateBookingOption?a("el-form-item",{attrs:{label:t.$root.labels["select_rows_settings"+(t.action===t.$root.getAjaxUrl+"/report/event/attendees"?"_event":"")]+":"}},[a("el-select",{attrs:{placeholder:t.$root.labels.exported_same_row},on:{change:t.changeFields},model:{value:t.separateBookings,callback:function(e){t.separateBookings=e},expression:"separateBookings"}},[a("el-option",{attrs:{label:this.$root.labels["exported_same_row"+(t.action===t.$root.getAjaxUrl+"/report/event/attendees"?"_event":"")],value:!1}}),t._v(" "),a("el-option",{attrs:{label:this.$root.labels["exported_separate_rows"+(t.action===t.$root.getAjaxUrl+"/report/event/attendees"?"_event":"")],value:!0}})],1)],1):t._e(),t._v(" "),t._l(t.data.fields,function(e){return[a("el-checkbox",{attrs:{checked:"",label:e.label,border:""},on:{change:t.changeFields},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"field.checked"}})]})],2)],1),t._v(" "),a("div",{staticClass:"am-dialog-footer"},[a("div",{staticClass:"am-dialog-footer-actions"},[a("el-row",[a("el-col",{staticClass:"align-right",attrs:{sm:24}},[a("el-button",{attrs:{disabled:t.notInLicence("starter"),type:""},on:{click:t.closeDialog}},[t._v("\n            "+t._s(t.$root.labels.cancel)+"\n          ")]),t._v(" "),a("el-button",{staticClass:"am-dialog-create",attrs:{disabled:t.notInLicence("starter"),type:"primary","native-type":"submit"},on:{click:t.closeDialog}},[t._v("\n            "+t._s(t.$root.labels.export)+"\n          ")])],1)],1)],1)])])},staticRenderFns:[]}},851:function(t,e,a){var s=a(90)(a(852),a(853),!1,null,null,null);t.exports=s.exports},852:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(673),i=a.n(s),n=a(699),o=(a.n(n),a(336)),l=a(654),r=a(658),c=a(657),u=a(693),d=a(676),m=a(666);e.default={mixins:[l.a,o.a,r.a,c.a,u.a,d.a,m.a],props:{modalData:null,bookingFetched:!1,customersNoShowCount:null,invoiceInDialog:!1},data:function(){return{dialogLoading:!0,refundBtnLoading:!1,refundMainBtnLoading:!1,finance:{bookablePriceTotal:0,extrasPriceTotal:0,discountTotal:0,subTotal:0,due:0,refunded:0,total:0,paidDeposit:0,paidRemaining:0,tax:0,wcTax:0,multipleBookings:!1},form:new i.a,payment:null,paymentStatuses:[{value:"pending",label:this.$root.labels.pending},{value:"paid",label:this.$root.labels.paid},{value:"partiallyPaid",label:this.$root.labels.partially_paid}],showDeleteConfirmation:!1,showUpdatePaymentAmount:!1,payments:[],showRefundConfirmation:!1,refundAmount:0,invoiceLoading:{preview:!1,download:!1,send:!1}}},created:function(){i.a.defaults.axios=this.$http,this.$root.licence.isBasic||this.$root.licence.isStarter||this.$root.licence.isLite||this.paymentStatuses.push({value:"refunded",label:this.$root.labels.refunded}),this.bookingFetched&&(this.setFinance(),this.dialogLoading=!1)},updated:function(){this.$nextTick(function(){var t=this;setTimeout(function(){t.inlineSVG()},5)})},methods:{showPaidSeparate:function(){return this.payments.filter(function(t){return"partiallyPaid"===t.status}).length>0&&!this.invoiceInDialog},createFileUrlFromResponse:function(t){for(var e=atob(t.data),a=new Array(e.length),s=0;s<e.length;s++)a[s]=e.charCodeAt(s);var i=new Uint8Array(a),n=new Blob([i],{type:"application/pdf;base64"});return URL.createObjectURL(n)},sendInvoice:function(){var t=this;this.invoiceLoading.send=!0,this.modalData.customer.email?this.$http.post(this.$root.getAjaxUrl+"/invoices/"+this.payments[0].id,{sendEmail:!0}).then(function(e){t.notify(t.$root.labels.success,t.$root.labels.invoice_sent,"success"),t.invoiceLoading.send=!1}).catch(function(e){console.log(e.response.data.message),t.notify(t.$root.labels.error,t.$root.labels.invoice_sending_failed,"error"),t.invoiceLoading.send=!1}):(this.notify(this.$root.labels.error,this.$root.labels.send_invoice_no_email,"error"),this.invoiceLoading.send=!1)},previewInvoice:function(){var t=this;this.invoiceLoading.preview=!0,this.$http.post(this.$root.getAjaxUrl+"/invoices/"+this.payments[0].id).then(function(e){window.open(t.createFileUrlFromResponse(e)),t.invoiceLoading.preview=!1}).catch(function(e){console.log(e.message),t.invoiceLoading.preview=!1})},downloadInvoice:function(){var t=this;this.invoiceLoading.download=!0,this.$http.post(this.$root.getAjaxUrl+"/invoices/"+this.payments[0].id).then(function(e){var a=t.createFileUrlFromResponse(e),s=document.createElement("a");s.href=a,s.download="Invoice",document.body.appendChild(s),s.click(),document.body.removeChild(s),t.invoiceLoading.download=!1}).catch(function(e){console.log(e.message),t.invoiceLoading.download=!1})},showRefundModal:function(t){var e=this;this.showDeleteConfirmation=!1,this.showUpdatePaymentAmount=!1,this.payment=t,this.refundMainBtnLoading=!0,this.$http.get(this.$root.getAjaxUrl+"/payments/transaction/"+t.id).then(function(t){e.refundAmount=t.data.data.refundAmount,e.showRefundConfirmation=!0,e.refundMainBtnLoading=!1}).catch(function(t){console.log(t.message),e.refundMainBtnLoading=!1})},showUpdateModal:function(t){this.showUpdatePaymentAmount=!0,this.showDeleteConfirmation=!1,this.payment=t},showDeleteModal:function(t){this.showDeleteConfirmation=!0,this.showRefundConfirmation=!1,this.showUpdatePaymentAmount=!1,this.payment=t},paymentRefundable:function(t){return!this.$root.licence.isBasic&&!this.$root.licence.isStarter&&!this.$root.licence.isLite&&("partiallyPaid"===t.status||"paid"===t.status)&&(t.transactionId||t.wcOrderId)&&("mollie"!==t.gateway||t.transactionId&&!t.transactionId.includes("pl_"))&&"onSite"!==t.gateway},refundPayment:function(){var t=this;this.refundBtnLoading=!0,this.$http.post(this.$root.getAjaxUrl+"/payments/refund/"+this.payment.id).then(function(e){t.notify(t.$root.labels.success,t.$root.labels.payment_refunded,"success"),t.refundBtnLoading=!1,t.payment.status="refunded",t.showRefundConfirmation=!1,t.$emit("updatePaymentCallback",t.payment)}).catch(function(e){console.log(e),t.refundBtnLoading=!1,t.notify(t.$root.labels.error,e.response.data.message?e.response.data.message:t.$root.labels.payment_refund_failed,"error")})},getTicketsData:function(){var t=[];return"event"===this.modalData.bookableType&&this.modalData[this.modalData.bookableType][0]&&this.modalData.event.forEach(function(e){e.booking.ticketsData.forEach(function(a){var s=e.bookable.customTickets.find(function(t){return t.id===a.eventTicketId});s&&t.push({name:s.name,persons:a.persons})})}),t},instantiateDialog:function(){null!==this.modalData.bookings&&(this.setFinance(),this.dialogLoading=!1)},setFinance:function(){var t=this;JSON.parse(JSON.stringify(this.modalData[this.modalData.bookableType])).forEach(function(e){t.payments=t.payments.concat(e.booking.payments)}),this.payments.sort(function(t,e){return new Date(t.dateTime)-new Date(e.dateTime)});var e=this.modalData.bookableType,a=this.modalData[e];this.finance=this.getPaymentAmountData(a,e),this.finance.multipleBookings=a.length>0},closeDialog:function(){this.$emit("closeDialogPayment")},getPaymentStatus:function(t){var e="";return this.paymentStatuses.forEach(function(a){a.value===t&&(e=a.label)}),e},deletePayment:function(){var t=this;this.dialogLoading=!0,this.$http.post(this.$root.getAjaxUrl+"/payments/delete/"+this.payment.id).then(function(e){t.dialogLoading=!1,e.data&&(t.$emit("deletePaymentCallback",t.payment),t.showDeleteConfirmation=!t.showDeleteConfirmation,t.notify(t.$root.labels.success,t.$root.labels.payment_deleted,"success"))}).catch(function(e){t.dialogLoading=!1,t.errorMessage=e.message})},updatePayment:function(){var t=this;this.payment?(this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/payments/"+this.payment.id,this.payment).then(function(){t.showUpdatePaymentAmount=!t.showUpdatePaymentAmount,t.setFinance(),t.notify(t.$root.labels.success,t.$root.labels.payment_saved,"success"),t.$emit("updatePaymentCallback",t.payment),t.dialogLoading=!1}).catch(function(e){t.dialogLoading=!1,t.errorMessage=e.message})):this.$emit("updatePaymentCallback")},getPaymentIconName:function(t){return"onSite"!==t.gateway&&"stripe"!==t.gateway||"oliver"!==t.gatewayTitle?t.gateway+".svg":"oliver.png"},getPaymentGatewayNiceName:function(t){return"stripe"===t.gateway&&"oliver"===t.gatewayTitle?this.$root.labels.oliver_on_line:"onSite"===t.gateway&&"oliver"===t.gatewayTitle?this.$root.labels.oliver_on_site:"onSite"===t.gateway?this.$root.labels.on_site:"wc"===t.gateway?t.gatewayTitle:t.gateway?t.gateway.charAt(0).toUpperCase()+t.gateway.slice(1):void 0}},watch:{bookingFetched:function(){!0===this.bookingFetched&&this.instantiateDialog()}},components:{Money:n.Money}}},853:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"am-dialog-loader"},[a("div",{staticClass:"am-dialog-loader-content"},[a("img",{attrs:{src:t.$root.getUrl+"public/img/spinner.svg"}}),t._v(" "),a("p",[t._v(t._s(t.$root.labels.loader_message))])])]),t._v(" "),t.dialogLoading?t._e():a("div",{staticClass:"am-dialog-scrollable"},[a("div",{staticClass:"am-dialog-header"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("h2",[t._v(t._s(t.invoiceInDialog?t.$root.labels.invoice_details:t.$root.labels.payment_details))])]),t._v(" "),a("el-col",{staticClass:"align-right",attrs:{span:6}},[a("el-button",{staticClass:"am-dialog-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:t.closeDialog}})],1)],1)],1),t._v(" "),a("div",{staticClass:"am-payment-details"},[t.payments[0].invoiceNumber?a("el-row",{staticClass:"am-payment-details-row"},[a("h4",[t._v(t._s(t.$root.labels.invoice_number+": #"+t.payments[0].invoiceNumber))])]):t._e(),t._v(" "),a("el-row",{staticClass:"am-payment-details-row"},[a("h4",[t._v(t._s(t.$root.labels.customer))]),t._v(" "),a("el-col",{attrs:{span:24}},[a("h3",{class:t.getNoShowClass(t.modalData.customer.id,t.customersNoShowCount)},[t._v(t._s(t.modalData.customer.id?t.modalData.customer.firstName+" "+t.modalData.customer.lastName:""))]),t._v(" "),a("p",[t._v(t._s(t.modalData.customer?t.modalData.customer.email:""))])])],1),t._v(" "),t._l(t.payments,function(e,s){return a("el-row",{key:e.id,staticClass:"am-payment-details-row"},[a("div",{staticClass:"am-payment-details-row-header"},[a("h4",[t._v(t._s(t.$root.labels.payment)+" "+t._s(t.payments.length>1?"#"+(s+1):"")+" ")]),t._v(" "),!t.invoiceInDialog&&t.payments.length>1?a("div",{staticClass:"am-payment-details-row-options"},[t.paymentRefundable(e)?a("div",[a("el-button",{attrs:{size:"small",loading:t.refundMainBtnLoading},on:{click:function(a){return t.showRefundModal(e)}}},[t._v("\n                "+t._s(t.$root.labels.refund)+"\n              ")])],1):t._e(),t._v(" "),a("el-button",{staticClass:"am-button-icon",staticStyle:{padding:"7px 10px"},attrs:{size:"small"},on:{click:function(a){return t.showUpdateModal(e)}}},[a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.edit,src:t.$root.getUrl+"public/img/edit.svg"}})]),t._v(" "),!0===t.$root.settings.capabilities.canDelete?a("el-button",{staticClass:"am-button-icon",staticStyle:{padding:"7px 10px","margin-left":"0px"},attrs:{size:"small"},on:{click:function(a){return t.showDeleteModal(e)}}},[a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.delete,src:t.$root.getUrl+"public/img/delete.svg"}})]):t._e()],1):t._e()]),t._v(" "),a("el-col",{attrs:{span:12}},[a("p",[t._v(t._s(t.invoiceInDialog?t.$root.labels.issue_date:t.$root.labels.date))]),t._v(" "),a("p",[t._v(t._s(t.$root.labels.payment_method))]),t._v(" "),e.wcOrderId?a("p",[t._v(t._s(t.$root.labels.wc_order)+":")]):t._e(),t._v(" "),a("p",[t._v(t._s(t.$root.labels.status))]),t._v(" "),a("p",[t._v(t._s(t.$root.labels.id))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.invoiceInDialog?t.getFrontedFormattedDate(e.created):t.getFrontedFormattedDate(e.dateTime)))]),t._v(" "),a("p",{staticClass:"am-semi-strong"},[a("img",{staticClass:"svg-amelia",style:{width:t.getPaymentIconWidth(e.gateway),verticalAlign:"middle"},attrs:{src:t.$root.getUrl+"public/img/payments/"+t.getPaymentIconName(e)}}),t._v(" "),t.longNamePayments(e.gateway)?t._e():a("span",[t._v(t._s(t.getPaymentGatewayNiceName(e)))])]),t._v(" "),e.wcOrderId?a("p",[a("a",{attrs:{href:e.wcOrderUrl,target:"_blank"}},[t._v("\n              #"+t._s(e.wcOrderId)+"\n            ")])]):t._e(),t._v(" "),a("div",{staticClass:"am-payment-status"},[a("span",{class:"am-payment-status-symbol am-payment-status-symbol-"+e.status}),t._v(" "),a("p",{staticClass:"am-semi-strong"},[a("span",[t._v(t._s(t.getPaymentStatusNiceName(e.status)))])])]),t._v(" "),a("p",{staticClass:"am-semi-strong"},[t._v(t._s(e.id))])])],1)}),t._v(" "),t._l(t.modalData[t.modalData.bookableType],function(e,s){return a("el-row",{key:s,staticClass:"am-payment-details-row"},[a("h4",[t._v(t._s(t.$root.labels[t.modalData.bookableType+"_info"]))]),t._v(" "),a("el-col",{attrs:{span:12}},[a("p",[t._v(t._s(t.$root.labels[t.modalData.bookableType]))]),t._v(" "),"package"!==t.modalData.bookableType?a("p",[t._v(t._s(t.$root.labels.date))]):t._e(),t._v(" "),e.providers.length&&"appointment"===t.modalData.bookableType?a("p",[t._v(t._s(t.$root.labels.employee))]):t._e(),t._v(" "),"event"===t.modalData.bookableType&&t.getTicketsData().length?a("p",[t._v(t._s(t.$root.labels.event_tickets))]):t._e()]),t._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticClass:"am-semi-strong"},[t._v(t._s(e.bookable.name))]),t._v(" "),"package"!==t.modalData.bookableType?a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFrontedFormattedDateTime(e.bookingStart)))]):t._e(),t._v(" "),e.providers.length>0&&"appointment"===t.modalData.bookableType?a("p",{staticClass:"am-semi-strong"},[a("img",{staticClass:"am-employee-photo",attrs:{src:t.pictureLoad(e.providers[0],!0)},on:{error:function(a){return t.imageLoadError(e.providers[0].id,!0)}}}),t._v("\n            "+t._s(e.providers[0].fullName)+"\n          ")]):t._e(),t._v(" "),"event"===t.modalData.bookableType&&t.getTicketsData().length?a("p",{staticClass:"am-semi-strong",staticStyle:{"white-space":"unset"}},t._l(t.getTicketsData(),function(e){return a("span",{staticClass:"am-attendees-plus"},[t._v("\n              "+t._s(e.persons)+" x "+t._s(e.name)+"\n            ")])}),0):t._e()])],1)}),t._v(" "),a("el-row",{staticClass:"am-payment-details-row am-payment-summary"},[a("el-col",{attrs:{span:12}},[a("p",[t._v(t._s(t.$root.labels[(t.finance.multipleBookings?"bookings":"appointment"===t.modalData.bookableType?"service":t.modalData.bookableType)+"_price"]))]),t._v(" "),"package"!==t.modalData.bookableType&&"event"!==t.modalData.bookableType?a("p",[t._v(t._s(t.$root.labels.extras))]):t._e(),t._v(" "),"package"!==t.modalData.bookableType&&"event"!==t.modalData.bookableType?a("p",[t._v(t._s(t.$root.labels.subtotal))]):t._e(),t._v(" "),a("p",[t._v(t._s(t.$root.labels.discount_amount))]),t._v(" "),t.finance.tax?a("p",[t._v(t._s(t.$root.labels.tax))]):t._e(),t._v(" "),t.payments.filter(function(t){return t.wcOrderId&&t.wcItemTaxValue}).length>0?a("p",[t._v(t._s(t.$root.labels.tax)+" (Woo)")]):t._e(),t._v(" "),t.showPaidSeparate()?t._e():a("p",[t._v(t._s(t.$root.labels.paid))]),t._v(" "),t.showPaidSeparate()?a("p",[t._v(t._s(t.$root.labels.paid_deposit))]):t._e(),t._v(" "),t.showPaidSeparate()?a("p",[t._v(t._s(t.$root.labels.paid_remaining_amount))]):t._e(),t._v(" "),t.finance.refunded>0?a("p",[t._v(t._s(t.$root.labels.refunded))]):t._e(),t._v(" "),a("p",[t._v(t._s(t.$root.labels.due))]),t._v(" "),a("p",{staticClass:"am-payment-total"},[t._v(t._s(t.$root.labels.total))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.bookablePriceTotal)))]),t._v(" "),"package"!==t.modalData.bookableType&&"event"!==t.modalData.bookableType?a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.extrasPriceTotal)))]):t._e(),t._v(" "),"package"!==t.modalData.bookableType&&"event"!==t.modalData.bookableType?a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.subTotal)))]):t._e(),t._v(" "),a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.discountTotal>t.finance.subTotal?t.finance.subTotal:t.finance.discountTotal)))]),t._v(" "),t.finance.tax?a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.tax)))]):t._e(),t._v(" "),t.payments.filter(function(t){return t.wcOrderId&&t.wcItemTaxValue}).length>0?a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.wcTax)))]):t._e(),t._v(" "),t.showPaidSeparate()?t._e():a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.paidRemaining+t.finance.paidDeposit)))]),t._v(" "),t.showPaidSeparate()?a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.paidDeposit)))]):t._e(),t._v(" "),t.showPaidSeparate()?a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.paidRemaining)))]):t._e(),t._v(" "),t.finance.refunded>0?a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.refunded)))]):t._e(),t._v(" "),a("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.due)+(t.payments[0].wcItemTaxValue&&t.finance.due>0?t.$root.labels.plus_tax:"")))]),t._v(" "),a("p",{staticClass:"am-semi-strong am-payment-total"},[t._v(t._s(t.getFormattedPrice(t.finance.total)+(t.payments[0].wcItemTaxValue&&t.finance.due>0?t.$root.labels.plus_tax:"")))])])],1)],2)]),t._v(" "),!0!==t.$root.settings.capabilities.canWriteOthers||t.dialogLoading?t._e():a("div",{staticClass:"am-dialog-footer"},[a("div",{staticClass:"am-dialog-footer-actions"},[a("transition",{attrs:{name:"slide-vertical"}},[t.showDeleteConfirmation?a("div",{staticClass:"am-dialog-confirmation"},[a("h3",[t._v(t._s(t.$root.labels.confirm_delete_payment))]),t._v(" "),a("div",{staticClass:"align-left"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deletePayment()}}},[t._v("\n              "+t._s(t.$root.labels.delete)+"\n            ")])],1)]):t._e()]),t._v(" "),a("transition",{attrs:{name:"slide-vertical"}},[t.showUpdatePaymentAmount?a("div",{staticClass:"am-dialog-confirmation"},[a("el-form",{attrs:{"label-position":"top"}},[a("h3",[t._v(t._s(t.$root.labels.enter_new_payment_amount))]),t._v(" "),a("el-row",{staticClass:"am-no-padding",attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$root.labels.payment+":"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.payment.amount,callback:function(e){t.$set(t.payment,"amount",e)},expression:"payment.amount"}},"money",t.moneyComponentData,!1))],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$root.labels.status+":"}},[a("el-select",{model:{value:t.payment.status,callback:function(e){t.$set(t.payment,"status",e)},expression:"payment.status"}},t._l(t.paymentStatuses,function(e){return a("el-option",{key:e.value,staticClass:"am-appointment-status-option",attrs:{label:e.label,value:e.value}},[a("span",{class:"am-appointment-status-symbol am-appointment-status-symbol-"+e.value}),t._v(" "),a("span",[t._v(t._s(e.label))])])}),1)],1)],1)],1),t._v(" "),a("div",{staticClass:"align-left"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showUpdatePaymentAmount=!t.showUpdatePaymentAmount}}},[t._v("\n                "+t._s(t.$root.labels.close)+"\n              ")])],1)],1)],1):t._e()]),t._v(" "),a("transition",{attrs:{name:"slide-vertical"}},[!t.showRefundConfirmation||t.$root.licence.isBasic||t.$root.licence.isStarter||t.$root.licence.isLite?t._e():a("div",{staticClass:"am-dialog-confirmation"},[a("h3",[t._v(t._s(t.$root.labels.confirm_refund_payment))]),t._v(" "),a("h3",[a("b",[t._v(t._s(t.$root.labels.refund_payment_amount)+" "+t._s(t.getFormattedPrice(t.refundAmount)))])]),t._v(" "),a("div",{staticClass:"align-left"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showRefundConfirmation=!1}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:t.refundBtnLoading},on:{click:function(e){return t.refundPayment()}}},[t._v("\n              "+t._s(t.$root.labels.confirm)+"\n            ")])],1)])]),t._v(" "),t.invoiceInDialog?a("el-row",[a("el-col",{staticClass:"align-left invoice-download",attrs:{sm:8,span:8}},[a("el-button",{attrs:{loading:t.invoiceLoading.download},on:{click:function(e){return t.downloadInvoice()}}},[t._v("\n            "+t._s(t.$root.labels.download)+"\n          ")])],1),t._v(" "),a("el-col",{staticClass:"align-left invoice-download-mobile",attrs:{sm:4,span:4}},[a("el-button",{staticClass:"button-export am-button-icon",on:{click:function(e){return t.downloadInvoice()}}},[a("img",{staticClass:"svg-amelia",attrs:{alt:"Import",src:t.$root.getUrl+"public/img/import.svg"}})])],1),t._v(" "),a("el-col",{staticClass:"align-right",attrs:{sm:16,span:16}},[a("el-button",{staticClass:"am-dialog-create",attrs:{loading:t.invoiceLoading.preview},on:{click:function(e){return t.previewInvoice()}}},[t._v("\n            "+t._s(t.$root.labels.preview)+"\n          ")]),t._v(" "),a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary",loading:t.invoiceLoading.send},on:{click:function(e){return t.sendInvoice()}}},[t._v("\n            "+t._s(t.$root.labels.send_invoice)+"\n          ")])],1)],1):a("el-row",[1===t.payments.length?a("el-col",{staticClass:"align-left",attrs:{sm:12}},[!0===t.$root.settings.capabilities.canDelete?a("el-button",{staticClass:"am-button-icon",style:{display:"none"},on:{click:function(e){return t.showDeleteModal(t.payments[0])}}},[a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.delete,src:t.$root.getUrl+"public/img/delete.svg"}})]):t._e(),t._v(" "),a("el-button",{staticClass:"am-button-icon",on:{click:function(e){return t.showUpdateModal(t.payments[0])}}},[a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.edit,src:t.$root.getUrl+"public/img/edit.svg"}})]),t._v(" "),t.paymentRefundable(t.payments[0])?a("el-button",{attrs:{loading:t.refundMainBtnLoading},on:{click:function(e){return t.showRefundModal(t.payments[0])}}},[t._v("\n            "+t._s(t.$root.labels.refund)+"\n          ")]):t._e()],1):t._e(),t._v(" "),a("el-col",{staticClass:"align-right",attrs:{sm:t.payments.length>1?24:12}},[a("el-button",{attrs:{type:""},on:{click:t.closeDialog}},[t._v("\n            "+t._s(t.$root.labels.cancel)+"\n          ")]),t._v(" "),a("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:function(e){return t.updatePayment()}}},[t._v("\n            "+t._s(t.$root.labels.save)+"\n          ")])],1)],1)],1)])])},staticRenderFns:[]}},855:function(t,e,a){"use strict";e.a={data:function(){return{count:{success:0,error:0}}},methods:{deleteEntities:function(t,e,a,s){var i=this;t.forEach(function(n){i.$http.post(i.$root.getAjaxUrl+"/"+i.name+"/delete/"+n).then(function(){i.deleteEntityResult(t,!0,e),a(n)}).catch(function(){i.deleteEntityResult(t,!1,e),s(n)})})},deleteEntityResult:function(t,e,a){t.pop(),e?this.count.success++:this.count.error++,0===t.length&&(this.count.success&&this.notify(this.$root.labels.success,this.count.success+" "+(this.count.success>1?this.successMessage.multiple:this.successMessage.single),"success"),this.count.error&&this.notify(this.$root.labels.error,this.count.error+" "+(this.count.error>1?this.errorMessage.multiple:this.errorMessage.single),"error"),this.count.success=0,this.count.error=0,a())}}}},901:function(t,e,a){"use strict";e.a={data:function(){return{}},methods:{handleCheckAll:function(t,e,a){var s=void 0!==a?a:e.allChecked;return t.forEach(function(t){t.checked=s}),e.allChecked=s,e.toaster=s,e},handleCheckSingle:function(t,e){var a=0;return t.forEach(function(t){t.checked&&a++}),e.allChecked=a===t.length,e.toaster=0!==a,e}}}},941:function(t,e,a){var s=a(90)(a(942),a(943),!1,null,null,null);t.exports=s.exports},942:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(658),i=a(901),n=a(855);e.default={mixins:[s.a,i.a,n.a],props:{name:null,entities:null,checkGroupData:{toaster:!1,allChecked:!1},confirmDeleteMessage:"",successMessage:{single:"",multiple:""},errorMessage:{single:"",multiple:""}},data:function(){return{deleteGroupLoading:!1,showDeleteConfirmation:!1}},methods:{deleteSelectedEntities:function(){var t=this;this.deleteGroupLoading=!0,this.deleteEntities(this.entities.filter(function(t){return t.checked}).map(function(t){return t.id}),function(){t.showDeleteConfirmation=!1,t.deleteGroupLoading=!1,t.$emit("groupDeleteCallback")},function(t){},function(t){})}}}},943:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-vertical"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.checkGroupData.toaster,expression:"checkGroupData.toaster"}],staticClass:"am-bottom-popover"},[a("transition",{attrs:{name:"fade"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.showDeleteConfirmation,expression:"!showDeleteConfirmation"}],staticClass:"am-button-icon",on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}},[a("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.delete,src:t.$root.getUrl+"public/img/delete.svg"}})])],1),t._v(" "),a("transition",{attrs:{name:"slide-vertical"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteConfirmation,expression:"showDeleteConfirmation"}],staticClass:"am-bottom-popover-confirmation"},[a("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[a("h3",[t._v(t._s(t.confirmDeleteMessage))]),t._v(" "),a("div",{staticClass:"align-left"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:t.deleteGroupLoading},on:{click:t.deleteSelectedEntities}},[t._v("\n              "+t._s(t.$root.labels.delete)+"\n            ")])],1)])],1)])],1)])},staticRenderFns:[]}}});